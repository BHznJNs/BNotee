(function(e){function t(t){for(var s,i,l=t[0],a=t[1],d=t[2],b=0,h=[];b<l.length;b++)i=l[b],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&h.push(c[i][0]),c[i]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);r&&r(t);while(h.length)h.shift()();return n.push.apply(n,d||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],s=!0,l=1;l<o.length;l++){var a=o[l];0!==c[a]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=o[0]))}return e}var s={},c={app:0},n=[];function i(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=s,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var r=a;n.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0d55":function(e,t,o){"use strict";o("6d2d")},"15cf":function(e,t,o){"use strict";o("cee2")},"38b9":function(e,t,o){},"39de":function(e,t,o){},"3e29":function(e,t,o){"use strict";o("8c71")},"3e95":function(e,t,o){},"42ed":function(e,t,o){},"475b":function(e,t,o){},"4a16":function(e,t,o){"use strict";o("da3e")},"4b7b":function(e,t,o){"use strict";o("6377")},"4e36":function(e,t,o){},5113:function(e,t,o){"use strict";o("a306")},5143:function(e,t,o){},5200:function(e,t,o){"use strict";o("3e95")},"56d7":function(e,t,o){"use strict";o.r(t);var s=o("7a23");function c(e,t,o,c,n,i){const l=Object(s["u"])("tool-bar"),a=Object(s["u"])("control-balls"),d=Object(s["u"])("msgbar"),r=Object(s["u"])("note"),b=Object(s["u"])("fixed-components"),h=Object(s["u"])("anchors");return Object(s["o"])(),Object(s["f"])(s["a"],null,[Object(s["g"])("div",{class:Object(s["m"])(["dark-filter",{darken:n.isDarkMode}])},null,2),Object(s["j"])(l,{isTouchMode:n.isTouchMode},null,8,["isTouchMode"]),Object(s["j"])(a,{isDarkMode:n.isDarkMode,isTouchMode:n.isTouchMode,isFullscreen:n.isFullscreen,onToggleDarkMode:t[0]||(t[0]=e=>n.isDarkMode=!n.isDarkMode),onToggleTouchMode:t[1]||(t[1]=e=>n.isTouchMode=!n.isTouchMode),onToggleFullscreen:t[2]||(t[2]=e=>n.isFullscreen=!n.isFullscreen)},null,8,["isDarkMode","isTouchMode","isFullscreen"]),Object(s["j"])(d),Object(s["j"])(r,{isFullscreen:n.isFullscreen,isTouchMode:n.isTouchMode},null,8,["isFullscreen","isTouchMode"]),Object(s["j"])(b),Object(s["j"])(h)],64)}const n=e=>(Object(s["q"])("data-v-45826c3a"),e=e(),Object(s["p"])(),e),i={class:"toolbar shadow-3"},l={class:"logo shadow-2"},a=n(()=>Object(s["g"])("i",{class:"material-icons"},"info_outline",-1)),d=[a],r=n(()=>Object(s["g"])("i",{class:"material-icons"},"format_list_bulleted",-1)),b=[r],h={class:"tools"},u=n(()=>Object(s["g"])("i",{class:"material-icons"},"add",-1)),j=[u],O=n(()=>Object(s["g"])("i",{class:"material-icons"},"remove",-1)),p=[O],f=n(()=>Object(s["g"])("i",{class:"material-icons"},"indeterminate_check_box",-1)),g=[f],m=n(()=>Object(s["g"])("i",{class:"material-icons"},"color_lens",-1)),v=[m],T=n(()=>Object(s["g"])("i",{class:"material-icons"},"clear_all",-1)),C=[T],k=n(()=>Object(s["g"])("i",{class:"material-icons"},"vertical_align_bottom",-1)),N=[k],y={class:"material-icons file"},w=Object(s["i"])("input "),x={ref:"fileUploader",type:"file",accept:"application/json"};function M(e,t,o,c,n,a){const r=Object(s["u"])("info");return Object(s["o"])(),Object(s["f"])("div",i,[Object(s["j"])(r,{disabled:!n.isInfoWindowShow},null,8,["disabled"]),Object(s["g"])("div",l,[Object(s["g"])("div",{class:Object(s["m"])(["info-outer",{disabled:!n.isInfoIconShow}]),onClick:t[0]||(t[0]=e=>n.isInfoWindowShow=!0)},d,2),Object(s["g"])("div",{class:"logo-outer",onClick:t[1]||(t[1]=(...e)=>a.logoClick&&a.logoClick(...e))},b)]),Object(s["g"])("div",h,[Object(s["g"])("div",{class:Object(s["m"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc}]),onClick:t[2]||(t[2]=(...e)=>a.openTextfield&&a.openTextfield(...e))},j,2),Object(s["g"])("div",{class:Object(s["m"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc}]),onClick:t[3]||(t[3]=(...e)=>a.toDeleteNode&&a.toDeleteNode(...e))},p,2),Object(s["B"])(Object(s["g"])("div",{class:Object(s["m"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc}]),onClick:t[4]||(t[4]=(...e)=>a.nodeCancelSelect&&a.nodeCancelSelect(...e))},g,2),[[s["y"],o.isTouchMode]]),Object(s["g"])("div",{class:Object(s["m"])(["tool btn btn-shallow",{disabled:!["h1","h2","h3","h4","p","li"].includes(a.selectedNode.type)}]),onClick:t[5]||(t[5]=(...e)=>a.openColors&&a.openColors(...e))},v,2),Object(s["g"])("div",{class:"tool btn btn-shallow",onClick:t[6]||(t[6]=(...e)=>a.clearNodes&&a.clearNodes(...e))},C),Object(s["g"])("div",{class:"tool btn btn-shallow",onClick:t[7]||(t[7]=(...e)=>a.saveNote&&a.saveNote(...e)),onContextmenu:t[8]||(t[8]=Object(s["D"])((...e)=>a.saveMarkdown&&a.saveMarkdown(...e),["prevent"]))},N,32),Object(s["g"])("div",{class:"tool btn btn-shallow",onClick:t[9]||(t[9]=(...e)=>a.readNote&&a.readNote(...e))},[Object(s["g"])("i",y,[w,Object(s["g"])("input",x,null,512)])])])])}const L=e=>(Object(s["q"])("data-v-3f43b375"),e=e(),Object(s["p"])(),e),S={class:"info-outer"},_=L(()=>Object(s["g"])("i",{class:"material-icons"},"close",-1)),D=[_],A=L(()=>Object(s["g"])("div",{class:"info"},[Object(s["g"])("h1",null,"关于 | About"),Object(s["g"])("hr"),Object(s["g"])("h2",null,"此 | This"),Object(s["g"])("p",null," 一个运行在浏览器上的笔记程序。| A notebook application works on your Browser. "),Object(s["g"])("hr"),Object(s["g"])("h2",null,"作者 | Author"),Object(s["g"])("p",null,[Object(s["i"])(" GitHub: "),Object(s["g"])("a",{href:"https://github.com/BHznJNs",target:"_blank"},"https://github.com/BHznJNs"),Object(s["g"])("br"),Object(s["i"])(" BiliBili: "),Object(s["g"])("a",{href:"https://space.bilibili.com/274945998",target:"_blank"},"https://space.bilibili.com/274945998"),Object(s["g"])("br")]),Object(s["g"])("hr"),Object(s["g"])("h2",null,"框架 | Framework"),Object(s["g"])("p",null,[Object(s["i"])(" Vue.js "),Object(s["g"])("a",{href:"https://v3.cn.vuejs.org/",target:"_blank"},"https://v3.cn.vuejs.org/"),Object(s["g"])("br"),Object(s["i"])(" MDUI "),Object(s["g"])("a",{href:"https://www.mdui.org/",target:"_blank"},"https://www.mdui.org/")])],-1));function $(e,t,o,c,n,i){const l=Object(s["u"])("window");return Object(s["o"])(),Object(s["e"])(l,{width:"800px",height:"480px",disabled:o.disabled,onClose:i.close},{default:Object(s["A"])(()=>[Object(s["g"])("div",S,[Object(s["g"])("div",{class:"closer shadow-1",onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e))},D),A])]),_:1},8,["disabled","onClose"])}const I={class:"window-outer"};function B(e,t,o,c,n,i){return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["window-container",{disabled:o.disabled}])},[Object(s["g"])("div",{class:"fullscreen-mask",onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e))}),Object(s["g"])("div",I,[Object(s["g"])("div",{class:"window shadow-16",style:Object(s["n"])({width:o.width,height:o.height})},[Object(s["t"])(e.$slots,"default",{},void 0,!0)],4)])],2)}var E={props:["width","height","disabled"],methods:{close(){this.$emit("close")}}},F=(o("4b7b"),o("6b0d")),H=o.n(F);const U=H()(E,[["render",B],["__scopeId","data-v-6e558882"]]);var V=U,R={components:{Window:V},props:["disabled"],methods:{close(){this.$parent.isInfoWindowShow=!1}}};o("ab97");const G=H()(R,[["render",$],["__scopeId","data-v-3f43b375"]]);var K=G,q={inject:["note"],computed:{getThisObj(){if(!this.location)return;let e;return this.getNodeObj({location:this.location,callback:(t,o)=>{e=t[o]}}),e}},methods:{getNodeObj({parentObj:e=this.note,location:t,num:o=0,callback:s}){o==t.length-1?s&&s(e.CTS,t[o]):this.getNodeObj({parentObj:e.CTS[t[o]],location:t,num:o+1,callback:s})}}};const W=q;var P=W,J={methods:{insertNode(e,t){e&&t&&this.getNodeObj({location:t,callback:(t,o)=>{t.splice(o+1,0,e)}})}}},z={methods:{deleteNode(e){let t;return this.selectedNode.vnode&&(this.selectedNode.loc=null,this.selectedNode.type="",this.selectedNode.vnode=null,this.selectedNode.obj=null),this.getNodeObj({location:e,callback:(e,o)=>{t=e[o],e.splice(o,1)}}),t}}},Q=o("e797");function X(e,t){function o(e,t){const s="    ".repeat(t),c=e.OL,n=c?"1. ":"- ",i=e.CTS;let l="";for(const a of i)"li"==a.NT?l+=s+n+a.CT+"\n\n":l+=o(a,t+1);return l}const s=e.CT;let c,n=!1,i=!1;switch(e.NT){case"h":c="#".repeat(t)+s;break;case"hr":c="* * *";break;case"p":c="  ".repeat(t-1)+s;break;case"link":c=`[${s}](${e.HF})`;break;case"floor":n=!0,c=Y(e.CTS,t+1);break;case"list":n=!0,c=o(e,0),i=!0;break;case"table":c=Object(Q["a"])(e.CTS),i=!0;break;case"details":c="> "+e.SUM;for(const t of e.CTS)c+="\n\n>> "+t.CT;i=!0;break;case"code":c=`\`\`\`${e.LG}\n${e.CT}\n\`\`\``;break;default:return console.log("Unknown node type!"),""}return n||(c+="\n\n"),i&&(c+="\n"),c}function Y(e,t){let o="";for(const s of e)o+=X(s,t);return o}var Z=e=>{const t=e.CTS;return Y(t,1)},ee=o("1344"),te=new ee["a"],oe=o("21a6"),se=o.n(oe),ce={data(){return{isInfoIconShow:!1,isInfoWindowShow:!1}},props:["isTouchMode"],inject:["note","selectedNode"],components:{Info:K},mixins:[P,J,z],mounted(){const e=this.$refs.fileUploader;e.addEventListener("change",()=>{let t=new FileReader;t.readAsText(e.files[0],"uft8"),t.onload=e=>{let t=e.target.result;this.note.CTS=JSON.parse(t),te.emit("note-loaded")}}),te.on("textfield-return-toolBar",e=>{this.toInsertNode(e)})},methods:{logoClick(){this.isInfoIconShow=!0,setTimeout(()=>{this.isInfoIconShow=!1},3e3)},openTextfield(){te.emit("textfield-open","toolBar")},toInsertNode(e){const t=Array.from(this.selectedNode.loc);this.insertNode(e,t),t[t.length-1]+=1,te.emit("add-history",{loc:t,prop:"IST"})},toDeleteNode(){const e=this.selectedNode.loc,t=this.deleteNode(e);e[e.length-1]-=1,te.emit("add-history",{loc:e,prop:"DEL",nodeObj:t})},nodeCancelSelect(){this.selectedNode.vnode.selected=!1,this.selectedNode.loc=null,this.selectedNode.obj=null,this.selectedNode.type=null},openColors(){te.emit("fixedComponents-open","colors")},clearNodes(){this.note.CTS=[],this.note.HT=[],te.emit("clear-history")},saveNote(){let e=new Blob([JSON.stringify(this.note.CTS)],{type:"text/plain;charset=utf-8"});const t=this.note.NM||"MyNote";se()(e,t+".json")},saveMarkdown(){const e=Z(this.note);let t=new Blob([e],{type:"text/plain;charset=utf-8"});const o=this.note.NM||"MyNote";se()(t,o+".md")},readNote(){const e=this.$refs.fileUploader;e.click()}}};o("5200");const ne=H()(ce,[["render",M],["__scopeId","data-v-45826c3a"]]);var ie=ne;const le=e=>(Object(s["q"])("data-v-79141601"),e=e(),Object(s["p"])(),e),ae=le(()=>Object(s["g"])("i",{class:"material-icons"},"add",-1)),de=[ae];function re(e,t,o,c,n,i){const l=Object(s["u"])("floor-block"),a=Object(s["u"])("node-renderer"),d=Object(s["u"])("textfield-group");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["note-outer shadow-4",{fullscreen:o.isFullscreen}])},[Object(s["g"])("div",{class:"note",ref:"note",onContextmenu:t[1]||(t[1]=Object(s["D"])(()=>{},["prevent"]))},[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(i.note.CTS,(e,t)=>(Object(s["o"])(),Object(s["f"])(s["a"],{key:e.id},["floor"==e.NT?(Object(s["o"])(),Object(s["e"])(l,{key:0,children:e.CTS,level:2,location:[t]},null,8,["children","location"])):(Object(s["o"])(),Object(s["e"])(a,{key:1,level:1,nodeObj:e,location:[t]},null,8,["nodeObj","location"]))],64))),128)),Object(s["j"])(d,{id:"note-textfield-group",ref:"textfield",isAdding:n.isNodeAdding,onReturnNode:i.closeNodeAdder},null,8,["isAdding","onReturnNode"]),Object(s["g"])("div",{class:Object(s["m"])(["btn-fab adder-btn",{disabled:n.isNodeAdding,fullscreen:o.isFullscreen}]),onClick:t[0]||(t[0]=(...e)=>i.openNodeAdder&&i.openNodeAdder(...e))},de,2)],544)],2)}o("14d9");const be=["#","`","_","/","-",":"],he={"##":"strong","``":"code",__:"u","//":"i","--":"del","::":"span"};function ue(e){const t=[];let o="",s="";for(let c of e)be.includes(c)?c==s?(t.push({type:"text",content:o.slice(0,-1)}),t.push({type:"key",content:c.repeat(2)}),s="",o=""):(o+=c,s=c):(s.length&&(s=""),o+=c);return o.length&&t.push({type:"text",content:o}),t}function je(e){const t=[];let o="",s="",c="";for(let n of e){const e=n.content;if(o+=e,"key"==n.type)if("key"==s){if(e!=c)continue;const n=he[e];t.push({tagName:n,content:o}),s="",o=""}else s="key",c=e;else"key"!=s&&(t.push({tagName:"text",content:o}),o="")}if(o.length){const e=t[t.length-1];e.content+=o}return t}function Oe(e,t){return`<${e}>${t}</${e}>`}function pe(e){const t=[];for(let o of e)"text"==o.tagName?t.push(o.content):t.push(Oe(o.tagName,o.content));return t}function fe(e){if(!e)return null;const t=ue(e),o=je(t);let s;s=pe(o);const c=s.join("");return c}async function ge(){const e=document.getElementsByClassName("inline-style");for(let t of e){const e=t.textContent;if(!e)continue;const o=fe(e,"HTML");t.innerHTML=o}}var me={outputer:fe,init:ge};const ve=Object(s["g"])("div",{class:"mask"},null,-1);function Te(e,t,o,c,n,i){const l=Object(s["u"])("floor-block",!0),a=Object(s["u"])("node-renderer"),d=Object(s["u"])("block-controls");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["floor shadow-1",{"shadow-3":n.selected,"touch-mode":i.isTouchMode}]),onMouseenter:t[0]||(t[0]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[ve,(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(e,t)=>(Object(s["o"])(),Object(s["f"])(s["a"],{key:e.id},["floor"==e.NT?(Object(s["o"])(),Object(s["e"])(l,{key:0,children:e.CTS,level:o.level+1,location:o.location.concat([t])},null,8,["children","level","location"])):(Object(s["o"])(),Object(s["e"])(a,{key:1,nodeObj:e,level:o.level,location:o.location.concat([t])},null,8,["nodeObj","level","location"]))],64))),128)),Object(s["j"])(d,{disabled:!e.hover,isTouchMode:i.isTouchMode,selected:n.selected,location:o.location,parentType:"floor"},null,8,["disabled","isTouchMode","selected","location"])],34)}var Ce={methods:{selectEvent(){this.selected?(te.emit("fixedComponents-close"),this.selectedNode.loc=null,this.selectedNode.vnode=null,this.selectedNode.obj=null,this.selectedNode.type=null,this.selected=!1):(this.selectedNode.loc&&(this.selectedNode.vnode.selected=!1),this.selectedNode.loc=this.location,this.selectedNode.vnode=this,this.selectedNode.obj=this.getThisObj,this.selectedNode.type=this.tagName,this.selected=!0)}}},ke={data(){return{selected:!1,initialContent:"",editing:!1,dbTouch:!1}},inject:["selectedNode"],mixins:[P,Ce],props:["tagName","content","location","color"],watch:{content(e){this.$nextTick(()=>{const t=me.outputer(e);this.$el.innerHTML=t})}},render(){return Object(s["l"])(this.tagName,{contentEditable:!0,class:{selected:this.selected,editing:this.editing,"inline-style":!0},style:{color:this.color},onContextmenu:e=>{e.preventDefault(),this.initialContent||(this.initialContent=e.target.innerText),this.selectEvent()},onTouchstart:()=>{this.dbTouch&&this.selectEvent(),this.dbTouch=!0,setTimeout(()=>{this.dbTouch=!1},300)},onClick:()=>{this.editing||(this.initialContent=this.$el.innerText),this.editing=!0},onBlur:e=>{const t=e.target.innerText;t!=this.initialContent&&(this.getThisObj.CT=t,te.emit("add-history",{loc:this.location,prop:"CT",before:this.initialContent,after:t}),this.initialContent=t),this.editing=!1}},this.content)}};const Ne=ke;var ye=Ne,we={props:["level","content","location","color"],components:[ye],mounted(){this.$nextTick(()=>{te.emit("anchor-mounted")})},render(){let e;return e=this.level<6?"h"+this.level:"h5",Object(s["l"])(ye,{tagName:e,id:this.location.join(""),class:"heading",content:this.content,color:this.color,location:this.location})}};const xe=we;var Me=xe,Le={data(){return{selected:!1,initialContent:"",editing:!1,dbRightClick:!1}},inject:["selectedNode"],mixins:[P,Ce],props:["tagName","content","location","color","href"],render(){return Object(s["l"])(this.tagName,{contentEditable:!0,href:this.href,target:"_blank",class:{selected:this.selected,editing:this.editing,"inline-style":!0},style:{color:this.color},onClick:e=>{e.preventDefault(),window.open(this.href),this.$el.blur()},onContextmenu:e=>{e.preventDefault(),this.dbRightClick?this.selectEvent():(this.dbRightClick=!0,setTimeout(()=>{this.dbRightClick=!1},300),this.editing||(this.initialContent=e.target.innerText),this.editing=!0)},onBlur:e=>{const t=e.target.innerText;t!=this.initialContent&&(this.getThisObj.CT=t,te.emit("add-history",{loc:this.location,prop:"CT",before:this.initialContent,after:t}),this.initialContent=t),this.editing=!1}},this.content)}};const Se=Le;var _e=Se;const De=Object(s["g"])("div",{class:"mask"},null,-1),Ae=Object(s["g"])("i",{class:"material-icons"},"playlist_add",-1),$e=[Ae],Ie={class:"material-icons"},Be={class:"material-icons"};function Ee(e,t,o,c,n,i){const l=Object(s["u"])("list-block",!0),a=Object(s["u"])("basic-node"),d=Object(s["u"])("list-child"),r=Object(s["u"])("block-controls");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["list",{"shadow-2":n.selected,hover:e.hover,empty:!o.children.length,"touch-mode":i.isTouchMode,nested:n.isNested}]),onMouseenter:t[2]||(t[2]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[De,Object(s["j"])(d,{ordered:o.isOrdered},{default:Object(s["A"])(()=>[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(t,c)=>(Object(s["o"])(),Object(s["f"])(s["a"],{key:t.id},["list"==t.NT?(Object(s["o"])(),Object(s["e"])(l,{key:0,isOrdered:t.OL,children:t.CTS,location:o.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["isOrdered","children","location","onMouseInChild"])):(Object(s["o"])(),Object(s["e"])(a,{key:1,tagName:"li",content:t.CT,color:t.CL,location:o.location.concat([c])},null,8,["content","color","location"]))],64))),128))]),_:1},8,["ordered"]),Object(s["j"])(r,{disabled:!e.hover,isTouchMode:i.isTouchMode,selected:n.selected,location:o.location,parentType:"list"},{default:Object(s["A"])(()=>[Object(s["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=(...e)=>i.addListBlock&&i.addListBlock(...e))},$e),Object(s["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[1]||(t[1]=(...e)=>i.toggleOrdered&&i.toggleOrdered(...e))},[Object(s["B"])(Object(s["g"])("i",Ie,"format_list_bulleted",512),[[s["y"],o.isOrdered]]),Object(s["B"])(Object(s["g"])("i",Be,"format_list_numbered",512),[[s["y"],!o.isOrdered]])])]),_:1},8,["disabled","isTouchMode","selected","location"])],34)}const Fe=e=>(Object(s["q"])("data-v-04fa293f"),e=e(),Object(s["p"])(),e),He=Fe(()=>Object(s["g"])("i",{class:"material-icons"},"add",-1)),Ue=[He],Ve={class:"checkbox"},Re=["checked"];function Ge(e,t,o,c,n,i){return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["controls",{disabled:o.disabled&&!o.isTouchMode,"touch-mode":o.isTouchMode}])},[Object(s["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=(...t)=>e.addNode&&e.addNode(...t))},Ue),Object(s["t"])(e.$slots,"default",{},void 0,!0),Object(s["g"])("label",Ve,[Object(s["g"])("input",{type:"checkbox",ref:"checkbox",checked:o.selected,onChange:t[1]||(t[1]=(...e)=>i.selectEvent&&i.selectEvent(...e))},null,40,Re),Object(s["g"])("i",{class:"checkbox-icon",onTouchstart:t[2]||(t[2]=(...e)=>i._touchstart&&i._touchstart(...e)),onTouchend:t[3]||(t[3]=(...e)=>i._touchend&&i._touchend(...e))},null,32)])],2)}var Ke={methods:{tableAdder(e){const t=e.length,o=e[0].length;let s=[];for(let c=0;c<o;c++)s.push("");e.push(s),te.emit("add-history",{loc:this.location,prop:"ROW",before:t,after:t+1})},detailAdder(e){e.push({CT:"",CL:"#333"});const t=Object.create(this.location);t.push(e.length-1),te.emit("add-history",{loc:t,prop:"IST"})},listAdder(e){e.push({NT:"li",CT:"",CL:"#333"});const t=Object.create(this.location);t.push(e.length-1),te.emit("add-history",{loc:t,prop:"IST"})},floorAdder(e){te.off("textfield-return-"+this.parentType),te.on("textfield-return-"+this.parentType,t=>{t&&e.push(t);const o=Array.from(this.location);o.push(e.length-1),te.emit("add-history",{loc:o,prop:"IST"}),te.off("textfield-return-"+this.parentType)}),te.emit("textfield-open",this.parentType)},addNode(){const e=this.getThisObj.CTS;switch(this.parentType){case"table":this.tableAdder(e);break;case"details":this.detailAdder(e);break;case"list":this.listAdder(e);break;case"floor":this.floorAdder(e)}}}},qe={data(){return{timeout:null}},props:["isTouchMode","parentType","disabled","location","selected"],inject:["selectedNode"],mixins:[P,Ke],methods:{_touchstart(){this.timeout=setTimeout(()=>{this.addNode()},1e3)},_touchend(){clearTimeout(this.timeout)},selectEvent(){const e=this.$refs.checkbox.checked;this.$parent.selected=e,e?(this.selectedNode.loc&&(this.selectedNode.vnode.selected=!1),this.selectedNode.loc=this.location,this.selectedNode.vnode=this.$parent,this.selectedNode.type=this.parentType,"list"==this.parentType&&(this.selectedNode.type=this.$parent.isNested?"nestedList":"notNestedList")):(this.selectedNode.loc=null,this.selectedNode.vnode=null,this.selectedNode.type=null)}}};o("83d0"),o("c436");const We=H()(qe,[["render",Ge],["__scopeId","data-v-04fa293f"]]);var Pe=We,Je={data(){return{hover:!1,setTimeout:null}},methods:{onMouseEnter(){this.setTimeout=setTimeout(()=>{this.hover=!0},400)},onMouseLeave(){clearTimeout(this.setTimeout),this.selected||(this.hover=!1)}}},ze={name:"list-block",data(){return{selected:!1,isNested:null}},components:{BasicNode:ye,BlockControls:Pe,listChild:{props:["ordered"],render(){return Object(s["l"])(this.ordered?"ol":"ul",this.$slots.default())}}},props:["children","isOrdered","location"],inject:["isTouchMode"],mixins:[P,Je],methods:{addListBlock(){const e=this.getThisObj.CTS;e.push({NT:"list",OL:!1,CTS:[{NT:"li",CT:"",CL:"#333"}]});const t=Object.create(this.location);t.push(e.length-1),te.emit("add-history",{loc:t,prop:"IST"})},toggleOrdered(){this.getThisObj.OL=!this.getThisObj.OL}},mounted(){const e=this.$el.parentNode;this.isNested="OL"==e.tagName||"UL"==e.tagName}};const Qe=H()(ze,[["render",Ee]]);var Xe=Qe;const Ye=Object(s["g"])("div",{class:"mask"},null,-1),Ze=Object(s["g"])("i",{class:"material-icons"},"grid_on",-1),et=[Ze];function tt(e,t,o,c,n,i){const l=Object(s["u"])("table-row"),a=Object(s["u"])("block-controls");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["table shadow-1",{"shadow-3":n.selected,"touch-mode":i.isTouchMode,hover:e.hover&&!i.isTouchMode}]),onMouseenter:t[1]||(t[1]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[Ye,Object(s["g"])("table",null,[Object(s["g"])("tbody",null,[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(e,t)=>(Object(s["o"])(),Object(s["e"])(l,{key:e.id,children:e,location:o.location.concat(t)},null,8,["children","location"]))),128))])]),Object(s["j"])(a,{isTouchMode:i.isTouchMode,disabled:!e.hover,selected:n.selected,location:o.location,parentType:"table"},{default:Object(s["A"])(()=>[Object(s["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=(...e)=>i.openTableSetter&&i.openTableSetter(...e))},et)]),_:1},8,["isTouchMode","disabled","selected","location"])],34)}const ot=["onBlur"];function st(e,t,o,c,n,i){return Object(s["o"])(),Object(s["f"])("tr",null,[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(e,o)=>(Object(s["o"])(),Object(s["f"])("td",{key:e.id,onClick:t[0]||(t[0]=(...e)=>i.edit&&i.edit(...e)),onContextmenu:t[1]||(t[1]=(...e)=>i.edit&&i.edit(...e)),onBlur:e=>i.finishEdit(e,o),contenteditable:"true"},Object(s["w"])(e),41,ot))),128))])}var ct={mixins:[P],props:["children","location"],methods:{edit(e){let t=e.target;t.classList.add("editing")},finishEdit(e,t){let o=e.target;o.classList.remove("editing");let s=o.innerText;this.getThisObj[t]=s}}};const nt=H()(ct,[["render",st]]);var it=nt,lt={data(){return{selected:!1}},props:["children","location"],inject:["isTouchMode"],mixins:[Je],components:{TableRow:it,BlockControls:Pe},methods:{openTableSetter(){te.emit("fixedComponents-open","tableSetter"),te.emit("table-location",this.location)}}};const at=H()(lt,[["render",tt]]);var dt=at;function rt(e,t,o,c,n,i){const l=Object(s["u"])("basic-node"),a=Object(s["u"])("block-controls");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["details",{"shadow-2":n.selected,hover:e.hover,"touch-mode":i.isTouchMode}]),onMouseenter:t[2]||(t[2]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[Object(s["g"])("summary",{class:"summary",contenteditable:"true",ref:"summary",onBlur:t[0]||(t[0]=(...e)=>i.finishEdit&&i.finishEdit(...e))},Object(s["w"])(o.summary),545),Object(s["g"])("details",null,[Object(s["g"])("summary",{onContextmenu:t[1]||(t[1]=t=>e.$refs.summary.focus()),style:{"line-height":"1.4"}},null,32),(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(e,t)=>(Object(s["o"])(),Object(s["e"])(l,{key:e.id,tagName:"p",content:e.CT,color:e.CL,location:o.location.concat([t])},null,8,["content","color","location"]))),128))]),Object(s["j"])(a,{disabled:!e.hover,isTouchMode:i.isTouchMode,selected:n.selected,location:o.location,parentType:"details"},null,8,["disabled","isTouchMode","selected","location"])],34)}var bt={data(){return{selected:!1}},components:{BasicNode:ye,BlockControls:Pe},mixins:[P,Je],inject:["isTouchMode"],props:["children","summary","location"],methods:{finishEdit(e){const t=e.target,o=t.innerText;te.emit("add-history",{loc:this.location,prop:"SUM",before:this.getThisObj.SUM,after:o}),this.getThisObj.SUM=o}}};o("8897");const ht=H()(bt,[["render",rt],["__scopeId","data-v-7df230aa"]]);var ut=ht;function jt(e,t,o,c,n,i){const l=Object(s["u"])("highlightjs");return t[0]||(Object(s["v"])(-1),t[0]=Object(s["j"])(l,{code:o.code,language:o.language,autodetect:!1,onFocusout:i.render,onContextmenu:i.select,tabindex:"0"},null,8,["code","language","onFocusout","onContextmenu"]),Object(s["v"])(1),t[0])}var Ot=o("d383"),pt=o.n(Ot),ft=o("b056");function gt(e,t="end"){const o=window.getSelection(),s=o.getRangeAt(0),c=document.createTextNode(e);s.insertNode(c),"start"==t?o.collapseToStart():"end"==t?o.collapseToEnd():console.warn("Unknown direction type!")}function mt(e){e.preventDefault(),gt("    ")}const vt=new Map([[")","("],["]","["],["}","{"],[">","<"]]),Tt=["html","xml","xhtml","svg","rss"];function Ct(e,t){setTimeout(()=>{t?(gt(vt.get(e)+"\n    "),gt("\n"+e,"start")):gt(e,"start")},150)}var kt={methods:{codeInput(e){switch(e.keyCode){case 9:mt(e);break;case 57:e.shiftKey&&Ct(")",e.altKey);break;case 219:e.shiftKey?Ct("}",e.altKey):Ct("]",e.altKey);break;case 188:Tt.includes(this.language)&&Ct(">");break;case 222:e.shiftKey?Ct('"'):Ct("'");break;case 192:Ct("`",e.altKey);break}}}},Nt={data(){return{tagName:"code",codeNode:null,selected:!1}},components:{highlightjs:ft["a"].component},mixins:[P,Ce,kt],inject:["selectedNode"],props:["language","code","location"],watch:{code(e){this.codeNode.innerHTML=e,pt.a.highlightElement(this.codeNode)}},methods:{render(){let e=this.codeNode.innerText;e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");const t=this.getThisObj.CT,o=e;o!=t&&(te.emit("add-history",{loc:this.location,prop:"CT",before:this.getThisObj.CT,after:e}),this.getThisObj.CT=e)},select(){this.selectEvent(),this.codeNode.classList.toggle("selected",this.selected)}},mounted(){this.codeNode=this.$el.querySelector("code"),this.codeNode.contentEditable=!0,this.codeNode.addEventListener("keydown",this.codeInput),this.$nextTick(()=>{this.codeNode.innerHTML=this.code,pt.a.highlightElement(this.codeNode)})}};o("bde3");const yt=H()(Nt,[["render",jt]]);var wt=yt,xt={props:["nodeObj","level","location"],render(){let e,t={location:this.location};switch(this.nodeObj.NT){case"h":e=Me,t.level=this.level,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL;break;case"link":e=_e,t.tagName="a",t.content=this.nodeObj.CT,t.color=this.nodeObj.CL,t.href=this.nodeObj.HF;break;case"list":e=Xe,t.isOrdered=this.nodeObj.OL,t.children=this.nodeObj.CTS;break;case"table":e=dt,t.children=this.nodeObj.CTS;break;case"details":e=ut,t.summary=this.nodeObj.SUM,t.children=this.nodeObj.CTS;break;case"code":e=wt,t.language=this.nodeObj.LG,t.code=this.nodeObj.CT;break;default:e=ye,t.tagName=this.nodeObj.NT,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL}return Object(s["l"])(e,t)}};const Mt=xt;var Lt=Mt,St={name:"floor-block",components:{BlockControls:Pe,NodeRenderer:Lt},data(){return{selected:!1}},props:["level","location","children"],inject:["isTouchMode"],mixins:[Je]};const _t=H()(St,[["render",Te]]);var Dt=_t;const At={class:"selector",ref:"selector"},$t=Object(s["h"])('<option value="h">标题</option><option value="p">段落</option><option value="link">链接</option><option value="hr">割线</option><option value="floor">层次</option><option value="ol">序列</option><option value="ul">乱列</option><option value="code">代码</option><option value="table">表格</option><option value="details">详情</option>',10),It=[$t],Bt=Object(s["g"])("i",{class:"material-icons"},"close",-1),Et=[Bt];function Ft(e,t,o,c,n,i){return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["textfield-group shadow-2",{disabled:!o.isAdding}])},[Object(s["g"])("select",At,It,512),Object(s["g"])("div",{class:"textfield",contenteditable:"true",ref:"inputter",onKeydown:t[0]||(t[0]=Object(s["C"])(Object(s["D"])((...e)=>i.enter&&i.enter(...e),["prevent"]),["enter"]))},null,544),Object(s["g"])("div",{class:"textfield-closer closer",onClick:t[1]||(t[1]=e=>i.closeNodeAdder())},Et)],2)}var Ht=(e,t)=>{if(!t)return null;let o={NT:e};switch(e){case"h":case"p":case"li":o.CT=t,o.CL="#333";break;case"link":o.HF=t,o.CT="",o.CL="#333";break;case"hr":break;case"floor":o.CTS=[{NT:"h",CT:t,CL:"#333"}];break;case"ol":o.NT="list",o.CTS=[{NT:"li",CT:t,CL:"#333"}],o.OL=!0;break;case"ul":o.NT="list",o.CTS=[{NT:"li",CT:t,CL:"#333"}],o.OL=!1;break;case"code":o.LG=t,o.CT="";break;case"table":o.CTS=[[t,"","",""],["","","",""]];break;case"details":o.SUM=t,o.CTS=[{CT:"",CL:"#333"}];break}return o},Ut={props:["isAdding"],inject:["note"],methods:{focus(){const e=this.$refs.inputter;e.focus()},enter(){this.closeNodeAdder()},closeNodeAdder(){const e=this.$refs.selector,t=this.$refs.inputter,o=e.value,s=t.innerText,c=Ht(o,s);this.$emit("return-node",c),t.blur(),t.innerText=""}}};const Vt=H()(Ut,[["render",Ft]]);var Rt=Vt,Gt={components:{FloorBlock:Dt,NodeRenderer:Lt,TextfieldGroup:Rt},data(){return{isNodeAdding:!1}},props:["isFullscreen"],inject:["note"],created(){addEventListener("keydown",e=>{const t=e.altKey,o=e.key;t&&"a"==o&&(e.preventDefault(),this.openNodeAdder())})},mounted(){this.$nextTick(()=>{me.init()}),te.on("note-loaded",()=>{this.$nextTick(()=>{me.init()})})},methods:{openNodeAdder(){location.href="#note-textfield-group",this.isNodeAdding=!0,this.$nextTick(()=>{this.$refs.textfield.focus()})},closeNodeAdder(e){this.isNodeAdding=!1;const t=this.note.CTS;e&&t.push(e);const o=[t.length-1];te.emit("add-history",{loc:o,prop:"IST"})}},watch:{isFullscreen(e,t){e!=t&&(this.$refs.note.style.display="none",setTimeout(()=>{this.$refs.note.style.display="block"},1200))}}};o("8a36");const Kt=H()(Gt,[["render",re],["__scopeId","data-v-79141601"]]);var qt=Kt;function Wt(e,t,o,c,n,i){const l=Object(s["u"])("anchors-view"),a=Object(s["u"])("drawer");return Object(s["o"])(),Object(s["f"])("div",null,[Object(s["j"])(a,{title:"笔记摘要",disabled:n.drawerDisabled,onCloseDrawer:t[0]||(t[0]=e=>n.drawerDisabled=!0)},{default:Object(s["A"])(()=>[Object(s["j"])(l,{list:n.anchorList},null,8,["list"])]),_:1},8,["disabled"])])}const Pt={class:"titlebar shadow-4"},Jt={class:"closer circle"},zt={class:"drawer-view"};function Qt(e,t,o,c,n,i){return Object(s["o"])(),Object(s["f"])(s["a"],null,[Object(s["g"])("div",{class:Object(s["m"])(["fullscreen-mask",{disabled:o.disabled}]),onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e))},null,2),Object(s["g"])("div",{class:Object(s["m"])(["drawer",{disabled:o.disabled}])},[Object(s["g"])("div",Pt,[Object(s["g"])("div",Jt,[Object(s["g"])("i",{class:"material-icons arrow-forward",onClick:t[1]||(t[1]=(...e)=>i.close&&i.close(...e))},"arrow_forward"),Object(s["g"])("i",{class:"material-icons arrow-upward",onClick:t[2]||(t[2]=(...e)=>i.close&&i.close(...e))},"arrow_upward")]),Object(s["g"])("h1",null,Object(s["w"])(o.title),1)]),Object(s["g"])("div",zt,[Object(s["t"])(e.$slots,"default")])],2)],64)}var Xt={props:["title","disabled"],emits:["close-drawer"],methods:{close(){this.$emit("close-drawer")}}};o("aee9");const Yt=H()(Xt,[["render",Qt]]);var Zt=Yt,eo={data(){return{drawerDisabled:!0,anchorList:[],timeout:null}},components:{Drawer:Zt,AnchorsView:{props:["list"],render(){let e=this.list.map(e=>Object(s["l"])("a",{level:e.level,href:"#"+e.href},e.content));return Object(s["l"])("div",e)}}},inject:["note"],methods:{getAnchors(){const e=document.querySelectorAll(".heading");let t=[];for(let o of e)t.push({level:o.tagName,href:o.id,content:o.innerText});return t},close(){this.drawerDisabled=!0}},mounted(){te.on("open-anchors",()=>{this.drawerDisabled=!1}),te.on("anchor-mounted",()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout(()=>{this.anchorList=this.getAnchors()})})}};const to=H()(eo,[["render",Wt]]);var oo=to;const so=e=>(Object(s["q"])("data-v-c8fd90ac"),e=e(),Object(s["p"])(),e),co=so(()=>Object(s["g"])("div",{class:"block"},[Object(s["g"])("div",{class:"mask"}),Object(s["g"])("i",{class:"material-icons"},"apps")],-1)),no=so(()=>Object(s["g"])("i",{class:"material-icons"},"subtitles",-1)),io=[no],lo={class:"material-icons"},ao={class:"material-icons"},ro=so(()=>Object(s["g"])("i",{class:"material-icons"},"touch_app",-1)),bo=[ro],ho={class:"material-icons"},uo={class:"material-icons"};function jo(e,t,o,c,n,i){return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["controlballs",{fullscreen:o.isFullscreen}])},[co,Object(s["g"])("div",{class:"ball btn",onClick:t[0]||(t[0]=(...e)=>i.openAnchors&&i.openAnchors(...e))},io),Object(s["g"])("div",{class:"ball btn",onClick:t[1]||(t[1]=t=>e.$emit("toggle-darkMode"))},[Object(s["B"])(Object(s["g"])("i",lo,"brightness_2",512),[[s["y"],!o.isDarkMode]]),Object(s["B"])(Object(s["g"])("i",ao,"wb_sunny",512),[[s["y"],o.isDarkMode]])]),Object(s["g"])("div",{class:Object(s["m"])(["ball btn",{black:o.isTouchMode}]),onClick:t[2]||(t[2]=t=>e.$emit("toggle-touchMode"))},bo,2),Object(s["g"])("div",{class:"ball btn",onClick:t[3]||(t[3]=t=>e.$emit("toggle-fullscreen"))},[Object(s["B"])(Object(s["g"])("i",ho,"fullscreen",512),[[s["y"],!o.isFullscreen]]),Object(s["B"])(Object(s["g"])("i",uo,"fullscreen_exit",512),[[s["y"],o.isFullscreen]])])],2)}var Oo={props:["isDarkMode","isTouchMode","isFullscreen"],emits:["toggle-darkMode","toggle-touchMode","toggle-fullscreen"],methods:{openAnchors(){te.emit("open-anchors")}}};o("0d55");const po=H()(Oo,[["render",jo],["__scopeId","data-v-c8fd90ac"]]);var fo=po;function go(e,t,o,c,n,i){const l=Object(s["u"])("textfield-group-fixed"),a=Object(s["u"])("colors"),d=Object(s["u"])("table-setter"),r=Object(s["u"])("history");return Object(s["o"])(),Object(s["f"])("div",null,[Object(s["j"])(l,{onClose:i.close,disabled:n.textfieldGroupDisabled},null,8,["onClose","disabled"]),Object(s["j"])(a,{onClose:i.close,disabled:n.colorsDisabled},null,8,["onClose","disabled"]),Object(s["j"])(d,{onClose:i.close,disabled:n.tableSetterDisabled},null,8,["onClose","disabled"]),Object(s["j"])(r,{disabled:n.historyDisabled},null,8,["disabled"])])}const mo={class:"textfield-group fixed-component fixed"},vo={class:"selector",ref:"selector"},To=Object(s["g"])("option",{value:"h"},"标题",-1),Co=Object(s["g"])("option",{value:"p"},"段落",-1),ko=Object(s["g"])("option",{value:"link"},"链接",-1),No=Object(s["g"])("option",{value:"hr"},"割线",-1),yo=Object(s["g"])("option",{value:"floor"},"层次",-1),wo=Object(s["g"])("option",{value:"ol"},"序列",-1),xo=Object(s["g"])("option",{value:"ul"},"乱列",-1),Mo=Object(s["g"])("option",{value:"code"},"代码",-1),Lo=Object(s["g"])("option",{value:"table"},"表格",-1),So=Object(s["g"])("option",{value:"details"},"详情",-1),_o=[To,Co,ko,No,yo,wo,xo,Mo,Lo,So],Do={class:"selector",ref:"selector4List"},Ao=Object(s["g"])("option",{value:"li"},"列项",-1),$o=Object(s["g"])("option",{value:"ol"},"序列",-1),Io=Object(s["g"])("option",{value:"ul"},"乱列",-1),Bo=[Ao,$o,Io],Eo=Object(s["g"])("i",{class:"material-icons"},"close",-1),Fo=[Eo];function Ho(e,t,o,c,n,i){return Object(s["o"])(),Object(s["e"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",mo,[Object(s["B"])(Object(s["g"])("select",vo,_o,512),[[s["y"],!i.isFromNestedList]]),Object(s["B"])(Object(s["g"])("select",Do,Bo,512),[[s["y"],i.isFromNestedList]]),Object(s["g"])("div",{class:"textfield",ref:"inputer",contenteditable:"true",onKeydown:t[0]||(t[0]=Object(s["C"])((...e)=>i.onEnter&&i.onEnter(...e),["enter"]))},null,544),Object(s["g"])("div",{class:"textfield-closer closer",onClick:t[1]||(t[1]=(...e)=>i.closeTextfield&&i.closeTextfield(...e))},Fo)],512),[[s["y"],!o.disabled]])]),_:1})}var Uo={data(){return{commandFrom:""}},props:["disabled"],inject:["selectedNode"],computed:{isFromNestedList(){return"list"==this.commandFrom||["li","nestedList"].includes(this.selectedNode.type)}},mounted(){te.on("textfield-open",e=>{this.commandFrom=e})},methods:{onEnter(e){e.altKey&&(e.preventDefault(),this.closeTextfield())},closeTextfield(){this.$emit("close","textfieldGroup");const e=this.isFromNestedList?this.$refs.selector4List.value:this.$refs.selector.value,t=this.$refs.inputer.innerText,o=Ht(e,t);te.emit("textfield-return-"+this.commandFrom,o),this.$refs.inputer.blur(),this.$refs.inputer.innerText=""}}};const Vo=H()(Uo,[["render",Ho]]);var Ro=Vo;const Go=e=>(Object(s["q"])("data-v-0a22116a"),e=e(),Object(s["p"])(),e),Ko={class:"colors fixed-component"},qo=["onClick"],Wo={class:"input-group"},Po=Go(()=>Object(s["g"])("i",{class:"material-icons"},"close",-1)),Jo=[Po];function zo(e,t,o,c,n,i){return Object(s["o"])(),Object(s["e"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",Ko,[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(n.colors,e=>(Object(s["o"])(),Object(s["f"])("div",{key:e.id,class:"color btn btn-shallow",style:Object(s["n"])({"background-color":e}),onClick:t=>i.setColor(e)},null,12,qo))),128)),Object(s["g"])("div",Wo,[Object(s["g"])("div",{class:"hint",onClick:t[0]||(t[0]=t=>e.$refs.colorInputter.click())},"#"),Object(s["B"])(Object(s["g"])("input",{type:"color",ref:"colorInputter","onUpdate:modelValue":t[1]||(t[1]=e=>n.colorValue=e)},null,512),[[s["y"],!1],[s["x"],n.colorValue]]),Object(s["B"])(Object(s["g"])("input",{class:"inputter",placeholder:"******",type:"text",maxlength:"8","onUpdate:modelValue":t[2]||(t[2]=e=>n.colorValue=e)},null,512),[[s["x"],n.colorValue]])]),Object(s["g"])("div",{class:"closer",onClick:t[3]||(t[3]=t=>e.$emit("close","colors"))},Jo)],512),[[s["y"],!o.disabled]])]),_:1})}var Qo={data(){return{colors:["#D50000","#FFD600","#333"],colorValue:"",timeout:null}},props:["disabled"],inject:["selectedNode"],mixins:[P],methods:{getColor(){const e=this.selectedNode.obj,t=e.CL;this.colorValue=t},setColor(e){const t=this.selectedNode.loc,o=this.selectedNode.obj,s=o.CL;o.CL=e,te.emit("add-history",{loc:t,prop:"CL",before:s,after:e})}},watch:{colorValue(e){clearTimeout(this.timeout),this.colorValue=e.replace("#",""),this.timeout=setTimeout(()=>{this.setColor("#"+this.colorValue)},300)},disabled(e){e||this.getColor()}}};o("3e29");const Xo=H()(Qo,[["render",zo],["__scopeId","data-v-0a22116a"]]);var Yo=Xo;const Zo=e=>(Object(s["q"])("data-v-75915245"),e=e(),Object(s["p"])(),e),es={class:"table-setter fixed-component"},ts={class:"input-group"},os=Zo(()=>Object(s["g"])("i",{class:"hint material-icons"},"view_headline",-1)),ss={class:"input-group"},cs=Zo(()=>Object(s["g"])("i",{class:"hint material-icons"},"view_column",-1)),ns=Zo(()=>Object(s["g"])("i",{class:"material-icons"},"check",-1)),is=[ns],ls=Zo(()=>Object(s["g"])("i",{class:"material-icons"},"close",-1)),as=[ls];function ds(e,t,o,c,n,i){return Object(s["o"])(),Object(s["e"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",es,[Object(s["g"])("div",ts,[os,Object(s["B"])(Object(s["g"])("input",{class:"inputter",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[0]||(t[0]=e=>n.row=e)},null,512),[[s["x"],n.row]])]),Object(s["g"])("div",ss,[cs,Object(s["B"])(Object(s["g"])("input",{class:"inputter",type:"text",placeholder:" > 0 ",maxlength:"3","onUpdate:modelValue":t[1]||(t[1]=e=>n.col=e)},null,512),[[s["x"],n.col]])]),Object(s["g"])("div",{class:"closer",onClick:t[2]||(t[2]=(...e)=>i.tableSet&&i.tableSet(...e))},is),Object(s["g"])("div",{class:"closer",onClick:t[3]||(t[3]=t=>e.$emit("close","tableSetter"))},as)],512),[[s["y"],!o.disabled]])]),_:1})}var rs={data(){return{row:1,col:1,targetNode:null,targetNodeLoc:[],timeout:null}},props:["disabled"],mixins:[P],mounted(){const e={ROW:"row",COL:"col"};te.on("table-location",e=>{this.tableGet(e)}),te.on("table-edit",({historyObj:t,resultValue:o})=>{this.tableGet(t.loc);const s=e[t.prop];this[s]=t[o],this.tableSet(!1)})},methods:{eventListen(e){const t=e.key;"Enter"==t&&this.tableSet(!0)},tableGet(e){e&&(this.targetNodeLoc=e,this.getNodeObj({location:e,callback:(e,t)=>{this.targetNode=e[t]}})),this.row=this.targetNode.CTS.length,this.col=this.targetNode.CTS[0].length},tableSet(e){const t=this.targetNode.CTS.length,o=this.targetNode.CTS[0].length,s=Math.abs(this.row-t),c=Math.abs(this.col-o);if(this.col!=o)if(e&&te.emit("add-history",{loc:this.targetNodeLoc,prop:"COL",before:o,after:this.col}),this.col>o)for(let n of this.targetNode.CTS)for(let e=0;e<c;e++)n.push("");else for(let n of this.targetNode.CTS)for(let e=0;e<c;e++)n.pop();if(this.row!=t)if(e&&te.emit("add-history",{loc:this.targetNodeLoc.loc,prop:"ROW",before:t,after:this.row}),this.row>t){let e=[];for(let t=0;t<this.col;t++)e.push("");for(let t=0;t<s;t++)this.targetNode.CTS.push([...e])}else for(let n=0;n<s;n++)this.targetNode.CTS.pop()}},watch:{disabled(e){e?(this.targetNode=null,this.targetNodeLoc=[],removeEventListener("keydown",this.eventListen)):addEventListener("keydown",this.eventListen)},row(e){e<1?this.timeout=setTimeout(()=>{this.row=1},1e3):clearTimeout(this.timeout)},col(e){e<1?this.timeout=setTimeout(()=>{this.col=1},1e3):clearTimeout(this.timeout)}}};o("15cf");const bs=H()(rs,[["render",ds],["__scopeId","data-v-75915245"]]);var hs=bs;const us=e=>(Object(s["q"])("data-v-5fab3036"),e=e(),Object(s["p"])(),e),js={class:"history fixed-component"},Os=us(()=>Object(s["g"])("i",{class:"material-icons"},"undo",-1)),ps=[Os],fs=us(()=>Object(s["g"])("i",{class:"material-icons"},"redo",-1)),gs=[fs],ms=us(()=>Object(s["g"])("i",{class:"material-icons"},"menu",-1)),vs=[ms];function Ts(e,t,o,c,n,i){const l=Object(s["u"])("history-view"),a=Object(s["u"])("drawer");return Object(s["o"])(),Object(s["f"])(s["a"],null,[Object(s["j"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",js,[Object(s["g"])("div",{class:Object(s["m"])(["btn btn-shallow",{disabled:n.historyIndex==i.note.HT.length-1}]),onClick:t[0]||(t[0]=e=>i.doit("undo"))},ps,2),Object(s["g"])("div",{class:Object(s["m"])(["btn btn-shallow",{disabled:n.historyIndex<0}]),onClick:t[1]||(t[1]=e=>i.doit("redo"))},gs,2),Object(s["g"])("div",{class:Object(s["m"])(["btn btn-shallow",{disabled:!i.note.HT.length}]),onClick:t[2]||(t[2]=e=>n.drawerDisabled=!1)},vs,2)],512),[[s["y"],!o.disabled]])]),_:1}),Object(s["j"])(a,{title:"编辑历史",disabled:n.drawerDisabled,onCloseDrawer:t[3]||(t[3]=e=>n.drawerDisabled=!0)},{default:Object(s["A"])(()=>[Object(s["j"])(l,{list:i.note.HT,index:n.historyIndex},null,8,["list","index"])]),_:1},8,["disabled"])],64)}o("3c65");const Cs=e=>(Object(s["q"])("data-v-45d2a3a0"),e=e(),Object(s["p"])(),e),ks=Cs(()=>Object(s["g"])("span",{class:"history-prop"},"位置：",-1)),Ns={class:"loc"},ys=Cs(()=>Object(s["g"])("span",{class:"history-prop"},"属性：",-1)),ws={class:"prop"},xs=Cs(()=>Object(s["g"])("span",{class:"history-prop"},"改前：",-1)),Ms=["title"],Ls=Cs(()=>Object(s["g"])("span",{class:"history-prop"},"改后：",-1)),Ss=["title"],_s=["data-index"];function Ds(e,t,o,c,n,i){return Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.list,(e,o)=>(Object(s["o"])(),Object(s["f"])("div",{class:"history-block",key:e.id,ref_for:!0,ref:"historyBlock"},[Object(s["g"])("div",null,[ks,Object(s["g"])("span",Ns,Object(s["w"])(e.loc),1)]),Object(s["g"])("div",null,[ys,Object(s["g"])("span",ws,Object(s["w"])(n.propsDict[e.prop]),1)]),Object(s["B"])(Object(s["g"])("div",null,[xs,Object(s["g"])("span",{class:"text",title:e.before},Object(s["w"])(e.before),9,Ms)],512),[[s["y"],e.before]]),Object(s["B"])(Object(s["g"])("div",null,[Ls,Object(s["g"])("span",{class:"text",title:e.after},Object(s["w"])(e.after),9,Ss)],512),[[s["y"],e.after]]),Object(s["g"])("div",{class:"btn btn-shallow",onClick:t[0]||(t[0]=(...e)=>i.doSome&&i.doSome(...e))},[Object(s["g"])("i",{class:"material-icons","data-index":o},"check",8,_s)])]))),128)}var As={props:["list","index"],data(){return{propsDict:{CT:"内容",CL:"颜色",SUM:"题目",ROW:"行数",COL:"列数",IST:"插入",DEL:"删除"}}},methods:{doSome(e){const t=e.target,o=t.dataset["index"],s=this.$parent.$parent;s.doSome(o)}},watch:{index(e,t){const o=this.$el.parentNode,s=o.children[e],c=o.children[t];e>-1&&s.classList.add("selected"),t>-1&&c.classList.remove("selected")}}};o("9fa6");const $s=H()(As,[["render",Ds],["__scopeId","data-v-45d2a3a0"]]);var Is=$s,Bs={data(){return{drawerDisabled:!0,historyIndex:-1}},components:{Drawer:Zt,HistoryView:Is},props:["disabled"],inject:["note","selectedNode"],mixins:[P,J,z],methods:{doit(e){const t="undo"==e?++this.historyIndex:this.historyIndex--;let o=this.note.HT[t];const s="undo"==e?"before":"after";switch(o.prop){case"CT":case"CL":case"SUM":this.getNodeObj({location:o.loc,callback:(e,t)=>{const c=e[t];c[o.prop]=o[s]}});break;case"ROW":case"COL":te.emit("table-edit",{historyObj:o,resultValue:s});break;case"IST":{const e=o.loc,t=this.deleteNode(e);o.prop="DEL",o.loc[o.loc.length-1]-=1,o.nodeObj=t;break}case"DEL":{const e=o.nodeObj,t=o.loc;this.insertNode(e,t),o.prop="IST",o.loc[o.loc.length-1]+=1;break}}},doSome(e){const t=e-this.historyIndex,o=Math.abs(t);let s;if(t>0)s="undo";else{if(!(t<0))return;s="redo"}for(let c=0;c<o;c++)this.doit(s)}},mounted(){addEventListener("keydown",e=>{const t=e.altKey,o=e.key;t&&"z"==o&&this.doit("undo")}),addEventListener("keydown",e=>{const t=e.altKey,o=e.key;t&&"y"==o&&this.doit("redo")}),te.on("add-history",e=>{const t=this.note.HT;if(20==t.length&&t.pop(),this.historyIndex<0)t.unshift(e);else{const o=this.historyIndex+1;t.splice(0,o),t.unshift(e),this.historyIndex=-1}}),te.on("clear-history",()=>{this.historyIndex=-1})}};o("c5a9");const Es=H()(Bs,[["render",Ts],["__scopeId","data-v-5fab3036"]]);var Fs=Es,Hs={data(){return{textfieldGroupDisabled:!0,colorsDisabled:!0,tableSetterDisabled:!0,historyDisabled:!1}},components:{TextfieldGroupFixed:Ro,Colors:Yo,TableSetter:hs,History:Fs},methods:{open(e){this.closeAll(),this[e+"Disabled"]=!1},close(e){this[e+"Disabled"]=!0,this.historyDisabled=!1},closeAll(){this.colorsDisabled=!0,this.textfieldGroupDisabled=!0,this.tableSetterDisabled=!0,this.historyDisabled=!0}},mounted(){te.on("fixedComponents-open",this.open),te.on("textfield-open",()=>{this.open("textfieldGroup")}),te.on("fixedComponents-close",()=>{this.closeAll(),this.historyDisabled=!1})}};o("4a16");const Us=H()(Hs,[["render",go],["__scopeId","data-v-ab5781fc"]]);var Vs=Us;const Rs={class:"msgbar-outer"};function Gs(e,t,o,c,n,i){return Object(s["o"])(),Object(s["e"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",Rs,[Object(s["g"])("div",{class:Object(s["m"])(["msgbar",{active:n.active}]),onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e))},Object(s["w"])(n.msg),3)],512),[[s["y"],n.active]])]),_:1})}var Ks={data(){return{active:!1,msg:""}},methods:{close(){this.active=!1}},mounted(){te.on("show-msg",e=>{this.msg=e,this.active=!0})},watch:{active(e){e&&setTimeout(()=>{this.close()},3e3)}}};o("e8e8");const qs=H()(Ks,[["render",Gs]]);var Ws=qs,Ps={NM:"Example",HT:[],CTS:[{NT:"h",CT:"这是一个大标题",CL:"#333"},{NT:"hr"},{NT:"p",CT:"这是一个段落",CL:"#333"},{NT:"p",CT:"内联样式实例（均使用英文符号）：##粗体## ``代码`` __下划线__ //斜体// --删除-- ::淡化::",CL:"#333"},{NT:"link",CT:"一个链接",HF:"https://www.bing.com",CL:"#333"},{NT:"floor",CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333"},{NT:"p",CT:"这是一个段落",CL:"#333"},{NT:"floor",CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333"},{NT:"p",CT:"这是一个段落",CL:"#333"}]}]},{NT:"list",OL:!0,CTS:[{NT:"li",CT:"这是一个列表项",CL:"#333"},{NT:"li",CT:"这是一个列表项",CL:"#333"},{NT:"list",OL:!1,CTS:[{NT:"li",CT:"嵌套列表内的列表项",CL:"#333"},{NT:"li",CT:"嵌套列表内的列表项",CL:"#333"}]}]},{NT:"table",CTS:[["表格项","表格项","表格项","表格项"],["表格项","表格项","表格项","表格项"]]},{NT:"details",SUM:"这是一个详情块",CTS:[{CT:"这是一个段落",CL:"#333"},{CT:"这是一个段落",CL:"#333"}]},{NT:"code",LG:"javascript",CT:"console.log('Hello World')\nalert('Hello World')"}]},Js={name:"App",components:{Anchors:oo,Msgbar:Ws,Note:qt,ToolBar:ie,ControlBalls:fo,FixedComponents:Vs},data(){return{windowDisabled:!1,note:Ps,selectedNode:{loc:null,obj:null,vnode:null,type:null},isDarkMode:!1,isTouchMode:!1,isFullscreen:!1}},provide(){return{note:this.note,selectedNode:this.selectedNode,isTouchMode:Object(s["c"])(()=>this.isTouchMode)}},mounted(){this.$nextTick(()=>{const e=()=>{const e=document.querySelector("#meta-viewport");let t;window&&(t=window.outerHeight);const o=`width=device-width,height=${t},initial-scale=1.0`;e.setAttribute("content",o)};e(),addEventListener("orientationchange",()=>{e()})})}};o("5113");const zs=H()(Js,[["render",c]]);var Qs=zs;o("2c43"),o("5143"),o("8f09"),o("38b9"),o("afd3"),o("86be"),o("61fd"),o("8d2a"),o("cde1"),o("584d");const Xs=Object(s["d"])(Qs);Xs.use(ft["a"]),Xs.config.unwrapInjectedRef=!0,Xs.mount("#app")},"584d":function(e,t,o){},"61fd":function(e,t,o){},6266:function(e,t,o){},6377:function(e,t,o){},"6d2d":function(e,t,o){},"73cc":function(e,t,o){},"83d0":function(e,t,o){"use strict";o("73cc")},"86be":function(e,t,o){},8897:function(e,t,o){"use strict";o("ad76")},"8a36":function(e,t,o){"use strict";o("4e36")},"8c71":function(e,t,o){},"8d2a":function(e,t,o){},"8f09":function(e,t,o){},"9fa6":function(e,t,o){"use strict";o("39de")},a306:function(e,t,o){},a55b:function(e,t,o){},ab97:function(e,t,o){"use strict";o("42ed")},ad76:function(e,t,o){},aee9:function(e,t,o){"use strict";o("6266")},afd3:function(e,t,o){},bde3:function(e,t,o){"use strict";o("e4e5")},c436:function(e,t,o){"use strict";o("d6c2")},c5a9:function(e,t,o){"use strict";o("475b")},cde1:function(e,t,o){},cee2:function(e,t,o){},d6c2:function(e,t,o){},da3e:function(e,t,o){},e4e5:function(e,t,o){},e8e8:function(e,t,o){"use strict";o("a55b")}});
//# sourceMappingURL=app.0e769d8a.js.map