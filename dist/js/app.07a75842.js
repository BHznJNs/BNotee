(function(e){function t(t){for(var o,i,s=t[0],r=t[1],a=t[2],u=0,b=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&b.push(c[i][0]),c[i]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);d&&d(t);while(b.length)b.shift()();return l.push.apply(l,a||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],o=!0,s=1;s<n.length;s++){var r=n[s];0!==c[r]&&(o=!1)}o&&(l.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},c={app:0},l=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var d=r;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"063e":function(e,t,n){},"0fb1":function(e,t,n){"use strict";n("6eff")},"2ffc":function(e,t,n){"use strict";n("b3dd")},"38b9":function(e,t,n){},4068:function(e,t,n){},4849:function(e,t,n){"use strict";n("4068")},"4f91":function(e,t,n){"use strict";n("063e")},5143:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,l,i){var s=Object(o["p"])("tool-bar"),r=Object(o["p"])("control-balls"),a=Object(o["p"])("note"),d=Object(o["p"])("textfield-group-fixed"),u=Object(o["p"])("colors");return Object(o["l"])(),Object(o["d"])(o["a"],null,[Object(o["e"])("div",{class:Object(o["j"])(["dark-filter",{darken:l.isDarkMode}])},null,2),Object(o["h"])(s),Object(o["h"])(r,{isDarkMode:l.isDarkMode,isTouchMode:l.isTouchMode,isFullscreen:l.isFullscreen,onToggleDarkMode:i.toggleDarkMode,onToggleFullscreen:i.toggleFullscreen},null,8,["isDarkMode","isTouchMode","isFullscreen","onToggleDarkMode","onToggleFullscreen"]),Object(o["h"])(a,{isFullscreen:l.isFullscreen},null,8,["isFullscreen"]),Object(o["h"])(d),Object(o["h"])(u)],64)}n("caad");var l=function(e){return Object(o["n"])("data-v-8face3b4"),e=e(),Object(o["m"])(),e},i={class:"toolbar shadow-3"},s=l((function(){return Object(o["e"])("i",{class:"logo material-icons shadow-2"},"format_list_bulleted",-1)})),r={class:"tools"},a=l((function(){return Object(o["e"])("i",{class:"material-icons"},"add",-1)})),d=[a],u=l((function(){return Object(o["e"])("i",{class:"material-icons"},"remove",-1)})),b=[u],f=l((function(){return Object(o["e"])("i",{class:"material-icons"},"grid_on",-1)})),p=[f],j=l((function(){return Object(o["e"])("i",{class:"material-icons"},"color_lens",-1)})),O=[j],h=l((function(){return Object(o["e"])("i",{class:"material-icons"},"clear_all",-1)})),v=[h],m=l((function(){return Object(o["e"])("i",{class:"material-icons"},"vertical_align_bottom",-1)})),T=[m],N=l((function(){return Object(o["e"])("i",{class:"material-icons file"},[Object(o["g"])("input "),Object(o["e"])("input",{id:"file-uploader",type:"file",accept:"application/json"})],-1)})),C=[N];function g(e,t,n,c,l,a){var u=this,f=Object(o["p"])("table-setter");return Object(o["l"])(),Object(o["d"])("div",i,[s,Object(o["e"])("div",r,[Object(o["e"])("div",{class:Object(o["j"])(["tool btn btn-shallow",{disabled:!a.selectedNode.location}]),onClick:t[0]||(t[0]=function(){return a.openTextfield&&a.openTextfield.apply(a,arguments)})},d,2),Object(o["e"])("div",{class:Object(o["j"])(["tool btn btn-shallow",{disabled:!a.selectedNode.location||"td"==a.selectedNode.tagName}]),onClick:t[1]||(t[1]=function(){return a.deleteNode&&a.deleteNode.apply(a,arguments)})},b,2),Object(o["e"])("div",{class:Object(o["j"])(["tool btn btn-shallow",{disabled:"table"!=a.selectedNode.type}]),onClick:t[2]||(t[2]=function(){return a.tableSetOpen&&a.tableSetOpen.apply(a,arguments)})},p,2),Object(o["h"])(f,{show:l.tableSetter,onTableSetterClose:t[3]||(t[3]=function(){u.tableSetter=!1})},null,8,["show"]),Object(o["e"])("div",{class:Object(o["j"])(["tool btn btn-shallow",{disabled:!["basic-node","list-item"].includes(a.selectedNode.type)}]),onClick:t[4]||(t[4]=function(){return a.colorsOpen&&a.colorsOpen.apply(a,arguments)})},O,2),Object(o["e"])("div",{class:"tool btn btn-shallow",onClick:t[5]||(t[5]=function(){return a.clearNodes&&a.clearNodes.apply(a,arguments)})},v),Object(o["e"])("div",{class:"tool btn btn-shallow",onClick:t[6]||(t[6]=function(){return a.saveNote&&a.saveNote.apply(a,arguments)})},T),Object(o["e"])("div",{class:"tool btn btn-shallow",onClick:t[7]||(t[7]=function(){return a.readNote&&a.readNote.apply(a,arguments)})},C)])])}n("a434"),n("e9c4");var k=function(e){return Object(o["n"])("data-v-61cfbf3a"),e=e(),Object(o["m"])(),e},S={class:"input-group"},y=k((function(){return Object(o["e"])("i",{class:"hint material-icons"},"view_headline",-1)})),L={class:"input-group"},x=k((function(){return Object(o["e"])("i",{class:"hint material-icons"},"view_column",-1)})),M=k((function(){return Object(o["e"])("i",{class:"material-icons"},"close",-1)})),w=[M];function F(e,t,n,c,l,i){return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["table-setter fixed-component",{disabled:!n.show}])},[Object(o["e"])("div",S,[y,Object(o["t"])(Object(o["e"])("input",{class:"inputer",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.row=e})},null,512),[[o["q"],l.row]])]),Object(o["e"])("div",L,[x,Object(o["t"])(Object(o["e"])("input",{class:"inputer",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[1]||(t[1]=function(e){return l.col=e})},null,512),[[o["q"],l.col]])]),Object(o["e"])("div",{class:"closer",onClick:t[2]||(t[2]=function(){return i.close&&i.close.apply(i,arguments)})},w)],2)}var _=n("1344"),D=new _["a"],A={props:["show"],inject:["selectedNode"],data:function(){return{row:1,col:1}},methods:{tableSet:function(){},close:function(){this.$emit("tableSetterClose"),D.emit("tableSetter-close")}}},$=(n("8d56"),n("6b0d")),I=n.n($);const B=I()(A,[["render",F],["__scopeId","data-v-61cfbf3a"]]);var E=B,P={computed:{getThisObj:function(){var e;if(this.location)return this.getNodeObj({location:this.location,callback:function(t,n){e=t[n]}}),e}},methods:{getNodeObj:function(e){var t=e.parentObj,n=void 0===t?this.note:t,o=e.location,c=e.num,l=void 0===c?0:c,i=e.callback;l==o.length-1?i&&i(n.CTS,o[l]):this.getNodeObj({parentObj:n.CTS[o[l]],location:o,num:l+1,callback:i})}}};const V=P;var q=V,J=n("21a6"),R=n.n(J),U={data:function(){return{tableSetter:!1}},components:{TableSetter:E},inject:["note","selectedNode"],mixins:[q],mounted:function(){var e=this,t=document.querySelector("#file-uploader");t.addEventListener("change",(function(){var n=new FileReader;n.readAsText(t.files[0],"uft8"),n.onload=function(t){var n=t.target.result;e.note.CTS=JSON.parse(n)}})),D.on("textfield-return-toolBar",(function(t){e.insertNode(t)}))},methods:{insertNode:function(e){if(e){var t=this.selectedNode.location;t&&this.getNodeObj({location:t,callback:function(t,n){t.splice(n+1,0,e)}})}},deleteNode:function(){var e=this.selectedNode.location;this.selectedNode.location=null,this.selectedNode.type=null,this.selectedNode.tagName=null,this.getNodeObj({location:e,callback:function(e,t){e.splice(t,1)}})},tableSetOpen:function(){this.tableSetter=!0,D.emit("note-offset")},colorsOpen:function(){D.emit("colors-open")},clearNodes:function(){this.note.CTS=[]},saveNote:function(){var e=new Blob([JSON.stringify(this.note.CTS)],{type:"text/plain;charset=utf-8"});R()(e,"myNote.json")},readNote:function(){var e=document.querySelector("#file-uploader");e.click()},openTextfield:function(){D.emit("textfield-open","toolBar")}}};n("2ffc");const G=I()(U,[["render",g],["__scopeId","data-v-8face3b4"]]);var K=G,z=function(e){return Object(o["n"])("data-v-c1e46584"),e=e(),Object(o["m"])(),e},H=z((function(){return Object(o["e"])("div",{class:"block"},[Object(o["e"])("div",{class:"mask"}),Object(o["e"])("i",{class:"material-icons"},"apps")],-1)})),Q={class:"material-icons"},W={class:"material-icons"},X=z((function(){return Object(o["e"])("div",{class:"ball shadow-1"},[Object(o["e"])("i",{class:"material-icons"},"touch_app")],-1)})),Y={class:"material-icons"},Z={class:"material-icons"};function ee(e,t,n,c,l,i){return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["controlballs",{fullscreen:n.isFullscreen}])},[H,Object(o["e"])("div",{class:"ball shadow-1",onClick:t[0]||(t[0]=function(){return i.toggleDarkMode&&i.toggleDarkMode.apply(i,arguments)})},[Object(o["t"])(Object(o["e"])("i",Q,"brightness_2",512),[[o["r"],!n.isDarkMode]]),Object(o["t"])(Object(o["e"])("i",W,"wb_sunny",512),[[o["r"],n.isDarkMode]])]),X,Object(o["e"])("div",{class:"ball shadow-1",onClick:t[1]||(t[1]=function(){return i.toggleFullscreen&&i.toggleFullscreen.apply(i,arguments)})},[Object(o["t"])(Object(o["e"])("i",Y,"fullscreen",512),[[o["r"],!n.isFullscreen]]),Object(o["t"])(Object(o["e"])("i",Z,"fullscreen_exit",512),[[o["r"],n.isFullscreen]])])],2)}var te={props:["isDarkMode","isTouchMode","isFullscreen"],methods:{toggleDarkMode:function(){this.$emit("toggleDarkMode")},toggleFullscreen:function(){this.$emit("toggleFullscreen")}}};n("4f91");const ne=I()(te,[["render",ee],["__scopeId","data-v-c1e46584"]]);var oe=ne,ce=function(e){return Object(o["n"])("data-v-535a4233"),e=e(),Object(o["m"])(),e},le=ce((function(){return Object(o["e"])("div",{class:"mask"},null,-1)})),ie=ce((function(){return Object(o["e"])("i",{class:"material-icons"},"add",-1)})),se=[ie];function re(e,t,n,c,l,i){var s=Object(o["p"])("floor-block"),r=Object(o["p"])("node-renderer"),a=Object(o["p"])("textfield-group");return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["note-outer shadow-3",{offset:l.offset,fullscreen:n.isFullscreen}])},[Object(o["e"])("div",{class:"note",ref:"note",onContextmenu:t[1]||(t[1]=Object(o["u"])((function(){}),["prevent"]))},[(Object(o["l"])(!0),Object(o["d"])(o["a"],null,Object(o["o"])(i.note.CTS,(function(e,t){return Object(o["l"])(),Object(o["d"])(o["a"],{key:e.id},["floor"==e.NT?(Object(o["l"])(),Object(o["c"])(s,{key:0,selected:e.SL,children:e.CTS,level:2,location:[t]},null,8,["selected","children","location"])):(Object(o["l"])(),Object(o["c"])(r,{key:1,nodeObj:e,index:t,level:1,location:[]},null,8,["nodeObj","index"]))],64)})),128)),le,Object(o["h"])(a,{ref:"textfield",isAdding:l.isNodeAdding,onToParent:i.closeNodeAdder},null,8,["isAdding","onToParent"]),Object(o["e"])("div",{class:Object(o["j"])(["btn btn-normal adder-btn",{disabled:l.isNodeAdding}]),onClick:t[0]||(t[0]=function(){return i.openNodeAdder&&i.openNodeAdder.apply(i,arguments)})},se,2)],544)],2)}n("99af");var ae=Object(o["e"])("div",{class:"mask"},null,-1);function de(e,t,n,c,l,i){var s=Object(o["p"])("floor-block",!0),r=Object(o["p"])("node-renderer"),a=Object(o["p"])("block-controls");return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["floor shadow-2",{"shadow-6":n.selected}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[ae,(Object(o["l"])(!0),Object(o["d"])(o["a"],null,Object(o["o"])(n.children,(function(t,c){return Object(o["l"])(),Object(o["d"])(o["a"],{key:t.id},["floor"==t.NT?(Object(o["l"])(),Object(o["c"])(s,{key:0,children:t.CTS,selected:t.SL,level:n.level+1,location:n.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["children","selected","level","location","onMouseInChild"])):(Object(o["l"])(),Object(o["c"])(r,{key:1,nodeObj:t,index:c,level:n.level,location:n.location},null,8,["nodeObj","index","level","location"]))],64)})),128)),Object(o["h"])(a,{disabled:!e.hover,selected:n.selected,location:n.location,parentType:"floor"},null,8,["disabled","selected","location"])],34)}function ue(e,t,n,c,l,i){var s=Object(o["p"])("list-block"),r=Object(o["p"])("table-block"),a=Object(o["p"])("basic-node");return"list"==n.nodeObj.NT?(Object(o["l"])(),Object(o["c"])(s,{key:0,isOrdered:n.nodeObj.OL,selected:n.nodeObj.SL,children:n.nodeObj.CTS,location:n.location.concat([n.index])},null,8,["isOrdered","selected","children","location"])):"table"==n.nodeObj.NT?(Object(o["l"])(),Object(o["c"])(r,{key:1,selected:n.nodeObj.SL,children:n.nodeObj.CTS,location:n.location.concat([n.index])},null,8,["selected","children","location"])):(Object(o["l"])(),Object(o["c"])(a,{key:2,tagName:"h"==n.nodeObj.NT?n.nodeObj.NT+n.level:n.nodeObj.NT,content:n.nodeObj.CT,color:n.nodeObj.CL,selected:n.nodeObj.SL,location:n.location.concat([n.index])},null,8,["tagName","content","color","selected","location"]))}var be={data:function(){return{initialContent:this.content,editing:!1}},inject:["note","selectedNode"],props:["tagName","content","location","selected","color"],mixins:[q],computed:{fontColor:function(){return this.color?this.color:"#333"}},methods:{selectEvent:function(){this.selected?(D.emit("textfield-close"),D.emit("colors-close"),this.selectedNode.location=null,this.selectedNode.type=null,this.selectedNode.tagName=null,this.getThisObj.SL=!1):(this.selectedNode.location&&this.getNodeObj({location:this.selectedNode.location,callback:function(e,t){e[t].SL=!1}}),this.selectedNode.location=this.location,this.selectedNode.type="basic-node",this.selectedNode.tagName=this.tagName,this.getThisObj.SL=!0)}},render:function(){var e=this;return Object(o["i"])(this.tagName,{contentEditable:"hr"!=this.tagName,class:{selected:this.selected,editing:this.editing,empty:!this.content},style:{color:this.fontColor},onContextmenu:function(t){t.preventDefault(),e.selectEvent()},onClick:function(t){e.initialContent=t.target.innerText,e.editing=!0},onchange:function(){console.log("changed")},onBlur:function(t){var n=t.target.innerText;n!=e.initialContent&&(e.getThisObj.CT=n),e.editing=!1}},this.content)}};const fe=be;var pe=fe,je=Object(o["e"])("div",{class:"mask"},null,-1);function Oe(e,t,n,c,l,i){var s=Object(o["p"])("list-block",!0),r=Object(o["p"])("basic-node"),a=Object(o["p"])("list-child"),d=Object(o["p"])("block-controls");return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["list",{"shadow-6":n.selected,hover:e.hover&&!n.selected,empty:!n.children.length}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[je,Object(o["h"])(a,{ordered:n.isOrdered},{default:Object(o["s"])((function(){return[(Object(o["l"])(!0),Object(o["d"])(o["a"],null,Object(o["o"])(n.children,(function(t,c){return Object(o["l"])(),Object(o["d"])(o["a"],{key:t.id},["list"==t.NT?(Object(o["l"])(),Object(o["c"])(s,{key:0,isOrdered:t.OL,selected:t.SL,children:t.CTS,location:n.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["isOrdered","selected","children","location","onMouseInChild"])):(Object(o["l"])(),Object(o["c"])(r,{key:1,tagName:"h"==t.NT?"h4":t.NT,content:t.CT,color:t.CL,selected:t.SL,location:n.location.concat([c])},null,8,["tagName","content","color","selected","location"]))],64)})),128))]})),_:1},8,["ordered"]),Object(o["h"])(d,{disabled:!e.hover,selected:n.selected,location:n.location,parentType:"list"},null,8,["disabled","selected","location"])],34)}var he=function(e){return Object(o["n"])("data-v-4bd1388a"),e=e(),Object(o["m"])(),e},ve=he((function(){return Object(o["e"])("i",{class:"material-icons"},"add",-1)})),me=[ve],Te={class:"checkbox"},Ne=["checked"],Ce=he((function(){return Object(o["e"])("i",{class:"checkbox-icon"},null,-1)}));function ge(e,t,n,c,l,i){return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["controls",{disabled:n.disabled}])},[Object(o["e"])("div",{class:"btn btn-normal adder-btn",onClick:t[0]||(t[0]=function(){return i.addNode&&i.addNode.apply(i,arguments)})},me),Object(o["e"])("label",Te,[Object(o["e"])("input",{type:"checkbox",ref:"checkbox",checked:n.selected,onChange:t[1]||(t[1]=function(){return i.selectEvent&&i.selectEvent.apply(i,arguments)})},null,40,Ne),Ce])],2)}var ke={props:["disabled","selected","location","parentType"],inject:["note","selectedNode"],mixins:[q],methods:{selectEvent:function(){var e=this.$refs.checkbox.checked;this.getThisObj.SL=e,e?(this.selectedNode.location&&this.getNodeObj({location:this.selectedNode.location,callback:function(e,t){e[t].SL=!1}}),this.selectedNode.location=this.location,this.selectedNode.type=this.parentType):(this.selectedNode.location=null,this.selectedNode.type=null)},addNode:function(){var e=this;"table"==this.parentType?this.getThisObj.CTS.push({CTS:[{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null}]}):(D.emit("textfield-open",this.parentType),D.on("textfield-return-"+this.parentType,(function(t){t&&e.getThisObj.CTS.push(t),D.off("textfield-return-"+e.parentType)})))}}};n("75e2");const Se=I()(ke,[["render",ge],["__scopeId","data-v-4bd1388a"]]);var ye=Se,Le={data:function(){return{hover:!1,setTimeout:null}},methods:{onMouseEnter:function(){var e=this;this.setTimeout=setTimeout((function(){e.hover=!0}),400),this.location.length>1&&this.$emit("mouse-in-child")},onMouseLeave:function(){clearTimeout(this.setTimeout),this.selected||(this.hover=!1)}}};const xe=Le;var Me=xe,we={name:"list-block",components:{BasicNode:pe,BlockControls:ye,listChild:{props:["ordered"],render:function(){return Object(o["i"])(this.ordered?"ol":"ul",this.$slots.default())}}},props:["children","isOrdered","location","selected"],mixins:[Me]};const Fe=I()(we,[["render",Oe]]);var _e=Fe,De=function(e){return Object(o["n"])("data-v-b77be298"),e=e(),Object(o["m"])(),e},Ae=De((function(){return Object(o["e"])("div",{class:"mask"},null,-1)}));function $e(e,t,n,c,l,i){var s=Object(o["p"])("table-row"),r=Object(o["p"])("block-controls");return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["table shadow-2",{"shadow-6":n.selected,hover:e.hover}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[Ae,Object(o["e"])("table",null,[Object(o["e"])("tbody",null,[(Object(o["l"])(!0),Object(o["d"])(o["a"],null,Object(o["o"])(n.children,(function(e,t){return Object(o["l"])(),Object(o["c"])(s,{key:e.id,children:e.CTS,location:n.location.concat([t])},null,8,["children","location"])})),128))])]),Object(o["h"])(r,{class:Object(o["j"])({"controls-margin":e.hover}),disabled:!e.hover,selected:n.selected,location:n.location,parentType:"table"},null,8,["class","disabled","selected","location"])],34)}var Ie={props:["selected","children","location"],mixins:[Me],components:{BlockControls:ye,tableRow:{components:{BasicNode:pe},props:["children","location"],render:function(){var e=[];for(var t in this.children){var n=this.children[t];e.push(Object(o["i"])(pe,{tagName:"td",content:n.CT,color:n.CL,selected:n.SL,location:this.location.concat([t])}))}return Object(o["i"])("tr",e)}}}};n("c644");const Be=I()(Ie,[["render",$e],["__scopeId","data-v-b77be298"]]);var Ee=Be,Pe={components:{BasicNode:pe,ListBlock:_e,TableBlock:Ee},props:["nodeObj","index","location","level"]};const Ve=I()(Pe,[["render",ue]]);var qe=Ve,Je={name:"floor-block",components:{BlockControls:ye,NodeRenderer:qe},props:["level","location","children","selected"],mixins:[Me]};const Re=I()(Je,[["render",de]]);var Ue=Re,Ge={class:"selector",ref:"selector"},Ke=Object(o["f"])('<option value="h">标题</option><option value="p">段落</option><option value="hr">割线</option><option value="floor">层次</option><option value="ol">序列</option><option value="ul">乱列</option><option value="table">表格</option>',7),ze=[Ke],He={class:"textfield",contenteditable:"true",ref:"inputter"},Qe=Object(o["e"])("i",{class:"material-icons"},"close",-1),We=[Qe];function Xe(e,t,n,c,l,i){return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["textfield-group shadow-2",{disabled:!n.isAdding}])},[Object(o["e"])("select",Ge,ze,512),Object(o["e"])("div",He,null,512),Object(o["e"])("div",{class:"textfield-closer closer",onClick:t[0]||(t[0]=function(e){return i.closeNodeAdder()})},We)],2)}var Ye={methods:{returnObj:function(e,t){if("/"==t)return null;var n={NT:e,SL:!1};switch(e){case"h":case"p":case"li":n.CT=t,n.CL=null;break;case"hr":break;case"floor":n.CTS=[],t&&n.CTS.push({NT:"h",CT:t,CL:null,SL:!1});break;case"ol":n.NT="list",n.CTS=[],n.OL=!0;break;case"ul":n.NT="list",n.CTS=[],n.OL=!1;break;case"table":n.CO=4,n.CTS=[{CTS:[{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null}]}];break}return n}}};const Ze=Ye;var et=Ze,tt={props:["isAdding"],mixins:[et],methods:{focus:function(){var e=this.$refs.inputter;e.focus()},closeNodeAdder:function(){var e=this.$refs.selector,t=this.$refs.inputter,n=e.value,o=t.innerText,c=this.returnObj(n,o);this.$emit("toParent",c),t.blur(),t.innerText=""}}};const nt=I()(tt,[["render",Xe]]);var ot=nt,ct={components:{FloorBlock:Ue,NodeRenderer:qe,TextfieldGroup:ot},data:function(){return{isNodeAdding:!1,offset:!1}},props:["isFullscreen"],inject:["note"],created:function(){var e=this;addEventListener("keydown",(function(t){var n=t.altKey,o=t.key;n&&"a"==o&&(t.preventDefault(),e.openNodeAdder())}))},mounted:function(){var e=this;D.on("note-offset",(function(){e.offset=!0})),D.on("tableSetter-close",(function(){e.offset=!1})),D.on("colors-close",(function(){e.offset=!1})),D.on("textfield-return",(function(){e.offset=!1}))},methods:{openNodeAdder:function(){this.isNodeAdding=!0,this.$refs.textfield.focus()},closeNodeAdder:function(e){this.isNodeAdding=!1,console.log(e),e&&this.note.CTS.push(e)}},watch:{isFullscreen:function(e,t){var n=this;e!=t&&(this.$refs.note.style.display="none",setTimeout((function(){n.$refs.note.style.display="block"}),1200))}}};n("7670");const lt=I()(ct,[["render",re],["__scopeId","data-v-535a4233"]]);var it=lt,st={class:"selector",ref:"selector"},rt=Object(o["e"])("option",{value:"h"},"标题",-1),at={value:"p"},dt=Object(o["e"])("option",{value:"hr"},"割线",-1),ut={value:"floor"},bt=Object(o["e"])("option",{value:"ol"},"序列",-1),ft=Object(o["e"])("option",{value:"ul"},"乱列",-1),pt={value:"li"},jt=Object(o["e"])("option",{value:"table"},"表格",-1),Ot={class:"textfield",contenteditable:"true",ref:"inputter"},ht=Object(o["e"])("i",{class:"material-icons"},"close",-1),vt=[ht];function mt(e,t,n,c,l,i){return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["textfield-group fixed-component fixed",{disabled:!l.isInputting}])},[Object(o["e"])("select",st,[rt,Object(o["t"])(Object(o["e"])("option",at,"段落",512),[[o["r"],"list"!=l.commandFrom&&"li"!=i.selectedNode.tagName]]),dt,Object(o["t"])(Object(o["e"])("option",ut,"层次",512),[[o["r"],"list"!=l.commandFrom&&"li"!=i.selectedNode.tagName]]),bt,ft,Object(o["t"])(Object(o["e"])("option",pt,"列项",512),[[o["r"],"list"==l.commandFrom||"li"==i.selectedNode.tagName]]),jt],512),Object(o["e"])("div",Ot,null,512),Object(o["e"])("div",{class:"textfield-closer closer",onClick:t[0]||(t[0]=function(){return i.closeTextfield&&i.closeTextfield.apply(i,arguments)})},vt)],2)}var Tt={data:function(){return{isInputting:!1,commandFrom:""}},inject:["selectedNode"],mixins:[et],mounted:function(){var e=this;D.on("textfield-open",(function(t){e.commandFrom=t,e.isInputting=!0,e.$refs.inputter.focus(),D.emit("note-offset")})),D.on("textfield-close",this.close),D.on("colors-open",this.close)},methods:{close:function(){this.isInputting=!1,D.emit("textfield-return")},closeTextfield:function(){this.isInputting=!1;var e=this.$refs.selector.value,t=this.$refs.inputter.innerText,n=this.returnObj(e,t);D.emit("textfield-return-"+this.commandFrom,n),D.emit("textfield-return"),this.$refs.inputter.blur(),this.$refs.inputter.innerText=""}}};const Nt=I()(Tt,[["render",mt]]);var Ct=Nt,gt=function(e){return Object(o["n"])("data-v-6cc46ba9"),e=e(),Object(o["m"])(),e},kt=["onClick"],St={class:"input-group"},yt=gt((function(){return Object(o["e"])("div",{class:"hint"},"#",-1)})),Lt=gt((function(){return Object(o["e"])("i",{class:"material-icons"},"close",-1)})),xt=[Lt];function Mt(e,t,n,c,l,i){return Object(o["l"])(),Object(o["d"])("div",{class:Object(o["j"])(["colors fixed-component",{disabled:l.disabled}])},[(Object(o["l"])(!0),Object(o["d"])(o["a"],null,Object(o["o"])(l.colors,(function(e){return Object(o["l"])(),Object(o["d"])("div",{key:e.id,class:"color btn btn-shallow",style:Object(o["k"])({"background-color":e}),onClick:function(t){return i.setColor(e)}},null,12,kt)})),128)),Object(o["e"])("div",St,[yt,Object(o["t"])(Object(o["e"])("input",{class:"inputer",placeholder:"******",type:"text",maxlength:"8","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.colorValue=e})},null,512),[[o["q"],l.colorValue]])]),Object(o["e"])("div",{class:"closer",onClick:t[1]||(t[1]=function(){return i.close&&i.close.apply(i,arguments)})},xt)],2)}var wt={data:function(){return{disabled:!0,colors:["#D50000","#FFD600","#333"],colorValue:"",timeout:null,targetNode:null}},inject:["selectedNode","note"],mixins:[q],mounted:function(){var e=this;D.on("colors-open",(function(){D.emit("note-offset"),e.disabled=!1,e.getNodeObj({location:e.selectedNode.location,callback:function(t,n){e.targetNode=t[n]}})})),D.on("colors-close",(function(){e.disabled=!0,e.targetNode=null})),D.on("textfield-open",(function(){e.disabled=!0}))},methods:{setColor:function(e){this.targetNode.CL=e},close:function(){D.emit("colors-close")}},watch:{colorValue:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.setColor("#"+e)}),600)}}};n("4849");const Ft=I()(wt,[["render",Mt],["__scopeId","data-v-6cc46ba9"]]);var _t=Ft,Dt={CTS:[{NT:"h",CT:"这是一个大标题",CL:null,SL:!1},{NT:"hr",SL:!1},{NT:"p",CT:"这是一个段落",CL:null,SL:!1},{NT:"floor",SL:!1,CTS:[{NT:"h",CT:"这是层次中的大标题",CL:null,SL:!1},{NT:"p",CT:"这是一个段落",CL:null,SL:!1},{NT:"floor",SL:!1,CTS:[{NT:"h",CT:"这是层次中的大标题",CL:null,SL:!1},{NT:"p",CT:"这是一个段落",CL:null,SL:!1}]}]},{NT:"list",OL:!0,SL:!1,CTS:[{NT:"li",CT:"这是一个列表项",CL:null,SL:!1}]},{NT:"table",SL:!1,CO:4,CTS:[{CTS:[{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null}]},{CTS:[{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null},{NT:"td",CT:"表格项",SL:!1,CL:null}]}]}]},At={name:"App",components:{Note:it,ControlBalls:oe,ToolBar:K,Colors:_t,TextfieldGroupFixed:Ct},data:function(){return{note:Dt,selectedNode:{location:null,type:null,tagName:null},isDarkMode:!1,isTouchMode:!1,isFullscreen:!1}},provide:function(){return{note:this.note,selectedNode:this.selectedNode}},methods:{toggleDarkMode:function(){this.isDarkMode=!this.isDarkMode},toggleFullscreen:function(){this.isFullscreen=!this.isFullscreen}}};n("0fb1");const $t=I()(At,[["render",c]]);var It=$t,Bt=(n("5143"),n("38b9"),n("86be"),n("61fd"),n("8d2a"),n("cde1"),Object(o["b"])(It));Bt.mount("#app")},"61fd":function(e,t,n){},"6eff":function(e,t,n){},"75e2":function(e,t,n){"use strict";n("81e3")},7670:function(e,t,n){"use strict";n("bc21")},"81e3":function(e,t,n){},"86be":function(e,t,n){},"8d2a":function(e,t,n){},"8d56":function(e,t,n){"use strict";n("9706")},9706:function(e,t,n){},b3dd:function(e,t,n){},bc21:function(e,t,n){},c644:function(e,t,n){"use strict";n("d3a7")},cde1:function(e,t,n){},d3a7:function(e,t,n){}});
//# sourceMappingURL=app.07a75842.js.map