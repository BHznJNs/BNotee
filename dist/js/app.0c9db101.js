(function(e){function t(t){for(var o,r,a=t[0],d=t[1],l=t[2],s=0,f=[];s<a.length;s++)r=a[s],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&f.push(c[r][0]),c[r]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var d=n[a];0!==c[d]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},c={app:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=d;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0004":function(e,t,n){"use strict";n("d274")},1378:function(e,t,n){},2946:function(e,t,n){},"2d96":function(e,t,n){},4221:function(e,t,n){"use strict";n("b52d")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,i,r){var a=Object(o["n"])("tool-bar"),d=Object(o["n"])("note"),l=Object(o["n"])("textfield-group");return Object(o["j"])(),Object(o["d"])(o["a"],null,[Object(o["g"])(a,{type:"default"}),Object(o["g"])(d),Object(o["g"])(l,{id:"main-textfield-group"})],64)}var i=n("6e4d"),r=n.n(i),a=function(e){return Object(o["l"])("data-v-a6bd14e8"),e=e(),Object(o["k"])(),e},d={id:"toolbar",class:"mdui-shadow-3"},l=a((function(){return Object(o["e"])("img",{id:"logo",class:"mdui-shadow-2",src:r.a,draggable:"false"},null,-1)})),u=[l];function s(e,t,n,c,i,r){return Object(o["j"])(),Object(o["d"])("div",d,u)}var f={},b=(n("4221"),n("6b0d")),p=n.n(b);const j=p()(f,[["render",s],["__scopeId","data-v-a6bd14e8"]]);var v=j,O=function(e){return Object(o["l"])("data-v-243925b8"),e=e(),Object(o["k"])(),e},h=O((function(){return Object(o["e"])("i",{class:"material-icons"},"add",-1)})),g=[h];function m(e,t,n,c,i,r){var a=Object(o["n"])("note-node"),d=Object(o["n"])("floor"),l=Object(o["n"])("textfield-group");return Object(o["j"])(),Object(o["d"])("div",{id:"note",class:"mdui-shadow-3",onContextmenu:t[1]||(t[1]=Object(o["o"])((function(){}),["prevent"]))},[(Object(o["j"])(!0),Object(o["d"])(o["a"],null,Object(o["m"])(r.note.contents,(function(e,t){return Object(o["j"])(),Object(o["d"])(o["a"],{key:e.id},["floor"!=e[0]?(Object(o["j"])(),Object(o["c"])(a,{key:0,tagName:e[0],content:e[1],level:r.note.level+1,location:[t]},null,8,["tagName","content","level","location"])):(Object(o["j"])(),Object(o["c"])(d,{key:1,children:e[1],location:[t]},null,8,["children","location"]))],64)})),128)),Object(o["g"])(l,{isAdding:i.isNodeAdding,onToParent:r.closeNodeAdder},null,8,["isAdding","onToParent"]),Object(o["e"])("button",{class:Object(o["i"])(["adder-btn mdui-color-blue-grey-100 mdui-btn mdui-btn-raised",{disabled:i.isNodeAdding}]),onClick:t[0]||(t[0]=function(){return r.openNodeAdder&&r.openNodeAdder.apply(r,arguments)})},g,2)],32)}var y={data:function(){return{tagName_:"",initialContent:"",editing:!1,selected:!1}},inject:["note"],props:["tagName","content","level","location"],created:function(){"h"==this.tagName?this.level<=6?this.tagName_="h"+this.level:this.tagName_="h6":this.tagName_=this.tagName},methods:{changeContent:function(e,t,n){if(t==this.location.length-1)n.contents[this.location[t]][1]=e;else{var o=t+1;this.changeContent(e,o,n.contents[this.location[t]][1])}}},render:function(){var e=this;return Object(o["h"])(this.tagName_,{contentEditable:!0,class:{selected:this.selected,editing:this.editing},onContextmenu:function(t){t.preventDefault(),e.selected=!0},onClick:function(t){e.initialContent=t.target.innerText,e.editing=!0},onBlur:function(t){var n=t.target.innerText;n!=e.initialContent&&e.changeContent(n,0,e.note),e.editing=!1,e.selected=!1}},this.content)}};const N=y;var x=N,A=(n("99af"),{class:"floor mdui-shadow-2"});function _(e,t,n,c,i,r){var a=Object(o["n"])("note-node"),d=Object(o["n"])("floor",!0);return Object(o["j"])(),Object(o["d"])("div",A,[(Object(o["j"])(!0),Object(o["d"])(o["a"],null,Object(o["m"])(n.children.contents,(function(e,t){return Object(o["j"])(),Object(o["d"])(o["a"],{key:e.id},["floor"!=e[0]?(Object(o["j"])(),Object(o["c"])(a,{key:0,tagName:e[0],content:e[1],level:n.children.level+1,location:n.location.concat([t])},null,8,["tagName","content","level","location"])):(Object(o["j"])(),Object(o["c"])(d,{key:1,children:e[1],location:n.location.concat([t])},null,8,["children","location"]))],64)})),128))])}var k={name:"floor",components:{NoteNode:x},props:["children","location"],inject:["note"]};n("bff1");const w=p()(k,[["render",_],["__scopeId","data-v-7295cf11"]]);var C=w,P=function(e){return Object(o["l"])("data-v-6ac1acb6"),e=e(),Object(o["k"])(),e},T=Object(o["f"])('<select class="selector" data-v-6ac1acb6><option value="h" data-v-6ac1acb6>标题</option><option value="p" data-v-6ac1acb6>段落</option><option value="floor" data-v-6ac1acb6>层次</option></select><div class="textfield" contenteditable="true" data-v-6ac1acb6></div>',2),S=P((function(){return Object(o["e"])("i",{class:"material-icons"},"close",-1)})),I=[S];function M(e,t,n,c,i,r){return Object(o["j"])(),Object(o["d"])("div",{class:Object(o["i"])(["textfield-group",{disabled:!n.isAdding}]),tabindex:"999"},[T,Object(o["e"])("button",{class:"textfield-closer",onClick:t[0]||(t[0]=function(e){return r.closeNodeAdder(e)})},I)],2)}var D={methods:{closeNodeAdder:function(e){var t=e.target,n=t.parentNode.children[0],o=n.value;this.$emit("toParent",o)}},props:["isAdding","type"]};n("cea6");const q=p()(D,[["render",M],["__scopeId","data-v-6ac1acb6"]]);var B=q,E={components:{NoteNode:x,floor:C,textfieldGroup:B},created:function(){var e=this;addEventListener("keydown",(function(t){var n=t.altKey,o=t.key;n&&"a"==o?(t.preventDefault(),e.openNodeAdder()):n&&"c"==o&&(t.preventDefault(),e.closeNodeAdder())}))},data:function(){return{isNodeAdding:!1}},inject:["note"],methods:{openNodeAdder:function(){var e=document.querySelector("#note > .textfield-group > .textfield");this.isNodeAdding=!0,e.focus()},closeNodeAdder:function(e){var t=document.querySelector("#note > .textfield-group > .textfield");t.innerText&&this.note.contents.push([e,t.innerText]),this.isNodeAdding=!1,t.innerText="",t.blur()}}};n("e8a9");const G=p()(E,[["render",m],["__scopeId","data-v-243925b8"]]);var J=G,K={name:"App",components:{Note:J,ToolBar:v,textfieldGroup:B},created:function(){},data:function(){return{note:{level:0,contents:[["h","这是一个大标题"],["p","这是一个段落"],["floor",{level:1,contents:[["h","这是层次中的大标题"],["p","这是一个段落"],["floor",{level:2,contents:[["h","这是层次中的大标题"],["p","这是一个段落"]]}]]}]]}}},provide:function(){return{note:this.note}}};n("0004");const L=p()(K,[["render",c]]);var $=L;n("1378"),n("2d96"),n("ec1b"),n("7471");Object(o["b"])($).mount("#app")},"6e4d":function(e,t,n){e.exports=n.p+"img/note.d54d2722.svg"},7471:function(e,t,n){},"81a2":function(e,t,n){},"82ed":function(e,t,n){},b52d:function(e,t,n){},bff1:function(e,t,n){"use strict";n("2946")},cea6:function(e,t,n){"use strict";n("81a2")},d274:function(e,t,n){},e8a9:function(e,t,n){"use strict";n("82ed")},ec1b:function(e,t,n){}});
//# sourceMappingURL=app.0c9db101.js.map