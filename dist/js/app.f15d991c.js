(function(e){function t(t){for(var o,s,l=t[0],r=t[1],a=t[2],u=0,b=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&b.push(c[s][0]),c[s]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);d&&d(t);while(b.length)b.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,l=1;l<n.length;l++){var r=n[l];0!==c[r]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},c={app:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var d=r;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0d55":function(e,t,n){"use strict";n("6d2d")},"15cf":function(e,t,n){"use strict";n("cee2")},"199f":function(e,t,n){},"1c9b":function(e,t,n){"use strict";n("ea58")},2373:function(e,t,n){"use strict";n("3fb4")},"38b9":function(e,t,n){},"3fb4":function(e,t,n){},4441:function(e,t,n){},"4a16":function(e,t,n){"use strict";n("da3e")},"4a3e":function(e,t,n){"use strict";n("4441")},5143:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function c(e,t,n,c,i,s){var l=Object(o["s"])("tool-bar"),r=Object(o["s"])("control-balls"),a=Object(o["s"])("msgbar"),d=Object(o["s"])("note"),u=Object(o["s"])("fixed-components"),b=Object(o["s"])("anchors");return Object(o["n"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",{class:Object(o["l"])(["dark-filter",{darken:i.isDarkMode}])},null,2),Object(o["j"])(l,{isTouchMode:i.isTouchMode},null,8,["isTouchMode"]),Object(o["j"])(r,{isDarkMode:i.isDarkMode,isTouchMode:i.isTouchMode,isFullscreen:i.isFullscreen,onToggleDarkMode:t[0]||(t[0]=function(e){return i.isDarkMode=!i.isDarkMode}),onToggleTouchMode:t[1]||(t[1]=function(e){return i.isTouchMode=!i.isTouchMode}),onToggleFullscreen:t[2]||(t[2]=function(e){return i.isFullscreen=!i.isFullscreen})},null,8,["isDarkMode","isTouchMode","isFullscreen"]),Object(o["j"])(a),Object(o["j"])(d,{isFullscreen:i.isFullscreen,isTouchMode:i.isTouchMode},null,8,["isFullscreen","isTouchMode"]),Object(o["j"])(u),Object(o["j"])(b)],64)}n("caad");var i=function(e){return Object(o["p"])("data-v-90bbecdc"),e=e(),Object(o["o"])(),e},s={class:"toolbar shadow-3"},l=i((function(){return Object(o["g"])("i",{class:"logo material-icons shadow-2"},"format_list_bulleted",-1)})),r={class:"tools"},a=i((function(){return Object(o["g"])("i",{class:"material-icons"},"add",-1)})),d=[a],u=i((function(){return Object(o["g"])("i",{class:"material-icons"},"remove",-1)})),b=[u],f=i((function(){return Object(o["g"])("i",{class:"material-icons"},"indeterminate_check_box",-1)})),h=[f],p=i((function(){return Object(o["g"])("i",{class:"material-icons"},"color_lens",-1)})),j=[p],O=i((function(){return Object(o["g"])("i",{class:"material-icons"},"clear_all",-1)})),v=[O],g=i((function(){return Object(o["g"])("i",{class:"material-icons"},"vertical_align_bottom",-1)})),m=[g],T={class:"material-icons file"},y=Object(o["i"])("input "),C={ref:"fileUploader",type:"file",accept:"application/json"};function N(e,t,n,c,i,a){return Object(o["n"])(),Object(o["f"])("div",s,[l,Object(o["g"])("div",r,[Object(o["g"])("div",{class:Object(o["l"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc}]),onClick:t[0]||(t[0]=function(){return a.openTextfield&&a.openTextfield.apply(a,arguments)})},d,2),Object(o["g"])("div",{class:Object(o["l"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc}]),onClick:t[1]||(t[1]=function(){return a.toDeleteNode&&a.toDeleteNode.apply(a,arguments)})},b,2),Object(o["x"])(Object(o["g"])("div",{class:Object(o["l"])(["tool btn btn-shallow",{disabled:!a.selectedNode.loc}]),onClick:t[2]||(t[2]=function(){return a.nodeCancelSelect&&a.nodeCancelSelect.apply(a,arguments)})},h,2),[[o["v"],n.isTouchMode]]),Object(o["g"])("div",{class:Object(o["l"])(["tool btn btn-shallow",{disabled:!["basic-node","list-item"].includes(a.selectedNode.type)}]),onClick:t[3]||(t[3]=function(){return a.openColors&&a.openColors.apply(a,arguments)})},j,2),Object(o["g"])("div",{class:"tool btn btn-shallow",onClick:t[4]||(t[4]=function(){return a.clearNodes&&a.clearNodes.apply(a,arguments)})},v),Object(o["g"])("div",{class:"tool btn btn-shallow",onClick:t[5]||(t[5]=function(){return a.saveNote&&a.saveNote.apply(a,arguments)})},m),Object(o["g"])("div",{class:"tool btn btn-shallow",onClick:t[6]||(t[6]=function(){return a.readNote&&a.readNote.apply(a,arguments)})},[Object(o["g"])("i",T,[y,Object(o["g"])("input",C,null,512)])])])])}n("e9c4");var k={inject:["note"],computed:{getThisObj:function(){var e;if(this.location)return this.getNodeObj({location:this.location,callback:function(t,n){e=t[n]}}),e}},methods:{getNodeObj:function(e){var t=e.parentObj,n=void 0===t?this.note:t,o=e.location,c=e.num,i=void 0===c?0:c,s=e.callback;i==o.length-1?s&&s(n.CTS,o[i]):this.getNodeObj({parentObj:n.CTS[o[i]],location:o,num:i+1,callback:s})}}};const x=k;var w=x,M=(n("a434"),{methods:{insertNode:function(e,t){e&&t&&this.getNodeObj({location:t,callback:function(t,n){t.splice(n+1,0,e)}})}}}),L={methods:{deleteNode:function(e){var t;return this.selectedNode&&(this.selectedNode.loc=null,this.selectedNode.type=null),this.getNodeObj({location:e,callback:function(e,n){t=e[n],e.splice(n,1)}}),t}}},S=n("1344"),_=new S["a"],D=n("1da1"),A=n("b85c"),$=(n("96cf"),n("fb6a"),n("38cf"),n("99af"),n("a15b"),["#","`","_","/","-",":"]),I={"##":"strong","``":"code",__:"u","//":"i","--":"del","::":"span"};function E(e){var t,n=[],o="",c="",i=Object(A["a"])(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;$.includes(s)?s==c?(n.push({type:"text",content:o.slice(0,-1)}),n.push({type:"key",content:s.repeat(2)}),c="",o=""):(o+=s,c=s):(c.length&&(c=""),o+=s)}}catch(l){i.e(l)}finally{i.f()}return o.length&&n.push({type:"text",content:o}),n}function F(e){var t,n=[],o="",c="",i="",s=Object(A["a"])(e);try{for(s.s();!(t=s.n()).done;){var l=t.value,r=l.content;if(o+=r,"key"==l.type)if("key"==c){if(r!=i)continue;var a=I[r];n.push({tagName:a,content:o}),c="",o=""}else c="key",i=r;else"key"!=c&&(n.push({tagName:"text",content:o}),o="")}}catch(u){s.e(u)}finally{s.f()}if(o.length){var d=n[n.length-1];d.content+=o}return n}function B(e,t){return"<".concat(e,">").concat(t,"</").concat(e,">")}function H(e){var t,n=[],o=Object(A["a"])(e);try{for(o.s();!(t=o.n()).done;){var c=t.value;"text"==c.tagName?n.push(c.content):n.push(B(c.tagName,c.content))}}catch(i){o.e(i)}finally{o.f()}return n}function U(e){if(!e)return null;var t,n=E(e),o=F(n);t=H(o);var c=t.join("");return c}function R(){return V.apply(this,arguments)}function V(){return V=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,n,o,c,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=document.getElementsByClassName("inline-style"),n=Object(A["a"])(t),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=13;break}if(c=o.value,i=c.textContent,i){e.next=9;break}return e.abrupt("continue",11);case 9:s=U(i,"HTML"),c.innerHTML=s;case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,15,18,21]])}))),V.apply(this,arguments)}var q={outputer:U,init:R},G=n("21a6"),P=n.n(G),W={props:["isTouchMode"],inject:["note","selectedNode"],mixins:[w,M,L],mounted:function(){var e=this,t=this.$refs.fileUploader;t.addEventListener("change",(function(){var n=new FileReader;n.readAsText(t.files[0],"uft8"),n.onload=function(t){var n=t.target.result;e.note.CTS=JSON.parse(n),setTimeout((function(){q.init()}),2e3)}})),_.on("textfield-return-toolBar",(function(t){e.toInsertNode(t)}))},methods:{openTextfield:function(){_.emit("textfield-open","toolBar")},toInsertNode:function(e){var t=this.selectedNode.loc;this.insertNode(e,t),t[t.length-1]+=1,_.emit("add-history",{loc:t,prop:"IST"})},toDeleteNode:function(){var e=this.selectedNode.loc,t=this.deleteNode(e);e[e.length-1]-=1,_.emit("add-history",{loc:e,prop:"DEL",nodeObj:t})},nodeCancelSelect:function(){this.selectedNode.vnode.selected=!1,this.selectedNode.loc=null,this.selectedNode.obj=null,this.selectedNode.type=null},openColors:function(){_.emit("fixedComponents-open","colors")},clearNodes:function(){this.note.CTS=[],this.note.HT=[],_.emit("clear-history")},saveNote:function(){var e=new Blob([JSON.stringify(this.note.CTS)],{type:"text/plain;charset=utf-8"}),t=this.note.NM||"MyNote";P()(e,t+".json")},readNote:function(){var e=this.$refs.fileUploader;e.click()}}},J=(n("f513"),n("6b0d")),K=n.n(J);const z=K()(W,[["render",N],["__scopeId","data-v-90bbecdc"]]);var Q=z,X=function(e){return Object(o["p"])("data-v-24edc4ca"),e=e(),Object(o["o"])(),e},Y=X((function(){return Object(o["g"])("i",{class:"material-icons"},"add",-1)})),Z=[Y];function ee(e,t,n,c,i,s){var l=Object(o["s"])("floor-block"),r=Object(o["s"])("node-renderer"),a=Object(o["s"])("textfield-group");return Object(o["n"])(),Object(o["f"])("div",{class:Object(o["l"])(["note-outer shadow-4",{fullscreen:n.isFullscreen}])},[Object(o["g"])("div",{class:"note",ref:"note",onContextmenu:t[1]||(t[1]=Object(o["y"])((function(){}),["prevent"]))},[(Object(o["n"])(!0),Object(o["f"])(o["a"],null,Object(o["q"])(s.note.CTS,(function(e,t){return Object(o["n"])(),Object(o["f"])(o["a"],{key:e.id},["floor"==e.NT?(Object(o["n"])(),Object(o["e"])(l,{key:0,children:e.CTS,level:2,location:[t]},null,8,["children","location"])):(Object(o["n"])(),Object(o["e"])(r,{key:1,nodeObj:e,index:t,level:1,location:[]},null,8,["nodeObj","index"]))],64)})),128)),Object(o["j"])(a,{id:"note-textfield-group",ref:"textfield",isAdding:i.isNodeAdding,onReturnNode:s.closeNodeAdder},null,8,["isAdding","onReturnNode"]),Object(o["g"])("div",{class:Object(o["l"])(["btn-fab adder-btn",{disabled:i.isNodeAdding}]),onClick:t[0]||(t[0]=function(){return s.openNodeAdder&&s.openNodeAdder.apply(s,arguments)})},Z,2)],544)],2)}var te=Object(o["g"])("div",{class:"mask"},null,-1);function ne(e,t,n,c,i,s){var l=Object(o["s"])("floor-block",!0),r=Object(o["s"])("node-renderer"),a=Object(o["s"])("block-controls");return Object(o["n"])(),Object(o["f"])("div",{class:Object(o["l"])(["floor shadow-1",{"shadow-3":i.selected,"touch-mode":s.isTouchMode}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[te,(Object(o["n"])(!0),Object(o["f"])(o["a"],null,Object(o["q"])(n.children,(function(e,t){return Object(o["n"])(),Object(o["f"])(o["a"],{key:e.id},["floor"==e.NT?(Object(o["n"])(),Object(o["e"])(l,{key:0,children:e.CTS,level:n.level+1,location:n.location.concat([t])},null,8,["children","level","location"])):(Object(o["n"])(),Object(o["e"])(r,{key:1,nodeObj:e,index:t,level:n.level,location:n.location},null,8,["nodeObj","index","level","location"]))],64)})),128)),Object(o["j"])(a,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:i.selected,location:n.location,parentType:"floor"},null,8,["disabled","isTouchMode","selected","location"])],34)}var oe={data:function(){return{selected:!1,initialContent:"",editing:!1,dbTouch:!1}},inject:["selectedNode"],mixins:[w],props:["tagName","content","location","color"],watch:{content:function(e){var t=this;this.$nextTick((function(){var n=q.outputer(e);t.$el.innerHTML=n}))}},methods:{selectEvent:function(){this.selected?(_.emit("fixedComponents-close"),this.selectedNode.loc=null,this.selectedNode.vnode=null,this.selectedNode.type=null,this.selected=!1):(this.selectedNode.loc&&(this.selectedNode.vnode.selected=!1),this.selectedNode.loc=this.location,this.selectedNode.vnode=this,this.selectedNode.type=this.tagName,this.selected=!0)}},render:function(){var e=this;return Object(o["k"])(this.tagName,{contentEditable:!0,class:{selected:this.selected,editing:this.editing,"inline-style":!0},style:{color:this.color},onContextmenu:function(t){t.preventDefault(),e.selectEvent()},onTouchstart:function(){e.dbTouch&&e.selectEvent(),e.dbTouch=!0,setTimeout((function(){e.dbTouch=!1}),300)},onClick:function(t){e.editing||(e.initialContent=t.target.innerText),e.editing=!0},onBlur:function(t){var n=t.target.innerText;n!=e.initialContent&&(e.getThisObj.CT=n,_.emit("add-history",{loc:e.location,prop:"CT",before:e.initialContent,after:n}),e.initialContent=n),e.editing=!1}},this.content)}};const ce=oe;var ie=ce,se={props:["level","content","location","selected","color"],components:[ie],mounted:function(){this.$nextTick((function(){_.emit("anchor-mounted")}))},render:function(){var e;return e=this.level<6?"h"+this.level:"h5",Object(o["k"])(ie,{tagName:e,id:this.location.join(""),class:"heading",content:this.content,color:this.color,selected:this.selected,location:this.location})}};const le=se;var re=le,ae=Object(o["g"])("div",{class:"mask"},null,-1),de=Object(o["g"])("i",{class:"material-icons"},"playlist_add",-1),ue=[de],be={class:"material-icons"},fe={class:"material-icons"};function he(e,t,n,c,i,s){var l=Object(o["s"])("list-block",!0),r=Object(o["s"])("basic-node"),a=Object(o["s"])("list-child"),d=Object(o["s"])("block-controls");return Object(o["n"])(),Object(o["f"])("div",{class:Object(o["l"])(["list",{"shadow-2":i.selected,hover:e.hover,empty:!n.children.length,"touch-mode":s.isTouchMode,nested:i.isNested}]),onMouseenter:t[2]||(t[2]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[3]||(t[3]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[ae,Object(o["j"])(a,{ordered:n.isOrdered},{default:Object(o["w"])((function(){return[(Object(o["n"])(!0),Object(o["f"])(o["a"],null,Object(o["q"])(n.children,(function(t,c){return Object(o["n"])(),Object(o["f"])(o["a"],{key:t.id},["list"==t.NT?(Object(o["n"])(),Object(o["e"])(l,{key:0,isOrdered:t.OL,children:t.CTS,location:n.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["isOrdered","children","location","onMouseInChild"])):(Object(o["n"])(),Object(o["e"])(r,{key:1,tagName:"li",content:t.CT,color:t.CL,location:n.location.concat([c])},null,8,["content","color","location"]))],64)})),128))]})),_:1},8,["ordered"]),Object(o["j"])(d,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:i.selected,location:n.location,parentType:"list"},{default:Object(o["w"])((function(){return[Object(o["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=function(){return s.addListBlock&&s.addListBlock.apply(s,arguments)})},ue),Object(o["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[1]||(t[1]=function(){return s.toggleOrdered&&s.toggleOrdered.apply(s,arguments)})},[Object(o["x"])(Object(o["g"])("i",be,"format_list_bulleted",512),[[o["v"],n.isOrdered]]),Object(o["x"])(Object(o["g"])("i",fe,"format_list_numbered",512),[[o["v"],!n.isOrdered]])])]})),_:1},8,["disabled","isTouchMode","selected","location"])],34)}var pe=function(e){return Object(o["p"])("data-v-04fa293f"),e=e(),Object(o["o"])(),e},je=pe((function(){return Object(o["g"])("i",{class:"material-icons"},"add",-1)})),Oe=[je],ve={class:"checkbox"},ge=["checked"];function me(e,t,n,c,i,s){return Object(o["n"])(),Object(o["f"])("div",{class:Object(o["l"])(["controls",{disabled:n.disabled&&!n.isTouchMode,"touch-mode":n.isTouchMode}])},[Object(o["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=function(){return e.addNode&&e.addNode.apply(e,arguments)})},Oe),Object(o["r"])(e.$slots,"default",{},void 0,!0),Object(o["g"])("label",ve,[Object(o["g"])("input",{type:"checkbox",ref:"checkbox",checked:n.selected,onChange:t[1]||(t[1]=function(){return s.selectEvent&&s.selectEvent.apply(s,arguments)})},null,40,ge),Object(o["g"])("i",{class:"checkbox-icon",onTouchstart:t[2]||(t[2]=function(){return s._touchstart&&s._touchstart.apply(s,arguments)}),onTouchend:t[3]||(t[3]=function(){return s._touchend&&s._touchend.apply(s,arguments)})},null,32)])],2)}var Te={methods:{tableAdder:function(e){for(var t=e.length,n=e[0].length,o=[],c=0;c<n;c++)o.push("");e.push(o),_.emit("add-history",{loc:this.location,prop:"ROW",before:t,after:t+1})},detailAdder:function(e){e.push({CT:"",CL:"#333"});var t=Object.create(this.location);t.push(e.length-1),_.emit("add-history",{loc:t,prop:"IST"})},listAdder:function(e){e.push({NT:"li",CT:"",CL:"#333"});var t=Object.create(this.location);t.push(e.length-1),_.emit("add-history",{loc:t,prop:"IST"})},floorAdder:function(e){var t=this;_.off("textfield-return-"+this.parentType),_.on("textfield-return-"+this.parentType,(function(n){n&&e.push(n);var o=t.location;o.push(e.length-1),_.emit("add-history",{loc:o,prop:"IST"}),_.off("textfield-return-"+t.parentType)})),_.emit("textfield-open",this.parentType)},addNode:function(){var e=this.getThisObj.CTS;switch(this.parentType){case"table":this.tableAdder(e);break;case"details":this.detailAdder(e);break;case"list":this.listAdder(e);break;case"floor":this.floorAdder(e)}}}},ye={data:function(){return{timeout:null}},props:["isTouchMode","parentType","disabled","location","selected"],inject:["selectedNode"],mixins:[w,Te],methods:{_touchstart:function(){var e=this;this.timeout=setTimeout((function(){e.addNode()}),1e3)},_touchend:function(){clearTimeout(this.timeout)},selectEvent:function(){var e=this.$refs.checkbox.checked;this.$parent.selected=e,e?(this.selectedNode.loc&&(this.selectedNode.vnode.selected=!1),this.selectedNode.loc=this.location,this.selectedNode.vnode=this.$parent,this.selectedNode.type=this.parentType,"list"==this.parentType&&(this.selectedNode.type=this.$parent.isNested?"nestedList":"notNestedList")):(this.selectedNode.loc=null,this.selectedNode.vnode=null,this.selectedNode.type=null)}}};n("83d0"),n("c436");const Ce=K()(ye,[["render",me],["__scopeId","data-v-04fa293f"]]);var Ne=Ce,ke={data:function(){return{hover:!1,setTimeout:null}},methods:{onMouseEnter:function(){var e=this;this.setTimeout=setTimeout((function(){e.hover=!0}),400)},onMouseLeave:function(){clearTimeout(this.setTimeout),this.selected||(this.hover=!1)}}},xe={name:"list-block",data:function(){return{selected:!1,isNested:null}},components:{BasicNode:ie,BlockControls:Ne,listChild:{props:["ordered"],render:function(){return Object(o["k"])(this.ordered?"ol":"ul",this.$slots.default())}}},props:["children","isOrdered","location"],inject:["isTouchMode"],mixins:[w,ke],methods:{addListBlock:function(){var e=this.getThisObj.CTS;e.push({NT:"list",OL:!1,CTS:[{NT:"li",CT:"",CL:"#333"}]});var t=Object.create(this.location);t.push(e.length-1),_.emit("add-history",{loc:t,prop:"IST"})},toggleOrdered:function(){this.getThisObj.OL=!this.getThisObj.OL}},mounted:function(){var e=this.$el.parentNode;this.isNested="OL"==e.tagName||"UL"==e.tagName}};const we=K()(xe,[["render",he]]);var Me=we,Le=Object(o["g"])("div",{class:"mask"},null,-1),Se=Object(o["g"])("i",{class:"material-icons"},"grid_on",-1),_e=[Se];function De(e,t,n,c,i,s){var l=Object(o["s"])("table-row"),r=Object(o["s"])("block-controls");return Object(o["n"])(),Object(o["f"])("div",{class:Object(o["l"])(["table shadow-1",{"shadow-3":i.selected,"touch-mode":s.isTouchMode,hover:e.hover&&!s.isTouchMode}]),onMouseenter:t[1]||(t[1]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[2]||(t[2]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[Le,Object(o["g"])("table",null,[Object(o["g"])("tbody",null,[(Object(o["n"])(!0),Object(o["f"])(o["a"],null,Object(o["q"])(n.children,(function(e,t){return Object(o["n"])(),Object(o["e"])(l,{key:e.id,children:e,location:n.location.concat(t)},null,8,["children","location"])})),128))])]),Object(o["j"])(r,{isTouchMode:s.isTouchMode,disabled:!e.hover,selected:i.selected,location:n.location,parentType:"table"},{default:Object(o["w"])((function(){return[Object(o["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=function(){return s.openTableSetter&&s.openTableSetter.apply(s,arguments)})},_e)]})),_:1},8,["isTouchMode","disabled","selected","location"])],34)}var Ae=["onBlur"];function $e(e,t,n,c,i,s){return Object(o["n"])(),Object(o["f"])("tr",null,[(Object(o["n"])(!0),Object(o["f"])(o["a"],null,Object(o["q"])(n.children,(function(e,n){return Object(o["n"])(),Object(o["f"])("td",{key:e.id,onClick:t[0]||(t[0]=function(){return s.edit&&s.edit.apply(s,arguments)}),onContextmenu:t[1]||(t[1]=function(){return s.edit&&s.edit.apply(s,arguments)}),onBlur:function(e){return s.finishEdit(e,n)},contenteditable:"true"},Object(o["t"])(e),41,Ae)})),128))])}var Ie={mixins:[w],props:["children","location"],methods:{edit:function(e){var t=e.target;t.classList.add("editing")},finishEdit:function(e,t){var n=e.target;n.classList.remove("editing");var o=n.innerText;this.getThisObj[t]=o}}};const Ee=K()(Ie,[["render",$e]]);var Fe=Ee,Be={data:function(){return{selected:!1}},props:["children","location"],inject:["isTouchMode"],mixins:[ke],components:{TableRow:Fe,BlockControls:Ne},methods:{openTableSetter:function(){_.emit("fixedComponents-open","tableSetter"),_.emit("table-location",this.location)}}};const He=K()(Be,[["render",De]]);var Ue=He;function Re(e,t,n,c,i,s){var l=Object(o["s"])("basic-node"),r=Object(o["s"])("block-controls");return Object(o["n"])(),Object(o["f"])("div",{class:Object(o["l"])(["details",{"shadow-2":i.selected,hover:e.hover,"touch-mode":s.isTouchMode}]),onMouseenter:t[2]||(t[2]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[3]||(t[3]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[Object(o["g"])("summary",{class:"summary",contenteditable:"true",ref:"summary",onBlur:t[0]||(t[0]=function(){return s.finishEdit&&s.finishEdit.apply(s,arguments)})},Object(o["t"])(n.summary),545),Object(o["g"])("details",null,[Object(o["g"])("summary",{onContextmenu:t[1]||(t[1]=function(t){return e.$refs.summary.focus()}),style:{"line-height":"1.4"}},null,32),(Object(o["n"])(!0),Object(o["f"])(o["a"],null,Object(o["q"])(n.children,(function(e,t){return Object(o["n"])(),Object(o["e"])(l,{key:e.id,tagName:"p",content:e.CT,color:e.CL,location:n.location.concat([t])},null,8,["content","color","location"])})),128))]),Object(o["j"])(r,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:i.selected,location:n.location,parentType:"details"},null,8,["disabled","isTouchMode","selected","location"])],34)}var Ve={data:function(){return{selected:!1}},components:{BasicNode:ie,BlockControls:Ne},mixins:[w,ke],inject:["isTouchMode"],props:["children","summary","location"],methods:{finishEdit:function(e){var t=e.target,n=t.innerText;_.emit("add-history",{loc:this.location,prop:"SUM",before:this.getThisObj.SUM,after:n}),this.getThisObj.SUM=n}}};n("8897");const qe=K()(Ve,[["render",Re],["__scopeId","data-v-7df230aa"]]);var Ge=qe,Pe={components:{Heading:re,BasicNode:ie,ListBlock:Me,TableBlock:Ue},props:["nodeObj","index","location","level"],render:function(){var e,t={location:this.location.concat([this.index])};switch(this.nodeObj.NT){case"h":e=re,t.level=this.level,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL;break;case"list":e=Me,t.isOrdered=this.nodeObj.OL,t.children=this.nodeObj.CTS;break;case"table":e=Ue,t.children=this.nodeObj.CTS;break;case"details":e=Ge,t.summary=this.nodeObj.SUM,t.children=this.nodeObj.CTS;break;default:e=ie,t.tagName=this.nodeObj.NT,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL}return Object(o["k"])(e,t)}};const We=Pe;var Je=We,Ke={name:"floor-block",components:{BlockControls:Ne,NodeRenderer:Je},data:function(){return{selected:!1}},props:["level","location","children"],inject:["isTouchMode"],mixins:[ke]};const ze=K()(Ke,[["render",ne]]);var Qe=ze,Xe={class:"selector",ref:"selector"},Ye=Object(o["h"])('<option value="h">标题</option><option value="p">段落</option><option value="hr">割线</option><option value="floor">层次</option><option value="ol">序列</option><option value="ul">乱列</option><option value="table">表格</option><option value="details">详情</option>',8),Ze=[Ye],et={class:"textfield",contenteditable:"true",ref:"inputter"},tt=Object(o["g"])("i",{class:"material-icons"},"close",-1),nt=[tt];function ot(e,t,n,c,i,s){return Object(o["n"])(),Object(o["f"])("div",{class:Object(o["l"])(["textfield-group shadow-2",{disabled:!n.isAdding}])},[Object(o["g"])("select",Xe,Ze,512),Object(o["g"])("div",et,null,512),Object(o["g"])("div",{class:"textfield-closer closer",onClick:t[0]||(t[0]=function(e){return s.closeNodeAdder()})},nt)],2)}var ct=function(e,t){if(!t)return null;var n={NT:e};switch(e){case"h":case"p":case"li":n.CT=t,n.CL="#333";break;case"hr":break;case"floor":n.CTS=[{NT:"h",CT:t,CL:"#333"}];break;case"ol":n.NT="list",n.CTS=[{NT:"li",CT:t,CL:"#333"}],n.OL=!0;break;case"ul":n.NT="list",n.CTS=[{NT:"li",CT:t,CL:"#333"}],n.OL=!1;break;case"table":n.CTS=[[t,"","",""],["","","",""]];break;case"details":n.SUM=t,n.CTS=[{CT:"",CL:"#333"}];break}return n},it={props:["isAdding"],inject:["note"],methods:{focus:function(){var e=this.$refs.inputter;e.focus()},closeNodeAdder:function(){var e=this.$refs.selector,t=this.$refs.inputter,n=e.value,o=t.innerText,c=ct(n,o);this.$emit("return-node",c),t.blur(),t.innerText=""}}};const st=K()(it,[["render",ot]]);var lt=st,rt={components:{FloorBlock:Qe,NodeRenderer:Je,TextfieldGroup:lt},data:function(){return{isNodeAdding:!1}},props:["isFullscreen"],inject:["note"],created:function(){var e=this;addEventListener("keydown",(function(t){var n=t.altKey,o=t.key;n&&"a"==o&&(t.preventDefault(),e.openNodeAdder())}))},mounted:function(){this.$nextTick((function(){q.init()}))},methods:{openNodeAdder:function(){location.href="#note-textfield-group",this.isNodeAdding=!0,this.$refs.textfield.focus()},closeNodeAdder:function(e){this.isNodeAdding=!1;var t=this.note.CTS;e&&t.push(e);var n=[t.length-1];_.emit("add-history",{loc:n,prop:"IST"})}},watch:{isFullscreen:function(e,t){var n=this;e!=t&&(this.$refs.note.style.display="none",setTimeout((function(){n.$refs.note.style.display="block"}),1200))}}};n("d868");const at=K()(rt,[["render",ee],["__scopeId","data-v-24edc4ca"]]);var dt=at;function ut(e,t,n,c,i,s){var l=Object(o["s"])("anchors-view"),r=Object(o["s"])("drawer");return Object(o["n"])(),Object(o["f"])("div",null,[Object(o["j"])(r,{title:"笔记摘要",disabled:i.drawerDisabled,onCloseDrawer:t[0]||(t[0]=function(e){return i.drawerDisabled=!0})},{default:Object(o["w"])((function(){return[Object(o["j"])(l,{list:i.anchorList},null,8,["list"])]})),_:1},8,["disabled"])])}n("d81d");var bt={class:"titlebar shadow-4"},ft={class:"closer circle"},ht={class:"drawer-view"};function pt(e,t,n,c,i,s){return Object(o["n"])(),Object(o["f"])(o["a"],null,[Object(o["g"])("div",{class:Object(o["l"])(["fullscreen-mask",{disabled:n.disabled}]),onClick:t[0]||(t[0]=function(){return s.close&&s.close.apply(s,arguments)})},null,2),Object(o["g"])("div",{class:Object(o["l"])(["drawer",{disabled:n.disabled}])},[Object(o["g"])("div",bt,[Object(o["g"])("div",ft,[Object(o["g"])("i",{class:"material-icons arrow-forward",onClick:t[1]||(t[1]=function(){return s.close&&s.close.apply(s,arguments)})},"arrow_forward"),Object(o["g"])("i",{class:"material-icons arrow-upward",onClick:t[2]||(t[2]=function(){return s.close&&s.close.apply(s,arguments)})},"arrow_upward")]),Object(o["g"])("h1",null,Object(o["t"])(n.title),1)]),Object(o["g"])("div",ht,[Object(o["r"])(e.$slots,"default")])],2)],64)}var jt={props:["title","disabled"],emits:["close-drawer"],methods:{close:function(){this.$emit("close-drawer")}}};n("aee9");const Ot=K()(jt,[["render",pt]]);var vt=Ot,gt={data:function(){return{drawerDisabled:!0,anchorList:[],timeout:null}},components:{Drawer:vt,AnchorsView:{props:["list"],render:function(){var e=this.list.map((function(e){return Object(o["k"])("a",{level:e.level,href:"#"+e.href},e.content)}));return Object(o["k"])("div",e)}}},inject:["note"],methods:{getAnchors:function(){var e,t=document.querySelectorAll(".heading"),n=[],o=Object(A["a"])(t);try{for(o.s();!(e=o.n()).done;){var c=e.value;n.push({level:c.tagName,href:c.id,content:c.innerText})}}catch(i){o.e(i)}finally{o.f()}return n},close:function(){this.drawerDisabled=!0}},mounted:function(){var e=this;_.on("open-anchors",(function(){e.drawerDisabled=!1})),_.on("anchor-mounted",(function(){e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.timeout=setTimeout((function(){e.anchorList=e.getAnchors()}))}))}};n("637d");const mt=K()(gt,[["render",ut],["__scopeId","data-v-8efa4254"]]);var Tt=mt,yt=function(e){return Object(o["p"])("data-v-c8fd90ac"),e=e(),Object(o["o"])(),e},Ct=yt((function(){return Object(o["g"])("div",{class:"block"},[Object(o["g"])("div",{class:"mask"}),Object(o["g"])("i",{class:"material-icons"},"apps")],-1)})),Nt=yt((function(){return Object(o["g"])("i",{class:"material-icons"},"subtitles",-1)})),kt=[Nt],xt={class:"material-icons"},wt={class:"material-icons"},Mt=yt((function(){return Object(o["g"])("i",{class:"material-icons"},"touch_app",-1)})),Lt=[Mt],St={class:"material-icons"},_t={class:"material-icons"};function Dt(e,t,n,c,i,s){return Object(o["n"])(),Object(o["f"])("div",{class:Object(o["l"])(["controlballs",{fullscreen:n.isFullscreen}])},[Ct,Object(o["g"])("div",{class:"ball btn",onClick:t[0]||(t[0]=function(){return s.openAnchors&&s.openAnchors.apply(s,arguments)})},kt),Object(o["g"])("div",{class:"ball btn",onClick:t[1]||(t[1]=function(t){return e.$emit("toggle-darkMode")})},[Object(o["x"])(Object(o["g"])("i",xt,"brightness_2",512),[[o["v"],!n.isDarkMode]]),Object(o["x"])(Object(o["g"])("i",wt,"wb_sunny",512),[[o["v"],n.isDarkMode]])]),Object(o["g"])("div",{class:Object(o["l"])(["ball btn",{black:n.isTouchMode}]),onClick:t[2]||(t[2]=function(t){return e.$emit("toggle-touchMode")})},Lt,2),Object(o["g"])("div",{class:"ball btn",onClick:t[3]||(t[3]=function(t){return e.$emit("toggle-fullscreen")})},[Object(o["x"])(Object(o["g"])("i",St,"fullscreen",512),[[o["v"],!n.isFullscreen]]),Object(o["x"])(Object(o["g"])("i",_t,"fullscreen_exit",512),[[o["v"],n.isFullscreen]])])],2)}var At={props:["isDarkMode","isTouchMode","isFullscreen"],emits:["toggle-darkMode","toggle-touchMode","toggle-fullscreen"],methods:{openAnchors:function(){_.emit("open-anchors")}}};n("0d55");const $t=K()(At,[["render",Dt],["__scopeId","data-v-c8fd90ac"]]);var It=$t;function Et(e,t,n,c,i,s){var l=Object(o["s"])("textfield-group-fixed"),r=Object(o["s"])("colors"),a=Object(o["s"])("table-setter"),d=Object(o["s"])("history");return Object(o["n"])(),Object(o["f"])("div",null,[Object(o["j"])(l,{onClose:s.close,disabled:i.textfieldGroupDisabled},null,8,["onClose","disabled"]),Object(o["j"])(r,{onClose:s.close,disabled:i.colorsDisabled},null,8,["onClose","disabled"]),Object(o["j"])(a,{onClose:s.close,disabled:i.tableSetterDisabled},null,8,["onClose","disabled"]),Object(o["j"])(d,{disabled:i.historyDisabled},null,8,["disabled"])])}var Ft={class:"textfield-group fixed-component fixed"},Bt={class:"selector",ref:"selector"},Ht=Object(o["g"])("option",{value:"h"},"标题",-1),Ut=Object(o["g"])("option",{value:"p"},"段落",-1),Rt=Object(o["g"])("option",{value:"hr"},"割线",-1),Vt=Object(o["g"])("option",{value:"floor"},"层次",-1),qt=Object(o["g"])("option",{value:"ol"},"序列",-1),Gt=Object(o["g"])("option",{value:"ul"},"乱列",-1),Pt=Object(o["g"])("option",{value:"table"},"表格",-1),Wt=Object(o["g"])("option",{value:"details"},"详情",-1),Jt=[Ht,Ut,Rt,Vt,qt,Gt,Pt,Wt],Kt={class:"selector",ref:"selector4List"},zt=Object(o["g"])("option",{value:"li"},"列项",-1),Qt=Object(o["g"])("option",{value:"ol"},"序列",-1),Xt=Object(o["g"])("option",{value:"ul"},"乱列",-1),Yt=[zt,Qt,Xt],Zt={class:"textfield",contenteditable:"true",ref:"inputter"},en=Object(o["g"])("i",{class:"material-icons"},"close",-1),tn=[en];function nn(e,t,n,c,i,s){return Object(o["n"])(),Object(o["e"])(o["b"],{name:"slide"},{default:Object(o["w"])((function(){return[Object(o["x"])(Object(o["g"])("div",Ft,[Object(o["x"])(Object(o["g"])("select",Bt,Jt,512),[[o["v"],!s.isFromNestedList]]),Object(o["x"])(Object(o["g"])("select",Kt,Yt,512),[[o["v"],s.isFromNestedList]]),Object(o["g"])("div",Zt,null,512),Object(o["g"])("div",{class:"textfield-closer closer",onClick:t[0]||(t[0]=function(){return s.closeTextfield&&s.closeTextfield.apply(s,arguments)})},tn)],512),[[o["v"],!n.disabled]])]})),_:1})}var on={data:function(){return{commandFrom:""}},props:["disabled"],inject:["selectedNode"],computed:{isFromNestedList:function(){return"list"==this.commandFrom||["li","nestedList"].includes(this.selectedNode.type)}},mounted:function(){var e=this;_.on("textfield-open",(function(t){e.commandFrom=t,setTimeout((function(){e.$refs.inputter.focus()}),1200)}))},methods:{closeTextfield:function(){this.$emit("close","textfieldGroup");var e=this.isFromNestedList?this.$refs.selector4List.value:this.$refs.selector.value,t=this.$refs.inputter.innerText,n=ct(e,t);_.emit("textfield-return-"+this.commandFrom,n),this.$refs.inputter.blur(),this.$refs.inputter.innerText=""}}};const cn=K()(on,[["render",nn]]);var sn=cn,ln=function(e){return Object(o["p"])("data-v-48369ae0"),e=e(),Object(o["o"])(),e},rn={class:"colors fixed-component"},an=["onClick"],dn={class:"input-group"},un=ln((function(){return Object(o["g"])("i",{class:"material-icons"},"close",-1)})),bn=[un];function fn(e,t,n,c,i,s){return Object(o["n"])(),Object(o["e"])(o["b"],{name:"slide"},{default:Object(o["w"])((function(){return[Object(o["x"])(Object(o["g"])("div",rn,[(Object(o["n"])(!0),Object(o["f"])(o["a"],null,Object(o["q"])(i.colors,(function(e){return Object(o["n"])(),Object(o["f"])("div",{key:e.id,class:"color btn btn-shallow",style:Object(o["m"])({"background-color":e}),onClick:function(t){return s.setColor(e)}},null,12,an)})),128)),Object(o["g"])("div",dn,[Object(o["g"])("div",{class:"hint",onClick:t[0]||(t[0]=function(t){return e.$refs.colorInputter.click()})},"#"),Object(o["x"])(Object(o["g"])("input",{type:"color",ref:"colorInputter","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.colorValue=e})},null,512),[[o["v"],!1],[o["u"],i.colorValue]]),Object(o["x"])(Object(o["g"])("input",{class:"inputter",placeholder:"******",type:"text",maxlength:"8","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.colorValue=e})},null,512),[[o["u"],i.colorValue]])]),Object(o["g"])("div",{class:"closer",onClick:t[3]||(t[3]=function(t){return e.$emit("close","colors")})},bn)],512),[[o["v"],!n.disabled]])]})),_:1})}n("ac1f"),n("5319");var hn={data:function(){return{colors:["#D50000","#FFD600","#333"],colorValue:"",timeout:null}},props:["disabled"],inject:["selectedNode"],mixins:[w],methods:{setColor:function(e){var t=this.selectedNode.loc,n=this.selectedNode.obj,o=n.CL;n.CL=e,_.emit("add-history",{loc:t,prop:"CL",before:o,after:e})}},watch:{colorValue:function(e){var t=this;clearTimeout(this.timeout);var n=e.replace("#","");this.timeout=setTimeout((function(){t.setColor("#"+n)}),300)}}};n("c72e");const pn=K()(hn,[["render",fn],["__scopeId","data-v-48369ae0"]]);var jn=pn,On=function(e){return Object(o["p"])("data-v-75915245"),e=e(),Object(o["o"])(),e},vn={class:"table-setter fixed-component"},gn={class:"input-group"},mn=On((function(){return Object(o["g"])("i",{class:"hint material-icons"},"view_headline",-1)})),Tn={class:"input-group"},yn=On((function(){return Object(o["g"])("i",{class:"hint material-icons"},"view_column",-1)})),Cn=On((function(){return Object(o["g"])("i",{class:"material-icons"},"check",-1)})),Nn=[Cn],kn=On((function(){return Object(o["g"])("i",{class:"material-icons"},"close",-1)})),xn=[kn];function wn(e,t,n,c,i,s){return Object(o["n"])(),Object(o["e"])(o["b"],{name:"slide"},{default:Object(o["w"])((function(){return[Object(o["x"])(Object(o["g"])("div",vn,[Object(o["g"])("div",gn,[mn,Object(o["x"])(Object(o["g"])("input",{class:"inputter",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.row=e})},null,512),[[o["u"],i.row]])]),Object(o["g"])("div",Tn,[yn,Object(o["x"])(Object(o["g"])("input",{class:"inputter",type:"text",placeholder:" > 0 ",maxlength:"3","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.col=e})},null,512),[[o["u"],i.col]])]),Object(o["g"])("div",{class:"closer",onClick:t[2]||(t[2]=function(){return s.tableSet&&s.tableSet.apply(s,arguments)})},Nn),Object(o["g"])("div",{class:"closer",onClick:t[3]||(t[3]=function(t){return e.$emit("close","tableSetter")})},xn)],512),[[o["v"],!n.disabled]])]})),_:1})}var Mn={data:function(){return{row:1,col:1,targetNode:null,targetNodeLoc:[],timeout:null}},props:["disabled"],mixins:[w],mounted:function(){var e=this,t={ROW:"row",COL:"col"};_.on("table-location",(function(t){e.tableGet(t)})),_.on("table-edit",(function(n){var o=n.historyObj,c=n.resultValue;e.tableGet(o.loc);var i=t[o.prop];e[i]=o[c],e.tableSet(!1)}))},methods:{eventListen:function(e){var t=e.key;"Enter"==t&&this.tableSet(!0)},tableGet:function(e){var t=this;e&&(this.targetNodeLoc=e,this.getNodeObj({location:e,callback:function(e,n){t.targetNode=e[n]}})),this.row=this.targetNode.CTS.length,this.col=this.targetNode.CTS[0].length},tableSet:function(e){var t=this.targetNode.CTS.length,n=this.targetNode.CTS[0].length,o=Math.abs(this.row-t),c=Math.abs(this.col-n);if(this.col!=n)if(e&&_.emit("add-history",{loc:this.targetNodeLoc,prop:"COL",before:n,after:this.col}),this.col>n){var i,s=Object(A["a"])(this.targetNode.CTS);try{for(s.s();!(i=s.n()).done;)for(var l=i.value,r=0;r<c;r++)l.push("")}catch(O){s.e(O)}finally{s.f()}}else{var a,d=Object(A["a"])(this.targetNode.CTS);try{for(d.s();!(a=d.n()).done;)for(var u=a.value,b=0;b<c;b++)u.pop()}catch(O){d.e(O)}finally{d.f()}}if(this.row!=t)if(e&&_.emit("add-history",{loc:this.targetNodeLoc.loc,prop:"ROW",before:t,after:this.row}),this.row>t){for(var f=[],h=0;h<this.col;h++)f.push("");for(var p=0;p<o;p++)this.targetNode.CTS.push([].concat(f))}else for(var j=0;j<o;j++)this.targetNode.CTS.pop()}},watch:{disabled:function(e){e?(this.targetNode=null,this.targetNodeLoc=[],removeEventListener("keydown",this.eventListen)):addEventListener("keydown",this.eventListen)},row:function(e){var t=this;e<1?this.timeout=setTimeout((function(){t.row=1}),1e3):clearTimeout(this.timeout)},col:function(e){var t=this;e<1?this.timeout=setTimeout((function(){t.col=1}),1e3):clearTimeout(this.timeout)}}};n("15cf");const Ln=K()(Mn,[["render",wn],["__scopeId","data-v-75915245"]]);var Sn=Ln,_n=function(e){return Object(o["p"])("data-v-a005a298"),e=e(),Object(o["o"])(),e},Dn={class:"history fixed-component"},An=_n((function(){return Object(o["g"])("i",{class:"material-icons"},"undo",-1)})),$n=[An],In=_n((function(){return Object(o["g"])("i",{class:"material-icons"},"redo",-1)})),En=[In],Fn=_n((function(){return Object(o["g"])("i",{class:"material-icons"},"menu",-1)})),Bn=[Fn];function Hn(e,t,n,c,i,s){var l=Object(o["s"])("history-view"),r=Object(o["s"])("drawer");return Object(o["n"])(),Object(o["f"])(o["a"],null,[Object(o["j"])(o["b"],{name:"slide"},{default:Object(o["w"])((function(){return[Object(o["x"])(Object(o["g"])("div",Dn,[Object(o["g"])("div",{class:Object(o["l"])(["btn btn-shallow",{disabled:i.historyIndex==s.note.HT.length-1}]),onClick:t[0]||(t[0]=function(e){return s.doit("undo")})},$n,2),Object(o["g"])("div",{class:Object(o["l"])(["btn btn-shallow",{disabled:i.historyIndex<0}]),onClick:t[1]||(t[1]=function(e){return s.doit("redo")})},En,2),Object(o["g"])("div",{class:Object(o["l"])(["btn btn-shallow",{disabled:!s.note.HT.length}]),onClick:t[2]||(t[2]=function(e){return i.drawerDisabled=!1})},Bn,2)],512),[[o["v"],!n.disabled]])]})),_:1}),Object(o["j"])(r,{title:"编辑历史",disabled:i.drawerDisabled,onCloseDrawer:t[3]||(t[3]=function(e){return i.drawerDisabled=!0})},{default:Object(o["w"])((function(){return[Object(o["j"])(l,{list:s.note.HT,index:i.historyIndex},null,8,["list","index"])]})),_:1},8,["disabled"])],64)}var Un=function(e){return Object(o["p"])("data-v-18eeabf4"),e=e(),Object(o["o"])(),e},Rn=Un((function(){return Object(o["g"])("span",{class:"history-prop"},"位置：",-1)})),Vn={class:"loc"},qn=Un((function(){return Object(o["g"])("span",{class:"history-prop"},"属性：",-1)})),Gn={class:"prop"},Pn=Un((function(){return Object(o["g"])("span",{class:"history-prop"},"改前：",-1)})),Wn={class:"text"},Jn=Un((function(){return Object(o["g"])("span",{class:"history-prop"},"改后：",-1)})),Kn={class:"text"},zn=["data-index"];function Qn(e,t,n,c,i,s){return Object(o["n"])(!0),Object(o["f"])(o["a"],null,Object(o["q"])(n.list,(function(e,n){return Object(o["n"])(),Object(o["f"])("div",{class:"history-block",key:e.id,ref:"historyBlock"},[Object(o["g"])("div",null,[Rn,Object(o["g"])("span",Vn,Object(o["t"])(e.loc),1)]),Object(o["g"])("div",null,[qn,Object(o["g"])("span",Gn,Object(o["t"])(i.propsDict[e.prop]),1)]),Object(o["x"])(Object(o["g"])("div",null,[Pn,Object(o["g"])("span",Wn,Object(o["t"])(e.before),1)],512),[[o["v"],e.before]]),Object(o["x"])(Object(o["g"])("div",null,[Jn,Object(o["g"])("span",Kn,Object(o["t"])(e.after),1)],512),[[o["v"],e.after]]),Object(o["g"])("div",{class:"btn btn-shallow",onClick:t[0]||(t[0]=function(e){return s.doSome(e)})},[Object(o["g"])("i",{class:"material-icons","data-index":n},"check",8,zn)])],512)})),128)}var Xn={props:["list","index"],data:function(){return{propsDict:{CT:"内容",CL:"颜色",SUM:"题目",ROW:"行数",COL:"列数",IST:"插入",DEL:"删除"}}},methods:{doSome:function(e){var t=e.target,n=t.dataset["index"],o=this.$parent.$parent;o.doSome(n)}},watch:{index:function(e,t){var n=this.$el.parentNode,o=n.children[e],c=n.children[t];e>-1&&o.classList.add("selected"),t>-1&&c.classList.remove("selected")}}};n("1c9b");const Yn=K()(Xn,[["render",Qn],["__scopeId","data-v-18eeabf4"]]);var Zn=Yn,eo={data:function(){return{drawerDisabled:!0,historyIndex:-1}},components:{Drawer:vt,HistoryView:Zn},props:["disabled"],inject:["note"],mixins:[w,M,L],methods:{doit:function(e){var t="undo"==e?++this.historyIndex:this.historyIndex--,n=this.note.HT[t],o="undo"==e?"before":"after";switch(n.prop){case"CT":case"CL":case"SUM":this.getNodeObj({location:n.loc,callback:function(e,t){var c=e[t];c[n.prop]=n[o]}});break;case"ROW":case"COL":_.emit("table-edit",{historyObj:n,resultValue:o});break;case"IST":var c=n.loc,i=this.deleteNode(c);this.note.HT.shift(),n.prop="DEL",n.loc[n.loc.length-1]-=1,n.nodeObj=i,this.note.HT.unshift(n);break;case"DEL":var s=n.nodeObj,l=n.loc;this.insertNode(s,l),this.note.HT.shift(),n.prop="IST",n.loc[n.loc.length-1]+=1,this.note.HT.unshift(n);break}},doSome:function(e){var t,n=e-this.historyIndex,o=Math.abs(n);if(n>0)t="undo";else{if(!(n<0))return;t="redo"}for(var c=0;c<o;c++)this.doit(t)}},mounted:function(){var e=this;addEventListener("keydown",(function(t){var n=t.altKey,o=t.key;n&&"z"==o&&e.doit("undo")})),addEventListener("keydown",(function(t){var n=t.altKey,o=t.key;n&&"y"==o&&e.doit("redo")})),_.on("add-history",(function(t){var n=e.note.HT;if(20==n.length&&n.pop(),e.historyIndex<0)n.unshift(t);else{var o=e.historyIndex+1;n.splice(0,o),n.unshift(t),e.historyIndex=-1}})),_.on("clear-history",(function(){e.historyIndex=-1}))}};n("4a3e");const to=K()(eo,[["render",Hn],["__scopeId","data-v-a005a298"]]);var no=to,oo={data:function(){return{textfieldGroupDisabled:!0,colorsDisabled:!0,tableSetterDisabled:!0,historyDisabled:!1}},components:{TextfieldGroupFixed:sn,Colors:jn,TableSetter:Sn,History:no},methods:{open:function(e){this.closeAll(),this[e+"Disabled"]=!1},close:function(e){this[e+"Disabled"]=!0,this.historyDisabled=!1},closeAll:function(){this.colorsDisabled=!0,this.textfieldGroupDisabled=!0,this.tableSetterDisabled=!0,this.historyDisabled=!0}},mounted:function(){var e=this;_.on("fixedComponents-open",this.open),_.on("textfield-open",(function(){e.open("textfieldGroup")})),_.on("fixedComponents-close",(function(){e.closeAll(),e.historyDisabled=!1}))}};n("4a16");const co=K()(oo,[["render",Et],["__scopeId","data-v-ab5781fc"]]);var io=co,so={class:"msgbar-outer"};function lo(e,t,n,c,i,s){return Object(o["n"])(),Object(o["e"])(o["b"],{name:"slide"},{default:Object(o["w"])((function(){return[Object(o["x"])(Object(o["g"])("div",so,[Object(o["g"])("div",{class:Object(o["l"])(["msgbar",{active:i.active}]),onClick:t[0]||(t[0]=function(){return s.close&&s.close.apply(s,arguments)})},Object(o["t"])(i.msg),3)],512),[[o["v"],i.active]])]})),_:1})}var ro={data:function(){return{active:!1,msg:""}},methods:{close:function(){this.active=!1}},mounted:function(){var e=this;_.on("show-msg",(function(t){e.msg=t,e.active=!0}))},watch:{active:function(e){var t=this;e&&setTimeout((function(){t.close()}),3e3)}}};n("e8e8");const ao=K()(ro,[["render",lo]]);var uo=ao,bo={NM:"Example",HT:[],CTS:[{NT:"h",CT:"这是一个大标题",CL:"#333"},{NT:"hr"},{NT:"p",CT:"这是一个段落",CL:"#333"},{NT:"p",CT:"内联样式实例（均使用英文符号）：##粗体## ``代码`` __下划线__ //斜体// --删除-- ::淡化::",CL:"#333"},{NT:"floor",CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333"},{NT:"p",CT:"这是一个段落",CL:"#333"},{NT:"floor",CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333"},{NT:"p",CT:"这是一个段落",CL:"#333"}]}]},{NT:"list",OL:!0,CTS:[{NT:"li",CT:"这是一个列表项",CL:"#333"},{NT:"li",CT:"这是一个列表项",CL:"#333"},{NT:"list",OL:!1,CTS:[{NT:"li",CT:"嵌套列表内的列表项",CL:"#333"},{NT:"li",CT:"嵌套列表内的列表项",CL:"#333"}]}]},{NT:"table",CTS:[["表格项","表格项","表格项","表格项"],["表格项","表格项","表格项","表格项"]]},{NT:"details",SUM:"这是一个详情块",CTS:[{CT:"这是一个段落",CL:"#333"},{CT:"这是一个段落",CL:"#333"}]}]},fo={name:"App",components:{Anchors:Tt,Note:dt,ControlBalls:It,ToolBar:Q,Msgbar:uo,FixedComponents:io},data:function(){return{note:bo,selectedNode:{loc:null,obj:null,vnode:null,type:null},isDarkMode:!1,isTouchMode:!1,isFullscreen:!1}},provide:function(){var e=this;return{note:this.note,selectedNode:this.selectedNode,isTouchMode:Object(o["c"])((function(){return e.isTouchMode}))}},mounted:function(){(function(){var e=function(){var e=document.querySelector("#meta-viewport"),t=1080;window&&(t=window.innerHeight);var n="width=device-width,height=".concat(t,",initial-scale=1.0");e.setAttribute("content",n)};e(),addEventListener("orientationchange",(function(){e()}))})()}};n("2373");const ho=K()(fo,[["render",c]]);var po=ho,jo=(n("5143"),n("8f09"),n("38b9"),n("afd3"),n("86be"),n("61fd"),n("8d2a"),n("cde1"),n("584d"),n("9483"));Object(jo["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Oo=Object(o["d"])(po);Oo.config.unwrapInjectedRef=!0,Oo.mount("#app")},"584d":function(e,t,n){},"61fd":function(e,t,n){},6266:function(e,t,n){},"637d":function(e,t,n){"use strict";n("199f")},"6d2d":function(e,t,n){},"73cc":function(e,t,n){},"83d0":function(e,t,n){"use strict";n("73cc")},"86be":function(e,t,n){},8897:function(e,t,n){"use strict";n("ad76")},"8d2a":function(e,t,n){},"8f09":function(e,t,n){},"9a3e":function(e,t,n){},a06b:function(e,t,n){},a55b:function(e,t,n){},ad76:function(e,t,n){},aee9:function(e,t,n){"use strict";n("6266")},afd3:function(e,t,n){},c436:function(e,t,n){"use strict";n("d6c2")},c72e:function(e,t,n){"use strict";n("cbe2")},cbe2:function(e,t,n){},cde1:function(e,t,n){},cee2:function(e,t,n){},d6c2:function(e,t,n){},d868:function(e,t,n){"use strict";n("a06b")},da3e:function(e,t,n){},e8e8:function(e,t,n){"use strict";n("a55b")},ea58:function(e,t,n){},f513:function(e,t,n){"use strict";n("9a3e")}});
//# sourceMappingURL=app.f15d991c.js.map