(function(e){function t(t){for(var n,i,s=t[0],r=t[1],a=t[2],u=0,b=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&b.push(c[i][0]),c[i]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);d&&d(t);while(b.length)b.shift()();return l.push.apply(l,a||[]),o()}function o(){for(var e,t=0;t<l.length;t++){for(var o=l[t],n=!0,s=1;s<o.length;s++){var r=o[s];0!==c[r]&&(n=!1)}n&&(l.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},c={app:0},l=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var d=r;l.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0802":function(e,t,o){"use strict";o("8c8d")},"0825":function(e,t,o){"use strict";o("b508")},"0a81":function(e,t,o){"use strict";o("69dd")},"116c":function(e,t,o){"use strict";o("8819")},"1cc4":function(e,t,o){"use strict";o("d252")},3143:function(e,t,o){},"38b9":function(e,t,o){},5143:function(e,t,o){},5399:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23");function c(e,t,o,c,l,i){var s=Object(n["p"])("tool-bar"),r=Object(n["p"])("control-balls"),a=Object(n["p"])("note"),d=Object(n["p"])("textfield-group-fixed"),u=Object(n["p"])("colors"),b=Object(n["p"])("table-setter");return Object(n["l"])(),Object(n["d"])(n["a"],null,[Object(n["e"])("div",{class:Object(n["j"])(["dark-filter",{darken:l.isDarkMode}])},null,2),Object(n["h"])(s,{isTouchMode:l.isTouchMode},null,8,["isTouchMode"]),Object(n["h"])(r,{isDarkMode:l.isDarkMode,isTouchMode:l.isTouchMode,isFullscreen:l.isFullscreen,onToggleDarkMode:i.toggleDarkMode,onToggleTouchMode:i.toggleTouchMode,onToggleFullscreen:i.toggleFullscreen},null,8,["isDarkMode","isTouchMode","isFullscreen","onToggleDarkMode","onToggleTouchMode","onToggleFullscreen"]),Object(n["h"])(a,{isFullscreen:l.isFullscreen,isTouchMode:l.isTouchMode},null,8,["isFullscreen","isTouchMode"]),Object(n["h"])(d),Object(n["h"])(u),Object(n["h"])(b)],64)}o("caad");var l=function(e){return Object(n["n"])("data-v-29273020"),e=e(),Object(n["m"])(),e},i={class:"toolbar shadow-3"},s=l((function(){return Object(n["e"])("i",{class:"logo material-icons shadow-2"},"format_list_bulleted",-1)})),r={class:"tools"},a=l((function(){return Object(n["e"])("i",{class:"material-icons"},"add",-1)})),d=[a],u=l((function(){return Object(n["e"])("i",{class:"material-icons"},"remove",-1)})),b=[u],h=l((function(){return Object(n["e"])("i",{class:"material-icons"},"add_box",-1)})),f=[h],j=l((function(){return Object(n["e"])("i",{class:"material-icons"},"indeterminate_check_box",-1)})),O=[j],p=l((function(){return Object(n["e"])("i",{class:"material-icons"},"grid_on",-1)})),v=[p],T=l((function(){return Object(n["e"])("i",{class:"material-icons"},"color_lens",-1)})),m=[T],N=l((function(){return Object(n["e"])("i",{class:"material-icons"},"clear_all",-1)})),g=[N],C=l((function(){return Object(n["e"])("i",{class:"material-icons"},"vertical_align_bottom",-1)})),k=[C],M=l((function(){return Object(n["e"])("i",{class:"material-icons file"},[Object(n["g"])("input "),Object(n["e"])("input",{id:"file-uploader",type:"file",accept:"application/json"})],-1)})),S=[M];function y(e,t,o,c,l,a){return Object(n["l"])(),Object(n["d"])("div",i,[s,Object(n["e"])("div",r,[Object(n["e"])("div",{class:Object(n["j"])(["tool btn btn-shallow",{disabled:!a.selectedNode.location||"td"==a.selectedNode.tagName}]),onClick:t[0]||(t[0]=function(){return a.openTextfield&&a.openTextfield.apply(a,arguments)})},d,2),Object(n["e"])("div",{class:Object(n["j"])(["tool btn btn-shallow",{disabled:!a.selectedNode.location||"td"==a.selectedNode.tagName}]),onClick:t[1]||(t[1]=function(){return a.deleteNode&&a.deleteNode.apply(a,arguments)})},b,2),Object(n["t"])(Object(n["e"])("div",{class:Object(n["j"])(["tool btn btn-shallow",{disabled:!["floor","list","table"].includes(a.selectedNode.type)}]),onClick:t[2]||(t[2]=function(){return a.blockNodeInsert&&a.blockNodeInsert.apply(a,arguments)})},f,2),[[n["r"],o.isTouchMode]]),Object(n["t"])(Object(n["e"])("div",{class:Object(n["j"])(["tool btn btn-shallow",{disabled:!a.selectedNode.location}]),onClick:t[3]||(t[3]=function(){return a.nodeCancelSelect&&a.nodeCancelSelect.apply(a,arguments)})},O,2),[[n["r"],o.isTouchMode]]),Object(n["e"])("div",{class:Object(n["j"])(["tool btn btn-shallow",{disabled:"table"!=a.selectedNode.type}]),onClick:t[4]||(t[4]=function(){return a.tableSetOpen&&a.tableSetOpen.apply(a,arguments)})},v,2),Object(n["e"])("div",{class:Object(n["j"])(["tool btn btn-shallow",{disabled:!["basic-node","list-item"].includes(a.selectedNode.type)}]),onClick:t[5]||(t[5]=function(){return a.colorsOpen&&a.colorsOpen.apply(a,arguments)})},m,2),Object(n["e"])("div",{class:"tool btn btn-shallow",onClick:t[6]||(t[6]=function(){return a.clearNodes&&a.clearNodes.apply(a,arguments)})},g),Object(n["e"])("div",{class:"tool btn btn-shallow",onClick:t[7]||(t[7]=function(){return a.saveNote&&a.saveNote.apply(a,arguments)})},k),Object(n["e"])("div",{class:"tool btn btn-shallow",onClick:t[8]||(t[8]=function(){return a.readNote&&a.readNote.apply(a,arguments)})},S)])])}o("a434"),o("e9c4");var L={computed:{getThisObj:function(){var e;if(this.location)return this.getNodeObj({location:this.location,callback:function(t,o){e=t[o]}}),e}},methods:{getNodeObj:function(e){var t=e.parentObj,o=void 0===t?this.note:t,n=e.location,c=e.num,l=void 0===c?0:c,i=e.callback;l==n.length-1?i&&i(o.CTS,n[l]):this.getNodeObj({parentObj:o.CTS[n[l]],location:n,num:l+1,callback:i})}}};const x=L;var w=x,F=o("1344"),_=new F["a"],D=o("21a6"),A=o.n(D),$={props:["isTouchMode"],inject:["note","selectedNode"],mixins:[w],mounted:function(){var e=this,t=document.querySelector("#file-uploader");t.addEventListener("change",(function(){var o=new FileReader;o.readAsText(t.files[0],"uft8"),o.onload=function(t){var o=t.target.result;e.note.CTS=JSON.parse(o)}})),_.on("textfield-return-toolBar",(function(t){e.insertNode(t)}))},methods:{openTextfield:function(){_.emit("note-offset"),_.emit("textfield-open","toolBar")},insertNode:function(e){if(e){var t=this.selectedNode.location;t&&this.getNodeObj({location:t,callback:function(t,o){t.splice(o+1,0,e)}})}},deleteNode:function(){var e=this.selectedNode.location;this.selectedNode.location=null,this.selectedNode.type=null,this.selectedNode.tagName=null,this.getNodeObj({location:e,callback:function(e,t){e.splice(t,1)}})},blockNodeInsert:function(){_.emit("add-node")},nodeCancelSelect:function(){this.getNodeObj({location:this.selectedNode.location,callback:function(e,t){e[t].SL=!1}}),this.selectedNode.tagName=null,this.selectedNode.location=null,this.selectedNode.type=null},tableSetOpen:function(){this.tableSetter=!0,_.emit("note-offset"),_.emit("tableSetter-open"),_.emit("colors-close"),_.emit("textfield-close")},colorsOpen:function(){_.emit("colors-open"),_.emit("note-offset")},clearNodes:function(){this.note.CTS=[]},saveNote:function(){var e=new Blob([JSON.stringify(this.note.CTS)],{type:"text/plain;charset=utf-8"});A()(e,"myNote.json")},readNote:function(){var e=document.querySelector("#file-uploader");e.click()}}},E=(o("cea4"),o("6b0d")),I=o.n(E);const B=I()($,[["render",y],["__scopeId","data-v-29273020"]]);var P=B,V=function(e){return Object(n["n"])("data-v-35c4b1c8"),e=e(),Object(n["m"])(),e},q=V((function(){return Object(n["e"])("div",{class:"block"},[Object(n["e"])("div",{class:"mask"}),Object(n["e"])("i",{class:"material-icons"},"apps")],-1)})),J={class:"material-icons"},R={class:"material-icons"},U=V((function(){return Object(n["e"])("i",{class:"material-icons"},"touch_app",-1)})),G=[U],H={class:"material-icons"},K={class:"material-icons"};function z(e,t,o,c,l,i){return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["controlballs",{fullscreen:o.isFullscreen}])},[q,Object(n["e"])("div",{class:"ball btn",onClick:t[0]||(t[0]=function(){return i.toggleDarkMode&&i.toggleDarkMode.apply(i,arguments)})},[Object(n["t"])(Object(n["e"])("i",J,"brightness_2",512),[[n["r"],!o.isDarkMode]]),Object(n["t"])(Object(n["e"])("i",R,"wb_sunny",512),[[n["r"],o.isDarkMode]])]),Object(n["e"])("div",{class:Object(n["j"])(["ball btn",{back:o.isTouchMode}]),onClick:t[1]||(t[1]=function(){return i.toggleTouchMode&&i.toggleTouchMode.apply(i,arguments)})},G,2),Object(n["e"])("div",{class:"ball btn",onClick:t[2]||(t[2]=function(){return i.toggleFullscreen&&i.toggleFullscreen.apply(i,arguments)})},[Object(n["t"])(Object(n["e"])("i",H,"fullscreen",512),[[n["r"],!o.isFullscreen]]),Object(n["t"])(Object(n["e"])("i",K,"fullscreen_exit",512),[[n["r"],o.isFullscreen]])])],2)}var Q={props:["isDarkMode","isTouchMode","isFullscreen"],methods:{toggleDarkMode:function(){this.$emit("toggleDarkMode")},toggleTouchMode:function(){this.$emit("toggleTouchMode")},toggleFullscreen:function(){this.$emit("toggleFullscreen")}}};o("116c");const W=I()(Q,[["render",z],["__scopeId","data-v-35c4b1c8"]]);var X=W,Y=function(e){return Object(n["n"])("data-v-35b32729"),e=e(),Object(n["m"])(),e},Z=Y((function(){return Object(n["e"])("div",{class:"mask"},null,-1)})),ee=Y((function(){return Object(n["e"])("i",{class:"material-icons"},"add",-1)})),te=[ee];function oe(e,t,o,c,l,i){var s=Object(n["p"])("floor-block"),r=Object(n["p"])("node-renderer"),a=Object(n["p"])("textfield-group");return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["note-outer shadow-3",{offset:l.offset,fullscreen:o.isFullscreen}])},[Object(n["e"])("div",{class:"note",ref:"note",onContextmenu:t[1]||(t[1]=Object(n["u"])((function(){}),["prevent"]))},[(Object(n["l"])(!0),Object(n["d"])(n["a"],null,Object(n["o"])(i.note.CTS,(function(e,t){return Object(n["l"])(),Object(n["d"])(n["a"],{key:e.id},["floor"==e.NT?(Object(n["l"])(),Object(n["c"])(s,{key:0,isTouchMode:o.isTouchMode,selected:e.SL,children:e.CTS,level:2,location:[t]},null,8,["isTouchMode","selected","children","location"])):(Object(n["l"])(),Object(n["c"])(r,{key:1,isTouchMode:o.isTouchMode,nodeObj:e,index:t,level:1,location:[]},null,8,["isTouchMode","nodeObj","index"]))],64)})),128)),Z,Object(n["h"])(a,{ref:"textfield",isAdding:l.isNodeAdding,onToParent:i.closeNodeAdder},null,8,["isAdding","onToParent"]),Object(n["e"])("div",{class:Object(n["j"])(["btn btn-normal adder-btn",{disabled:l.isNodeAdding}]),onClick:t[0]||(t[0]=function(){return i.openNodeAdder&&i.openNodeAdder.apply(i,arguments)})},te,2)],544)],2)}o("99af");var ne=Object(n["e"])("div",{class:"mask"},null,-1);function ce(e,t,o,c,l,i){var s=Object(n["p"])("floor-block",!0),r=Object(n["p"])("node-renderer"),a=Object(n["p"])("block-controls");return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["floor shadow-2",{"shadow-6":o.selected,"touch-mode":o.isTouchMode}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[ne,(Object(n["l"])(!0),Object(n["d"])(n["a"],null,Object(n["o"])(o.children,(function(t,c){return Object(n["l"])(),Object(n["d"])(n["a"],{key:t.id},["floor"==t.NT?(Object(n["l"])(),Object(n["c"])(s,{key:0,isTouchMode:o.isTouchMode,children:t.CTS,selected:t.SL,level:o.level+1,location:o.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["isTouchMode","children","selected","level","location","onMouseInChild"])):(Object(n["l"])(),Object(n["c"])(r,{key:1,isTouchMode:o.isTouchMode,nodeObj:t,index:c,level:o.level,location:o.location},null,8,["isTouchMode","nodeObj","index","level","location"]))],64)})),128)),Object(n["h"])(a,{disabled:!e.hover,isTouchMode:o.isTouchMode,selected:o.selected,location:o.location,parentType:"floor"},null,8,["disabled","isTouchMode","selected","location"])],34)}function le(e,t,o,c,l,i){var s=Object(n["p"])("heading"),r=Object(n["p"])("list-block"),a=Object(n["p"])("table-block"),d=Object(n["p"])("basic-node");return"h"==o.nodeObj.NT?(Object(n["l"])(),Object(n["c"])(s,{key:0,level:o.level,content:o.nodeObj.CT,color:o.nodeObj.CL,selected:o.nodeObj.SL,location:o.location.concat([o.index])},null,8,["level","content","color","selected","location"])):"list"==o.nodeObj.NT?(Object(n["l"])(),Object(n["c"])(r,{key:1,isTouchMode:o.isTouchMode,isOrdered:o.nodeObj.OL,selected:o.nodeObj.SL,children:o.nodeObj.CTS,location:o.location.concat([o.index])},null,8,["isTouchMode","isOrdered","selected","children","location"])):"table"==o.nodeObj.NT?(Object(n["l"])(),Object(n["c"])(a,{key:2,isTouchMode:o.isTouchMode,selected:o.nodeObj.SL,children:o.nodeObj.CTS,location:o.location.concat([o.index])},null,8,["isTouchMode","selected","children","location"])):(Object(n["l"])(),Object(n["c"])(d,{key:3,tagName:o.nodeObj.NT,content:o.nodeObj.CT,color:o.nodeObj.CL,selected:o.nodeObj.SL,location:o.location.concat([o.index])},null,8,["tagName","content","color","selected","location"]))}var ie={data:function(){return{initialContent:this.content,editing:!1,dbClick:!1}},inject:["note","selectedNode"],props:["tagName","content","location","selected","color"],mixins:[w],computed:{fontColor:function(){return this.color?this.color:"#333"}},methods:{selectEvent:function(){this.selected?(_.emit("textfield-close"),_.emit("colors-close"),this.selectedNode.location=null,this.selectedNode.type=null,this.selectedNode.tagName=null,this.getThisObj.SL=!1):(this.selectedNode.location&&this.getNodeObj({location:this.selectedNode.location,callback:function(e,t){e[t].SL=!1}}),this.selectedNode.location=this.location,this.selectedNode.type="basic-node",this.selectedNode.tagName=this.tagName,this.getThisObj.SL=!0)}},render:function(){var e=this;return Object(n["i"])(this.tagName,{contentEditable:"hr"!=this.tagName,class:{selected:this.selected,editing:this.editing},style:{color:this.fontColor},onContextmenu:function(t){t.preventDefault(),e.selectEvent()},onClick:function(t){e.dbClick&&e.selectEvent(),e.dbClick=!0,setTimeout((function(){e.dbClick=!1}),300),e.initialContent=t.target.innerText,e.editing=!0},onBlur:function(t){var o=t.target.innerText;o!=e.initialContent&&(e.getThisObj.CT=o),e.editing=!1}},this.content)}};const se=ie;var re=se,ae={props:["level","content","location","selected","color"],components:[re],render:function(){var e;return e=this.level<6?"h"+this.level:"h5",Object(n["i"])(re,{tagName:e,content:this.content,color:this.color,selected:this.selected,location:this.location})}};const de=ae;var ue=de,be=Object(n["e"])("div",{class:"mask"},null,-1);function he(e,t,o,c,l,i){var s=Object(n["p"])("list-block",!0),r=Object(n["p"])("basic-node"),a=Object(n["p"])("list-child"),d=Object(n["p"])("block-controls");return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["list",{"shadow-6":o.selected,hover:e.hover&&!o.selected,empty:!o.children.length,"touch-mode":o.isTouchMode}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[be,Object(n["h"])(a,{ordered:o.isOrdered},{default:Object(n["s"])((function(){return[(Object(n["l"])(!0),Object(n["d"])(n["a"],null,Object(n["o"])(o.children,(function(t,c){return Object(n["l"])(),Object(n["d"])(n["a"],{key:t.id},["list"==t.NT?(Object(n["l"])(),Object(n["c"])(s,{key:0,isTouchMode:o.isTouchMode,isOrdered:t.OL,selected:t.SL,children:t.CTS,location:o.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["isTouchMode","isOrdered","selected","children","location","onMouseInChild"])):(Object(n["l"])(),Object(n["c"])(r,{key:1,tagName:"h"==t.NT?"h4":t.NT,content:t.CT,color:t.CL,selected:t.SL,location:o.location.concat([c])},null,8,["tagName","content","color","selected","location"]))],64)})),128))]})),_:1},8,["ordered"]),Object(n["h"])(d,{disabled:!e.hover,isTouchMode:o.isTouchMode,selected:o.selected,location:o.location,parentType:"list"},null,8,["disabled","isTouchMode","selected","location"])],34)}var fe=function(e){return Object(n["n"])("data-v-1148a613"),e=e(),Object(n["m"])(),e},je=fe((function(){return Object(n["e"])("i",{class:"material-icons"},"add",-1)})),Oe=[je],pe={class:"checkbox"},ve=["checked"],Te=fe((function(){return Object(n["e"])("i",{class:"checkbox-icon"},null,-1)}));function me(e,t,o,c,l,i){return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["controls",{disabled:o.disabled&&!o.isTouchMode,"touch-mode":o.isTouchMode}])},[Object(n["e"])("div",{class:"btn btn-normal adder-btn",onClick:t[0]||(t[0]=function(){return i.addNode&&i.addNode.apply(i,arguments)}),ref:"addNodeBtn"},Oe,512),Object(n["e"])("label",pe,[Object(n["e"])("input",{type:"checkbox",ref:"checkbox",checked:o.selected,onChange:t[1]||(t[1]=function(){return i.selectEvent&&i.selectEvent.apply(i,arguments)})},null,40,ve),Te])],2)}var Ne={NT:"td",CT:"",SL:!1,CL:null},ge={props:["isTouchMode","disabled","selected","location","parentType"],inject:["note","selectedNode"],mixins:[w],methods:{selectEvent:function(){var e=this,t=this.$refs.checkbox.checked;this.getThisObj.SL=t,t?(_.on("add-node",(function(){e.$refs.addNodeBtn.click()})),this.selectedNode.location&&this.getNodeObj({location:this.selectedNode.location,callback:function(e,t){e[t].SL=!1}}),this.selectedNode.location=this.location,this.selectedNode.type=this.parentType):(_.off("add-node"),this.selectedNode.location=null,this.selectedNode.type=null)},addNode:function(){var e=this;if("table"==this.parentType){var t=this.getThisObj.CTS[0].CTS.length;console.log(t);for(var o={CTS:[]},n=0;n<t;n++)o.CTS.push(Ne);this.getThisObj.CTS.push(o)}else _.emit("note-offset"),_.emit("textfield-open",this.parentType),_.on("textfield-return-"+this.parentType,(function(t){t&&e.getThisObj.CTS.push(t),_.off("textfield-return-"+e.parentType)}))}}};o("0a81");const Ce=I()(ge,[["render",me],["__scopeId","data-v-1148a613"]]);var ke=Ce,Me={data:function(){return{hover:!1,setTimeout:null}},methods:{onMouseEnter:function(){var e=this;this.setTimeout=setTimeout((function(){e.hover=!0}),400),this.location.length>1&&this.$emit("mouse-in-child")},onMouseLeave:function(){clearTimeout(this.setTimeout),this.selected||(this.hover=!1)}}};const Se=Me;var ye=Se,Le={name:"list-block",components:{BasicNode:re,BlockControls:ke,listChild:{props:["ordered"],render:function(){return Object(n["i"])(this.ordered?"ol":"ul",this.$slots.default())}}},props:["isTouchMode","children","isOrdered","location","selected"],mixins:[ye]};const xe=I()(Le,[["render",he]]);var we=xe,Fe=Object(n["e"])("div",{class:"mask"},null,-1);function _e(e,t,o,c,l,i){var s=Object(n["p"])("basic-node"),r=Object(n["p"])("block-controls");return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["table shadow-2",{"shadow-6":o.selected,"touch-mode":o.isTouchMode,hover:e.hover&&!o.isTouchMode}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[Fe,Object(n["e"])("table",null,[Object(n["e"])("tbody",null,[(Object(n["l"])(!0),Object(n["d"])(n["a"],null,Object(n["o"])(o.children,(function(e,t){return Object(n["l"])(),Object(n["d"])("tr",{key:e.id},[(Object(n["l"])(!0),Object(n["d"])(n["a"],null,Object(n["o"])(e.CTS,(function(e,c){return Object(n["l"])(),Object(n["c"])(s,{key:e.id,tagName:"td",content:e.CT,color:e.CL,selected:e.SL,location:o.location.concat([t,c])},null,8,["content","color","selected","location"])})),128))])})),128))])]),Object(n["h"])(r,{isTouchMode:o.isTouchMode,disabled:!e.hover,selected:o.selected,location:o.location,parentType:"table"},null,8,["isTouchMode","disabled","selected","location"])],34)}var De={props:["isTouchMode","selected","children","location"],mixins:[ye],components:{BasicNode:re,BlockControls:ke}};const Ae=I()(De,[["render",_e]]);var $e=Ae,Ee={components:{Heading:ue,BasicNode:re,ListBlock:we,TableBlock:$e},props:["isTouchMode","nodeObj","index","location","level"]};const Ie=I()(Ee,[["render",le]]);var Be=Ie,Pe={name:"floor-block",components:{BlockControls:ke,NodeRenderer:Be},props:["isTouchMode","level","location","children","selected"],mixins:[ye]};const Ve=I()(Pe,[["render",ce]]);var qe=Ve,Je={class:"selector",ref:"selector"},Re=Object(n["f"])('<option value="h">标题</option><option value="p">段落</option><option value="hr">割线</option><option value="floor">层次</option><option value="ol">序列</option><option value="ul">乱列</option><option value="table">表格</option>',7),Ue=[Re],Ge={class:"textfield",contenteditable:"true",ref:"inputter"},He=Object(n["e"])("i",{class:"material-icons"},"close",-1),Ke=[He];function ze(e,t,o,c,l,i){return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["textfield-group shadow-2",{disabled:!o.isAdding}])},[Object(n["e"])("select",Je,Ue,512),Object(n["e"])("div",Ge,null,512),Object(n["e"])("div",{class:"textfield-closer closer",onClick:t[0]||(t[0]=function(e){return i.closeNodeAdder()})},Ke)],2)}var Qe={methods:{returnObj:function(e,t){if("/"==t)return null;var o={NT:e,SL:!1};switch(e){case"h":case"p":case"li":o.CT=t,o.CL=null;break;case"hr":break;case"floor":o.CTS=[],t&&o.CTS.push({NT:"h",CT:t,CL:null,SL:!1});break;case"ol":o.NT="list",o.CTS=[],o.OL=!0;break;case"ul":o.NT="list",o.CTS=[],o.OL=!1;break;case"table":o.CO=4,o.CTS=[{CTS:[{NT:"td",CT:"",SL:!1,CL:null},{NT:"td",CT:"",SL:!1,CL:null},{NT:"td",CT:"",SL:!1,CL:null},{NT:"td",CT:"",SL:!1,CL:null}]}];break}return o}}};const We=Qe;var Xe=We,Ye={props:["isAdding"],mixins:[Xe],methods:{focus:function(){var e=this.$refs.inputter;e.focus()},closeNodeAdder:function(){var e=this.$refs.selector,t=this.$refs.inputter,o=e.value,n=t.innerText,c=this.returnObj(o,n);this.$emit("toParent",c),t.blur(),t.innerText=""}}};const Ze=I()(Ye,[["render",ze]]);var et=Ze,tt={components:{FloorBlock:qe,NodeRenderer:Be,TextfieldGroup:et},data:function(){return{isNodeAdding:!1,offset:!1}},props:["isFullscreen","isTouchMode"],inject:["note"],created:function(){var e=this;addEventListener("keydown",(function(t){var o=t.altKey,n=t.key;o&&"a"==n&&(t.preventDefault(),e.openNodeAdder())}))},mounted:function(){var e=this;_.on("note-offset",(function(){e.offset=!0})),_.on("note-offset-cancel",(function(){e.offset=!1}))},methods:{openNodeAdder:function(){this.isNodeAdding=!0,this.$refs.textfield.focus()},closeNodeAdder:function(e){this.isNodeAdding=!1,console.log(e),e&&this.note.CTS.push(e)}},watch:{isFullscreen:function(e,t){var o=this;e!=t&&(this.$refs.note.style.display="none",setTimeout((function(){o.$refs.note.style.display="block"}),1200))}}};o("1cc4");const ot=I()(tt,[["render",oe],["__scopeId","data-v-35b32729"]]);var nt=ot,ct={class:"selector",ref:"selector"},lt=Object(n["e"])("option",{value:"h"},"标题",-1),it={value:"p"},st=Object(n["e"])("option",{value:"hr"},"割线",-1),rt={value:"floor"},at=Object(n["e"])("option",{value:"ol"},"序列",-1),dt=Object(n["e"])("option",{value:"ul"},"乱列",-1),ut={value:"li"},bt=Object(n["e"])("option",{value:"table"},"表格",-1),ht={class:"textfield",contenteditable:"true",ref:"inputter"},ft=Object(n["e"])("i",{class:"material-icons"},"close",-1),jt=[ft];function Ot(e,t,o,c,l,i){return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["textfield-group fixed-component fixed",{disabled:!l.isInputting}])},[Object(n["e"])("select",ct,[lt,Object(n["t"])(Object(n["e"])("option",it,"段落",512),[[n["r"],"list"!=l.commandFrom&&"li"!=i.selectedNode.tagName]]),st,Object(n["t"])(Object(n["e"])("option",rt,"层次",512),[[n["r"],"list"!=l.commandFrom&&"li"!=i.selectedNode.tagName]]),at,dt,Object(n["t"])(Object(n["e"])("option",ut,"列项",512),[[n["r"],"list"==l.commandFrom||"li"==i.selectedNode.tagName]]),bt],512),Object(n["e"])("div",ht,null,512),Object(n["e"])("div",{class:"textfield-closer closer",onClick:t[0]||(t[0]=function(){return i.closeTextfield&&i.closeTextfield.apply(i,arguments)})},jt)],2)}var pt={data:function(){return{isInputting:!1,commandFrom:""}},inject:["selectedNode"],mixins:[Xe],mounted:function(){var e=this;_.on("textfield-open",(function(t){_.emit("colors-close"),_.emit("tableSetter-close"),e.commandFrom=t,e.isInputting=!0,e.$refs.inputter.focus()})),_.on("textfield-close",(function(){e.commandFrom=null,e.isInputting=!1}))},methods:{closeTextfield:function(){this.isInputting=!1,_.emit("note-offset-cancel");var e=this.$refs.selector.value,t=this.$refs.inputter.innerText,o=this.returnObj(e,t);_.emit("textfield-return-"+this.commandFrom,o),_.emit("textfield-return"),this.$refs.inputter.blur(),this.$refs.inputter.innerText=""}}};const vt=I()(pt,[["render",Ot]]);var Tt=vt,mt=function(e){return Object(n["n"])("data-v-7235df6b"),e=e(),Object(n["m"])(),e},Nt=["onClick"],gt={class:"input-group"},Ct=mt((function(){return Object(n["e"])("div",{class:"hint"},"#",-1)})),kt=mt((function(){return Object(n["e"])("i",{class:"material-icons"},"close",-1)})),Mt=[kt];function St(e,t,o,c,l,i){return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["colors fixed-component",{disabled:l.disabled}])},[(Object(n["l"])(!0),Object(n["d"])(n["a"],null,Object(n["o"])(l.colors,(function(e){return Object(n["l"])(),Object(n["d"])("div",{key:e.id,class:"color btn btn-shallow",style:Object(n["k"])({"background-color":e}),onClick:function(t){return i.setColor(e)}},null,12,Nt)})),128)),Object(n["e"])("div",gt,[Ct,Object(n["t"])(Object(n["e"])("input",{class:"inputer",placeholder:"******",type:"text",maxlength:"8","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.colorValue=e})},null,512),[[n["q"],l.colorValue]])]),Object(n["e"])("div",{class:"closer",onClick:t[1]||(t[1]=function(){return i.close&&i.close.apply(i,arguments)})},Mt)],2)}var yt={data:function(){return{disabled:!0,colors:["#D50000","#FFD600","#333"],colorValue:"",timeout:null,targetNode:null}},inject:["selectedNode","note"],mixins:[w],mounted:function(){var e=this;_.on("colors-open",(function(){_.emit("textfield-closes"),_.emit("tableSetter-close"),e.disabled=!1,e.getNodeObj({location:e.selectedNode.location,callback:function(t,o){e.targetNode=t[o]}})})),_.on("colors-close",(function(){e.disabled=!0,e.targetNode=null}))},methods:{setColor:function(e){this.targetNode.CL=e},close:function(){_.emit("colors-close"),_.emit("note-offset-cancel")}},watch:{colorValue:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.setColor("#"+e)}),600)}}};o("89c4");const Lt=I()(yt,[["render",St],["__scopeId","data-v-7235df6b"]]);var xt=Lt,wt=function(e){return Object(n["n"])("data-v-65c7ceba"),e=e(),Object(n["m"])(),e},Ft={class:"input-group"},_t=wt((function(){return Object(n["e"])("i",{class:"hint material-icons"},"view_headline",-1)})),Dt={class:"input-group"},At=wt((function(){return Object(n["e"])("i",{class:"hint material-icons"},"view_column",-1)})),$t=wt((function(){return Object(n["e"])("i",{class:"material-icons"},"check",-1)})),Et=[$t],It=wt((function(){return Object(n["e"])("i",{class:"material-icons"},"close",-1)})),Bt=[It];function Pt(e,t,o,c,l,i){return Object(n["l"])(),Object(n["d"])("div",{class:Object(n["j"])(["table-setter fixed-component",{disabled:!l.show}])},[Object(n["e"])("div",Ft,[_t,Object(n["t"])(Object(n["e"])("input",{class:"inputer",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.row=e})},null,512),[[n["q"],l.row]])]),Object(n["e"])("div",Dt,[At,Object(n["t"])(Object(n["e"])("input",{class:"inputer",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[1]||(t[1]=function(e){return l.col=e})},null,512),[[n["q"],l.col]])]),Object(n["e"])("div",{class:"closer",onClick:t[2]||(t[2]=function(){return i.tableSet&&i.tableSet.apply(i,arguments)})},Et),Object(n["e"])("div",{class:"closer",onClick:t[3]||(t[3]=function(){return i.close&&i.close.apply(i,arguments)})},Bt)],2)}var Vt=o("b85c"),qt={NT:"td",CT:"",SL:!1,CL:null},Jt={inject:["note","selectedNode"],mixins:[w],data:function(){return{row:1,col:1,show:!1,targetNode:null,timeout:null}},mounted:function(){var e=this;_.on("tableSetter-open",(function(){e.show=!0})),_.on("tableSetter-close",(function(){e.show=!1})),addEventListener("keydown",(function(t){"Enter"==t.key&&e.tableSet()}))},methods:{tableSet:function(){var e=this.targetNode.CTS.length,t=this.targetNode.CTS[0].CTS.length,o=Math.abs(this.row-e),n=Math.abs(this.col-t);if(this.col>t){var c,l=Object(Vt["a"])(this.targetNode.CTS);try{for(l.s();!(c=l.n()).done;)for(var i=c.value,s=0;s<n;s++)i.CTS.push(qt)}catch(O){l.e(O)}finally{l.f()}}else{var r,a=Object(Vt["a"])(this.targetNode.CTS);try{for(a.s();!(r=a.n()).done;)for(var d=r.value,u=0;u<n;u++)d.CTS.pop()}catch(O){a.e(O)}finally{a.f()}}if(this.row>e){for(var b={CTS:[]},h=0;h<this.col;h++)b.CTS.push(qt);for(var f=0;f<o;f++)this.targetNode.CTS.push(b)}else for(var j=0;j<o;j++)this.targetNode.CTS.pop()},close:function(){_.emit("note-offset-cancel"),this.show=!1}},watch:{show:function(e){var t=this;e?(this.getNodeObj({location:this.selectedNode.location,callback:function(e,o){t.targetNode=e[o]}}),this.row=this.targetNode.CTS.length,this.col=this.targetNode.CTS[0].CTS.length):this.targetNode=null},row:function(e){var t=this;e<1?this.timeout=setTimeout((function(){t.row=1}),1e3):clearTimeout(this.timeout)},col:function(e){var t=this;e<1?this.timeout=setTimeout((function(){t.col=1}),1e3):clearTimeout(this.timeout)}}};o("0825");const Rt=I()(Jt,[["render",Pt],["__scopeId","data-v-65c7ceba"]]);var Ut=Rt,Gt={CTS:[{NT:"h",CT:"这是一个大标题",CL:null,SL:!1},{NT:"hr",SL:!1},{NT:"p",CT:"这是一个段落",CL:null,SL:!1},{NT:"floor",SL:!1,CTS:[{NT:"h",CT:"这是层次中的大标题",CL:null,SL:!1},{NT:"p",CT:"这是一个段落",CL:null,SL:!1},{NT:"floor",SL:!1,CTS:[{NT:"h",CT:"这是层次中的大标题",CL:null,SL:!1},{NT:"p",CT:"这是一个段落",CL:null,SL:!1}]}]},{NT:"list",OL:!0,SL:!1,CTS:[{NT:"li",CT:"这是一个列表项",CL:null,SL:!1}]},{NT:"table",SL:!1,CTS:[{CTS:[{CT:"表格项",SL:!1,CL:null},{CT:"表格项",SL:!1,CL:null},{CT:"表格项",SL:!1,CL:null},{CT:"表格项",SL:!1,CL:null}]},{CTS:[{CT:"表格项",SL:!1,CL:null},{CT:"表格项",SL:!1,CL:null},{CT:"表格项",SL:!1,CL:null},{CT:"表格项",SL:!1,CL:null}]}]}]},Ht={name:"App",components:{Note:nt,ControlBalls:X,ToolBar:P,TableSetter:Ut,Colors:xt,TextfieldGroupFixed:Tt},data:function(){return{note:Gt,selectedNode:{location:null,type:null,tagName:null},isDarkMode:!1,isTouchMode:!1,isFullscreen:!1}},provide:function(){return{note:this.note,selectedNode:this.selectedNode}},methods:{toggleDarkMode:function(){this.isDarkMode=!this.isDarkMode},toggleTouchMode:function(){this.isTouchMode=!this.isTouchMode},toggleFullscreen:function(){this.isFullscreen=!this.isFullscreen}}};o("0802");const Kt=I()(Ht,[["render",c]]);var zt=Kt,Qt=(o("5143"),o("38b9"),o("afd3"),o("86be"),o("61fd"),o("8d2a"),o("cde1"),Object(n["b"])(zt));Qt.mount("#app")},"61fd":function(e,t,o){},"69dd":function(e,t,o){},"86be":function(e,t,o){},8819:function(e,t,o){},"89c4":function(e,t,o){"use strict";o("5399")},"8c8d":function(e,t,o){},"8d2a":function(e,t,o){},afd3:function(e,t,o){},b508:function(e,t,o){},cde1:function(e,t,o){},cea4:function(e,t,o){"use strict";o("3143")},d252:function(e,t,o){}});
//# sourceMappingURL=app.610d90ed.js.map