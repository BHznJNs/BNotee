(function(e){function t(t){for(var s,n,l=t[0],d=t[1],a=t[2],b=0,h=[];b<l.length;b++)n=l[b],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&h.push(c[n][0]),c[n]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(e[s]=d[s]);r&&r(t);while(h.length)h.shift()();return i.push.apply(i,a||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],s=!0,l=1;l<o.length;l++){var d=o[l];0!==c[d]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=o[0]))}return e}var s={},c={app:0},i=[];function n(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=s,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var r=d;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0d55":function(e,t,o){"use strict";o("6d2d")},"15cf":function(e,t,o){"use strict";o("cee2")},"38b9":function(e,t,o){},"39de":function(e,t,o){},"3e29":function(e,t,o){"use strict";o("8c71")},"42ed":function(e,t,o){},"475b":function(e,t,o){},"4a16":function(e,t,o){"use strict";o("da3e")},"4b7b":function(e,t,o){"use strict";o("6377")},"4e36":function(e,t,o){},5113:function(e,t,o){"use strict";o("a306")},5143:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var s=o("7a23");function c(e,t,o,c,i,n){const l=Object(s["u"])("tool-bar"),d=Object(s["u"])("control-balls"),a=Object(s["u"])("msgbar"),r=Object(s["u"])("note"),b=Object(s["u"])("fixed-components"),h=Object(s["u"])("anchors");return Object(s["o"])(),Object(s["f"])(s["a"],null,[Object(s["g"])("div",{class:Object(s["m"])(["dark-filter",{darken:i.isDarkMode}])},null,2),Object(s["j"])(l,{isTouchMode:i.isTouchMode},null,8,["isTouchMode"]),Object(s["j"])(d,{isDarkMode:i.isDarkMode,isTouchMode:i.isTouchMode,isFullscreen:i.isFullscreen,onToggleDarkMode:t[0]||(t[0]=e=>i.isDarkMode=!i.isDarkMode),onToggleTouchMode:t[1]||(t[1]=e=>i.isTouchMode=!i.isTouchMode),onToggleFullscreen:t[2]||(t[2]=e=>i.isFullscreen=!i.isFullscreen)},null,8,["isDarkMode","isTouchMode","isFullscreen"]),Object(s["j"])(a),Object(s["j"])(r,{isFullscreen:i.isFullscreen,isTouchMode:i.isTouchMode},null,8,["isFullscreen","isTouchMode"]),Object(s["j"])(b),Object(s["j"])(h)],64)}const i=e=>(Object(s["q"])("data-v-8d502c46"),e=e(),Object(s["p"])(),e),n={class:"toolbar shadow-3"},l={class:"logo shadow-2"},d=i(()=>Object(s["g"])("i",{class:"material-icons"},"info_outline",-1)),a=[d],r=i(()=>Object(s["g"])("i",{class:"material-icons"},"format_list_bulleted",-1)),b=[r],h={class:"tools"},u=i(()=>Object(s["g"])("i",{class:"material-icons"},"add",-1)),j=[u],O=i(()=>Object(s["g"])("i",{class:"material-icons"},"remove",-1)),p=[O],f=i(()=>Object(s["g"])("i",{class:"material-icons"},"indeterminate_check_box",-1)),g=[f],m=i(()=>Object(s["g"])("i",{class:"material-icons"},"color_lens",-1)),v=[m],T=i(()=>Object(s["g"])("i",{class:"material-icons"},"clear_all",-1)),C=[T],N=i(()=>Object(s["g"])("i",{class:"material-icons"},"vertical_align_bottom",-1)),k=[N],y={class:"material-icons file"},w=Object(s["i"])("input "),x={ref:"fileUploader",type:"file",accept:"application/json"};function M(e,t,o,c,i,d){const r=Object(s["u"])("info");return Object(s["o"])(),Object(s["f"])("div",n,[Object(s["j"])(r,{disabled:!i.isInfoWindowShow},null,8,["disabled"]),Object(s["g"])("div",l,[Object(s["g"])("div",{class:Object(s["m"])(["info-outer",{disabled:!i.isInfoIconShow}]),onClick:t[0]||(t[0]=e=>i.isInfoWindowShow=!0)},a,2),Object(s["g"])("div",{class:"logo-outer",onClick:t[1]||(t[1]=(...e)=>d.logoClick&&d.logoClick(...e))},b)]),Object(s["g"])("div",h,[Object(s["g"])("div",{class:Object(s["m"])(["tool btn btn-shallow",{disabled:!d.selectedNode.loc}]),onClick:t[2]||(t[2]=(...e)=>d.openTextfield&&d.openTextfield(...e))},j,2),Object(s["g"])("div",{class:Object(s["m"])(["tool btn btn-shallow",{disabled:!d.selectedNode.loc}]),onClick:t[3]||(t[3]=(...e)=>d.toDeleteNode&&d.toDeleteNode(...e))},p,2),Object(s["B"])(Object(s["g"])("div",{class:Object(s["m"])(["tool btn btn-shallow",{disabled:!d.selectedNode.loc}]),onClick:t[4]||(t[4]=(...e)=>d.nodeCancelSelect&&d.nodeCancelSelect(...e))},g,2),[[s["y"],o.isTouchMode]]),Object(s["g"])("div",{class:Object(s["m"])(["tool btn btn-shallow",{disabled:!["h1","h2","h3","h4","p","li"].includes(d.selectedNode.type)}]),onClick:t[5]||(t[5]=(...e)=>d.openColors&&d.openColors(...e))},v,2),Object(s["g"])("div",{class:"tool btn btn-shallow",onClick:t[6]||(t[6]=(...e)=>d.clearNodes&&d.clearNodes(...e))},C),Object(s["g"])("div",{class:"tool btn btn-shallow",onClick:t[7]||(t[7]=(...e)=>d.saveNote&&d.saveNote(...e))},k),Object(s["g"])("div",{class:"tool btn btn-shallow",onClick:t[8]||(t[8]=(...e)=>d.readNote&&d.readNote(...e))},[Object(s["g"])("i",y,[w,Object(s["g"])("input",x,null,512)])])])])}const L=e=>(Object(s["q"])("data-v-3f43b375"),e=e(),Object(s["p"])(),e),S={class:"info-outer"},_=L(()=>Object(s["g"])("i",{class:"material-icons"},"close",-1)),D=[_],A=L(()=>Object(s["g"])("div",{class:"info"},[Object(s["g"])("h1",null,"关于 | About"),Object(s["g"])("hr"),Object(s["g"])("h2",null,"此 | This"),Object(s["g"])("p",null," 一个运行在浏览器上的笔记程序。| A notebook application works on your Browser. "),Object(s["g"])("hr"),Object(s["g"])("h2",null,"作者 | Author"),Object(s["g"])("p",null,[Object(s["i"])(" GitHub: "),Object(s["g"])("a",{href:"https://github.com/BHznJNs",target:"_blank"},"https://github.com/BHznJNs"),Object(s["g"])("br"),Object(s["i"])(" BiliBili: "),Object(s["g"])("a",{href:"https://space.bilibili.com/274945998",target:"_blank"},"https://space.bilibili.com/274945998"),Object(s["g"])("br")]),Object(s["g"])("hr"),Object(s["g"])("h2",null,"框架 | Framework"),Object(s["g"])("p",null,[Object(s["i"])(" Vue.js "),Object(s["g"])("a",{href:"https://v3.cn.vuejs.org/",target:"_blank"},"https://v3.cn.vuejs.org/"),Object(s["g"])("br"),Object(s["i"])(" MDUI "),Object(s["g"])("a",{href:"https://www.mdui.org/",target:"_blank"},"https://www.mdui.org/")])],-1));function I(e,t,o,c,i,n){const l=Object(s["u"])("window");return Object(s["o"])(),Object(s["e"])(l,{width:"800px",height:"480px",disabled:o.disabled,onClose:n.close},{default:Object(s["A"])(()=>[Object(s["g"])("div",S,[Object(s["g"])("div",{class:"closer shadow-1",onClick:t[0]||(t[0]=(...e)=>n.close&&n.close(...e))},D),A])]),_:1},8,["disabled","onClose"])}const $={class:"window-outer"};function B(e,t,o,c,i,n){return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["window-container",{disabled:o.disabled}])},[Object(s["g"])("div",{class:"fullscreen-mask",onClick:t[0]||(t[0]=(...e)=>n.close&&n.close(...e))}),Object(s["g"])("div",$,[Object(s["g"])("div",{class:"window shadow-16",style:Object(s["n"])({width:o.width,height:o.height})},[Object(s["t"])(e.$slots,"default",{},void 0,!0)],4)])],2)}var E={props:["width","height","disabled"],methods:{close(){this.$emit("close")}}},F=(o("4b7b"),o("6b0d")),H=o.n(F);const U=H()(E,[["render",B],["__scopeId","data-v-6e558882"]]);var V=U,R={components:{Window:V},props:["disabled"],methods:{close(){this.$parent.isInfoWindowShow=!1}}};o("ab97");const G=H()(R,[["render",I],["__scopeId","data-v-3f43b375"]]);var K=G,q={inject:["note"],computed:{getThisObj(){if(!this.location)return;let e;return this.getNodeObj({location:this.location,callback:(t,o)=>{e=t[o]}}),e}},methods:{getNodeObj({parentObj:e=this.note,location:t,num:o=0,callback:s}){o==t.length-1?s&&s(e.CTS,t[o]):this.getNodeObj({parentObj:e.CTS[t[o]],location:t,num:o+1,callback:s})}}};const W=q;var P=W,J={methods:{insertNode(e,t){e&&t&&this.getNodeObj({location:t,callback:(t,o)=>{t.splice(o+1,0,e)}})}}},z={methods:{deleteNode(e){let t;return this.selectedNode.vnode&&(this.selectedNode.loc=null,this.selectedNode.type="",this.selectedNode.vnode=null,this.selectedNode.obj=null),this.getNodeObj({location:e,callback:(e,o)=>{t=e[o],e.splice(o,1)}}),t}}},Q=o("1344"),X=new Q["a"],Y=o("21a6"),Z=o.n(Y),ee={data(){return{isInfoIconShow:!1,isInfoWindowShow:!1}},props:["isTouchMode"],inject:["note","selectedNode"],components:{Info:K},mixins:[P,J,z],mounted(){const e=this.$refs.fileUploader;e.addEventListener("change",()=>{let t=new FileReader;t.readAsText(e.files[0],"uft8"),t.onload=e=>{let t=e.target.result;this.note.CTS=JSON.parse(t),X.emit("note-loaded")}}),X.on("textfield-return-toolBar",e=>{this.toInsertNode(e)})},methods:{logoClick(){this.isInfoIconShow=!0,setTimeout(()=>{this.isInfoIconShow=!1},3e3)},openTextfield(){X.emit("textfield-open","toolBar")},toInsertNode(e){const t=Array.from(this.selectedNode.loc);this.insertNode(e,t),t[t.length-1]+=1,X.emit("add-history",{loc:t,prop:"IST"})},toDeleteNode(){const e=this.selectedNode.loc,t=this.deleteNode(e);e[e.length-1]-=1,X.emit("add-history",{loc:e,prop:"DEL",nodeObj:t})},nodeCancelSelect(){this.selectedNode.vnode.selected=!1,this.selectedNode.loc=null,this.selectedNode.obj=null,this.selectedNode.type=null},openColors(){X.emit("fixedComponents-open","colors")},clearNodes(){this.note.CTS=[],this.note.HT=[],X.emit("clear-history")},saveNote(){let e=new Blob([JSON.stringify(this.note.CTS)],{type:"text/plain;charset=utf-8"});const t=this.note.NM||"MyNote";Z()(e,t+".json")},readNote(){const e=this.$refs.fileUploader;e.click()}}};o("7579");const te=H()(ee,[["render",M],["__scopeId","data-v-8d502c46"]]);var oe=te;const se=e=>(Object(s["q"])("data-v-79141601"),e=e(),Object(s["p"])(),e),ce=se(()=>Object(s["g"])("i",{class:"material-icons"},"add",-1)),ie=[ce];function ne(e,t,o,c,i,n){const l=Object(s["u"])("floor-block"),d=Object(s["u"])("node-renderer"),a=Object(s["u"])("textfield-group");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["note-outer shadow-4",{fullscreen:o.isFullscreen}])},[Object(s["g"])("div",{class:"note",ref:"note",onContextmenu:t[1]||(t[1]=Object(s["D"])(()=>{},["prevent"]))},[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(n.note.CTS,(e,t)=>(Object(s["o"])(),Object(s["f"])(s["a"],{key:e.id},["floor"==e.NT?(Object(s["o"])(),Object(s["e"])(l,{key:0,children:e.CTS,level:2,location:[t]},null,8,["children","location"])):(Object(s["o"])(),Object(s["e"])(d,{key:1,level:1,nodeObj:e,location:[t]},null,8,["nodeObj","location"]))],64))),128)),Object(s["j"])(a,{id:"note-textfield-group",ref:"textfield",isAdding:i.isNodeAdding,onReturnNode:n.closeNodeAdder},null,8,["isAdding","onReturnNode"]),Object(s["g"])("div",{class:Object(s["m"])(["btn-fab adder-btn",{disabled:i.isNodeAdding,fullscreen:o.isFullscreen}]),onClick:t[0]||(t[0]=(...e)=>n.openNodeAdder&&n.openNodeAdder(...e))},ie,2)],544)],2)}o("14d9");const le=["#","`","_","/","-",":"],de={"##":"strong","``":"code",__:"u","//":"i","--":"del","::":"span"};function ae(e){const t=[];let o="",s="";for(let c of e)le.includes(c)?c==s?(t.push({type:"text",content:o.slice(0,-1)}),t.push({type:"key",content:c.repeat(2)}),s="",o=""):(o+=c,s=c):(s.length&&(s=""),o+=c);return o.length&&t.push({type:"text",content:o}),t}function re(e){const t=[];let o="",s="",c="";for(let i of e){const e=i.content;if(o+=e,"key"==i.type)if("key"==s){if(e!=c)continue;const i=de[e];t.push({tagName:i,content:o}),s="",o=""}else s="key",c=e;else"key"!=s&&(t.push({tagName:"text",content:o}),o="")}if(o.length){const e=t[t.length-1];e.content+=o}return t}function be(e,t){return`<${e}>${t}</${e}>`}function he(e){const t=[];for(let o of e)"text"==o.tagName?t.push(o.content):t.push(be(o.tagName,o.content));return t}function ue(e){if(!e)return null;const t=ae(e),o=re(t);let s;s=he(o);const c=s.join("");return c}async function je(){const e=document.getElementsByClassName("inline-style");for(let t of e){const e=t.textContent;if(!e)continue;const o=ue(e,"HTML");t.innerHTML=o}}var Oe={outputer:ue,init:je};const pe=Object(s["g"])("div",{class:"mask"},null,-1);function fe(e,t,o,c,i,n){const l=Object(s["u"])("floor-block",!0),d=Object(s["u"])("node-renderer"),a=Object(s["u"])("block-controls");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["floor shadow-1",{"shadow-3":i.selected,"touch-mode":n.isTouchMode}]),onMouseenter:t[0]||(t[0]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[pe,(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(e,t)=>(Object(s["o"])(),Object(s["f"])(s["a"],{key:e.id},["floor"==e.NT?(Object(s["o"])(),Object(s["e"])(l,{key:0,children:e.CTS,level:o.level+1,location:o.location.concat([t])},null,8,["children","level","location"])):(Object(s["o"])(),Object(s["e"])(d,{key:1,nodeObj:e,level:o.level,location:o.location.concat([t])},null,8,["nodeObj","level","location"]))],64))),128)),Object(s["j"])(a,{disabled:!e.hover,isTouchMode:n.isTouchMode,selected:i.selected,location:o.location,parentType:"floor"},null,8,["disabled","isTouchMode","selected","location"])],34)}var ge={methods:{selectEvent(){this.selected?(X.emit("fixedComponents-close"),this.selectedNode.loc=null,this.selectedNode.vnode=null,this.selectedNode.obj=null,this.selectedNode.type=null,this.selected=!1):(this.selectedNode.loc&&(this.selectedNode.vnode.selected=!1),this.selectedNode.loc=this.location,this.selectedNode.vnode=this,this.selectedNode.obj=this.getThisObj,this.selectedNode.type=this.tagName,this.selected=!0)}}},me={data(){return{selected:!1,initialContent:"",editing:!1,dbTouch:!1}},inject:["selectedNode"],mixins:[P,ge],props:["tagName","content","location","color"],watch:{content(e){this.$nextTick(()=>{const t=Oe.outputer(e);this.$el.innerHTML=t})}},render(){return Object(s["l"])(this.tagName,{contentEditable:!0,class:{selected:this.selected,editing:this.editing,"inline-style":!0},style:{color:this.color},onContextmenu:e=>{e.preventDefault(),this.initialContent||(this.initialContent=e.target.innerText),this.selectEvent()},onTouchstart:()=>{this.dbTouch&&this.selectEvent(),this.dbTouch=!0,setTimeout(()=>{this.dbTouch=!1},300)},onClick:()=>{this.editing||(this.initialContent=this.$el.innerText),this.editing=!0},onBlur:e=>{const t=e.target.innerText;t!=this.initialContent&&(this.getThisObj.CT=t,X.emit("add-history",{loc:this.location,prop:"CT",before:this.initialContent,after:t}),this.initialContent=t),this.editing=!1}},this.content)}};const ve=me;var Te=ve,Ce={props:["level","content","location","color"],components:[Te],mounted(){this.$nextTick(()=>{X.emit("anchor-mounted")})},render(){let e;return e=this.level<6?"h"+this.level:"h5",Object(s["l"])(Te,{tagName:e,id:this.location.join(""),class:"heading",content:this.content,color:this.color,location:this.location})}};const Ne=Ce;var ke=Ne,ye={data(){return{selected:!1,initialContent:"",editing:!1,dbRightClick:!1}},inject:["selectedNode"],mixins:[P,ge],props:["tagName","content","location","color","href"],render(){return Object(s["l"])(this.tagName,{contentEditable:!0,href:this.href,target:"_blank",class:{selected:this.selected,editing:this.editing,"inline-style":!0},style:{color:this.color},onClick:e=>{e.preventDefault(),window.open(this.href),this.$el.blur()},onContextmenu:e=>{e.preventDefault(),this.dbRightClick?this.selectEvent():(this.dbRightClick=!0,setTimeout(()=>{this.dbRightClick=!1},300),this.editing||(this.initialContent=e.target.innerText),this.editing=!0)},onBlur:e=>{const t=e.target.innerText;t!=this.initialContent&&(this.getThisObj.CT=t,X.emit("add-history",{loc:this.location,prop:"CT",before:this.initialContent,after:t}),this.initialContent=t),this.editing=!1}},this.content)}};const we=ye;var xe=we;const Me=Object(s["g"])("div",{class:"mask"},null,-1),Le=Object(s["g"])("i",{class:"material-icons"},"playlist_add",-1),Se=[Le],_e={class:"material-icons"},De={class:"material-icons"};function Ae(e,t,o,c,i,n){const l=Object(s["u"])("list-block",!0),d=Object(s["u"])("basic-node"),a=Object(s["u"])("list-child"),r=Object(s["u"])("block-controls");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["list",{"shadow-2":i.selected,hover:e.hover,empty:!o.children.length,"touch-mode":n.isTouchMode,nested:i.isNested}]),onMouseenter:t[2]||(t[2]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[Me,Object(s["j"])(a,{ordered:o.isOrdered},{default:Object(s["A"])(()=>[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(t,c)=>(Object(s["o"])(),Object(s["f"])(s["a"],{key:t.id},["list"==t.NT?(Object(s["o"])(),Object(s["e"])(l,{key:0,isOrdered:t.OL,children:t.CTS,location:o.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["isOrdered","children","location","onMouseInChild"])):(Object(s["o"])(),Object(s["e"])(d,{key:1,tagName:"li",content:t.CT,color:t.CL,location:o.location.concat([c])},null,8,["content","color","location"]))],64))),128))]),_:1},8,["ordered"]),Object(s["j"])(r,{disabled:!e.hover,isTouchMode:n.isTouchMode,selected:i.selected,location:o.location,parentType:"list"},{default:Object(s["A"])(()=>[Object(s["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=(...e)=>n.addListBlock&&n.addListBlock(...e))},Se),Object(s["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[1]||(t[1]=(...e)=>n.toggleOrdered&&n.toggleOrdered(...e))},[Object(s["B"])(Object(s["g"])("i",_e,"format_list_bulleted",512),[[s["y"],o.isOrdered]]),Object(s["B"])(Object(s["g"])("i",De,"format_list_numbered",512),[[s["y"],!o.isOrdered]])])]),_:1},8,["disabled","isTouchMode","selected","location"])],34)}const Ie=e=>(Object(s["q"])("data-v-04fa293f"),e=e(),Object(s["p"])(),e),$e=Ie(()=>Object(s["g"])("i",{class:"material-icons"},"add",-1)),Be=[$e],Ee={class:"checkbox"},Fe=["checked"];function He(e,t,o,c,i,n){return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["controls",{disabled:o.disabled&&!o.isTouchMode,"touch-mode":o.isTouchMode}])},[Object(s["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=(...t)=>e.addNode&&e.addNode(...t))},Be),Object(s["t"])(e.$slots,"default",{},void 0,!0),Object(s["g"])("label",Ee,[Object(s["g"])("input",{type:"checkbox",ref:"checkbox",checked:o.selected,onChange:t[1]||(t[1]=(...e)=>n.selectEvent&&n.selectEvent(...e))},null,40,Fe),Object(s["g"])("i",{class:"checkbox-icon",onTouchstart:t[2]||(t[2]=(...e)=>n._touchstart&&n._touchstart(...e)),onTouchend:t[3]||(t[3]=(...e)=>n._touchend&&n._touchend(...e))},null,32)])],2)}var Ue={methods:{tableAdder(e){const t=e.length,o=e[0].length;let s=[];for(let c=0;c<o;c++)s.push("");e.push(s),X.emit("add-history",{loc:this.location,prop:"ROW",before:t,after:t+1})},detailAdder(e){e.push({CT:"",CL:"#333"});const t=Object.create(this.location);t.push(e.length-1),X.emit("add-history",{loc:t,prop:"IST"})},listAdder(e){e.push({NT:"li",CT:"",CL:"#333"});const t=Object.create(this.location);t.push(e.length-1),X.emit("add-history",{loc:t,prop:"IST"})},floorAdder(e){X.off("textfield-return-"+this.parentType),X.on("textfield-return-"+this.parentType,t=>{t&&e.push(t);const o=Array.from(this.location);o.push(e.length-1),X.emit("add-history",{loc:o,prop:"IST"}),X.off("textfield-return-"+this.parentType)}),X.emit("textfield-open",this.parentType)},addNode(){const e=this.getThisObj.CTS;switch(this.parentType){case"table":this.tableAdder(e);break;case"details":this.detailAdder(e);break;case"list":this.listAdder(e);break;case"floor":this.floorAdder(e)}}}},Ve={data(){return{timeout:null}},props:["isTouchMode","parentType","disabled","location","selected"],inject:["selectedNode"],mixins:[P,Ue],methods:{_touchstart(){this.timeout=setTimeout(()=>{this.addNode()},1e3)},_touchend(){clearTimeout(this.timeout)},selectEvent(){const e=this.$refs.checkbox.checked;this.$parent.selected=e,e?(this.selectedNode.loc&&(this.selectedNode.vnode.selected=!1),this.selectedNode.loc=this.location,this.selectedNode.vnode=this.$parent,this.selectedNode.type=this.parentType,"list"==this.parentType&&(this.selectedNode.type=this.$parent.isNested?"nestedList":"notNestedList")):(this.selectedNode.loc=null,this.selectedNode.vnode=null,this.selectedNode.type=null)}}};o("83d0"),o("c436");const Re=H()(Ve,[["render",He],["__scopeId","data-v-04fa293f"]]);var Ge=Re,Ke={data(){return{hover:!1,setTimeout:null}},methods:{onMouseEnter(){this.setTimeout=setTimeout(()=>{this.hover=!0},400)},onMouseLeave(){clearTimeout(this.setTimeout),this.selected||(this.hover=!1)}}},qe={name:"list-block",data(){return{selected:!1,isNested:null}},components:{BasicNode:Te,BlockControls:Ge,listChild:{props:["ordered"],render(){return Object(s["l"])(this.ordered?"ol":"ul",this.$slots.default())}}},props:["children","isOrdered","location"],inject:["isTouchMode"],mixins:[P,Ke],methods:{addListBlock(){const e=this.getThisObj.CTS;e.push({NT:"list",OL:!1,CTS:[{NT:"li",CT:"",CL:"#333"}]});const t=Object.create(this.location);t.push(e.length-1),X.emit("add-history",{loc:t,prop:"IST"})},toggleOrdered(){this.getThisObj.OL=!this.getThisObj.OL}},mounted(){const e=this.$el.parentNode;this.isNested="OL"==e.tagName||"UL"==e.tagName}};const We=H()(qe,[["render",Ae]]);var Pe=We;const Je=Object(s["g"])("div",{class:"mask"},null,-1),ze=Object(s["g"])("i",{class:"material-icons"},"grid_on",-1),Qe=[ze];function Xe(e,t,o,c,i,n){const l=Object(s["u"])("table-row"),d=Object(s["u"])("block-controls");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["table shadow-1",{"shadow-3":i.selected,"touch-mode":n.isTouchMode,hover:e.hover&&!n.isTouchMode}]),onMouseenter:t[1]||(t[1]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[Je,Object(s["g"])("table",null,[Object(s["g"])("tbody",null,[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(e,t)=>(Object(s["o"])(),Object(s["e"])(l,{key:e.id,children:e,location:o.location.concat(t)},null,8,["children","location"]))),128))])]),Object(s["j"])(d,{isTouchMode:n.isTouchMode,disabled:!e.hover,selected:i.selected,location:o.location,parentType:"table"},{default:Object(s["A"])(()=>[Object(s["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=(...e)=>n.openTableSetter&&n.openTableSetter(...e))},Qe)]),_:1},8,["isTouchMode","disabled","selected","location"])],34)}const Ye=["onBlur"];function Ze(e,t,o,c,i,n){return Object(s["o"])(),Object(s["f"])("tr",null,[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(e,o)=>(Object(s["o"])(),Object(s["f"])("td",{key:e.id,onClick:t[0]||(t[0]=(...e)=>n.edit&&n.edit(...e)),onContextmenu:t[1]||(t[1]=(...e)=>n.edit&&n.edit(...e)),onBlur:e=>n.finishEdit(e,o),contenteditable:"true"},Object(s["w"])(e),41,Ye))),128))])}var et={mixins:[P],props:["children","location"],methods:{edit(e){let t=e.target;t.classList.add("editing")},finishEdit(e,t){let o=e.target;o.classList.remove("editing");let s=o.innerText;this.getThisObj[t]=s}}};const tt=H()(et,[["render",Ze]]);var ot=tt,st={data(){return{selected:!1}},props:["children","location"],inject:["isTouchMode"],mixins:[Ke],components:{TableRow:ot,BlockControls:Ge},methods:{openTableSetter(){X.emit("fixedComponents-open","tableSetter"),X.emit("table-location",this.location)}}};const ct=H()(st,[["render",Xe]]);var it=ct;function nt(e,t,o,c,i,n){const l=Object(s["u"])("basic-node"),d=Object(s["u"])("block-controls");return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["details",{"shadow-2":i.selected,hover:e.hover,"touch-mode":n.isTouchMode}]),onMouseenter:t[2]||(t[2]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[Object(s["g"])("summary",{class:"summary",contenteditable:"true",ref:"summary",onBlur:t[0]||(t[0]=(...e)=>n.finishEdit&&n.finishEdit(...e))},Object(s["w"])(o.summary),545),Object(s["g"])("details",null,[Object(s["g"])("summary",{onContextmenu:t[1]||(t[1]=t=>e.$refs.summary.focus()),style:{"line-height":"1.4"}},null,32),(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.children,(e,t)=>(Object(s["o"])(),Object(s["e"])(l,{key:e.id,tagName:"p",content:e.CT,color:e.CL,location:o.location.concat([t])},null,8,["content","color","location"]))),128))]),Object(s["j"])(d,{disabled:!e.hover,isTouchMode:n.isTouchMode,selected:i.selected,location:o.location,parentType:"details"},null,8,["disabled","isTouchMode","selected","location"])],34)}var lt={data(){return{selected:!1}},components:{BasicNode:Te,BlockControls:Ge},mixins:[P,Ke],inject:["isTouchMode"],props:["children","summary","location"],methods:{finishEdit(e){const t=e.target,o=t.innerText;X.emit("add-history",{loc:this.location,prop:"SUM",before:this.getThisObj.SUM,after:o}),this.getThisObj.SUM=o}}};o("8897");const dt=H()(lt,[["render",nt],["__scopeId","data-v-7df230aa"]]);var at=dt;function rt(e,t,o,c,i,n){const l=Object(s["u"])("highlightjs");return t[0]||(Object(s["v"])(-1),t[0]=Object(s["j"])(l,{code:o.code,language:o.language,autodetect:!1,onFocusout:n.render,onContextmenu:n.select,tabindex:"0"},null,8,["code","language","onFocusout","onContextmenu"]),Object(s["v"])(1),t[0])}var bt=o("d383"),ht=o.n(bt),ut=o("b056");function jt(e,t="end"){const o=window.getSelection(),s=o.getRangeAt(0),c=document.createTextNode(e);s.insertNode(c),"start"==t?o.collapseToStart():"end"==t?o.collapseToEnd():console.warn("Unknown direction type!")}function Ot(e){e.preventDefault(),jt("    ")}const pt=new Map([[")","("],["]","["],["}","{"],[">","<"]]),ft=["html","xml","xhtml","svg","rss"];function gt(e,t){setTimeout(()=>{t?(jt(pt.get(e)+"\n    "),jt("\n"+e,"start")):jt(e,"start")},150)}var mt={methods:{codeInput(e){switch(e.keyCode){case 9:Ot(e);break;case 57:e.shiftKey&&gt(")",e.altKey);break;case 219:e.shiftKey?gt("}",e.altKey):gt("]",e.altKey);break;case 188:ft.includes(this.language)&&gt(">");break;case 222:e.shiftKey?gt('"'):gt("'");break;case 192:gt("`",e.altKey);break}}}},vt={data(){return{tagName:"code",codeNode:null,selected:!1}},components:{highlightjs:ut["a"].component},mixins:[P,ge,mt],inject:["selectedNode"],props:["language","code","location"],watch:{code(e){this.codeNode.innerHTML=e,ht.a.highlightElement(this.codeNode)}},methods:{render(){let e=this.codeNode.innerText;e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");const t=this.getThisObj.CT,o=e;o!=t&&(X.emit("add-history",{loc:this.location,prop:"CT",before:this.getThisObj.CT,after:e}),this.getThisObj.CT=e)},select(){this.selectEvent(),this.codeNode.classList.toggle("selected",this.selected)}},mounted(){this.codeNode=this.$el.querySelector("code"),this.codeNode.contentEditable=!0,this.codeNode.addEventListener("keydown",this.codeInput),this.$nextTick(()=>{this.codeNode.innerHTML=this.code,ht.a.highlightElement(this.codeNode)})}};o("bde3");const Tt=H()(vt,[["render",rt]]);var Ct=Tt,Nt={props:["nodeObj","level","location"],render(){let e,t={location:this.location};switch(this.nodeObj.NT){case"h":e=ke,t.level=this.level,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL;break;case"link":e=xe,t.tagName="a",t.content=this.nodeObj.CT,t.color=this.nodeObj.CL,t.href=this.nodeObj.HF;break;case"list":e=Pe,t.isOrdered=this.nodeObj.OL,t.children=this.nodeObj.CTS;break;case"table":e=it,t.children=this.nodeObj.CTS;break;case"details":e=at,t.summary=this.nodeObj.SUM,t.children=this.nodeObj.CTS;break;case"code":e=Ct,t.language=this.nodeObj.LG,t.code=this.nodeObj.CT;break;default:e=Te,t.tagName=this.nodeObj.NT,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL}return Object(s["l"])(e,t)}};const kt=Nt;var yt=kt,wt={name:"floor-block",components:{BlockControls:Ge,NodeRenderer:yt},data(){return{selected:!1}},props:["level","location","children"],inject:["isTouchMode"],mixins:[Ke]};const xt=H()(wt,[["render",fe]]);var Mt=xt;const Lt={class:"selector",ref:"selector"},St=Object(s["h"])('<option value="h">标题</option><option value="p">段落</option><option value="link">链接</option><option value="hr">割线</option><option value="floor">层次</option><option value="ol">序列</option><option value="ul">乱列</option><option value="code">代码</option><option value="table">表格</option><option value="details">详情</option>',10),_t=[St],Dt=Object(s["g"])("i",{class:"material-icons"},"close",-1),At=[Dt];function It(e,t,o,c,i,n){return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["textfield-group shadow-2",{disabled:!o.isAdding}])},[Object(s["g"])("select",Lt,_t,512),Object(s["g"])("div",{class:"textfield",contenteditable:"true",ref:"inputter",onKeydown:t[0]||(t[0]=Object(s["C"])(Object(s["D"])((...e)=>n.enter&&n.enter(...e),["prevent"]),["enter"]))},null,544),Object(s["g"])("div",{class:"textfield-closer closer",onClick:t[1]||(t[1]=e=>n.closeNodeAdder())},At)],2)}var $t=(e,t)=>{if(!t)return null;let o={NT:e};switch(e){case"h":case"p":case"li":o.CT=t,o.CL="#333";break;case"link":o.HF=t,o.CT="",o.CL="#333";break;case"hr":break;case"floor":o.CTS=[{NT:"h",CT:t,CL:"#333"}];break;case"ol":o.NT="list",o.CTS=[{NT:"li",CT:t,CL:"#333"}],o.OL=!0;break;case"ul":o.NT="list",o.CTS=[{NT:"li",CT:t,CL:"#333"}],o.OL=!1;break;case"code":o.LG=t,o.CT="";break;case"table":o.CTS=[[t,"","",""],["","","",""]];break;case"details":o.SUM=t,o.CTS=[{CT:"",CL:"#333"}];break}return o},Bt={props:["isAdding"],inject:["note"],methods:{focus(){const e=this.$refs.inputter;e.focus()},enter(){this.closeNodeAdder()},closeNodeAdder(){const e=this.$refs.selector,t=this.$refs.inputter,o=e.value,s=t.innerText,c=$t(o,s);this.$emit("return-node",c),t.blur(),t.innerText=""}}};const Et=H()(Bt,[["render",It]]);var Ft=Et,Ht={components:{FloorBlock:Mt,NodeRenderer:yt,TextfieldGroup:Ft},data(){return{isNodeAdding:!1}},props:["isFullscreen"],inject:["note"],created(){addEventListener("keydown",e=>{const t=e.altKey,o=e.key;t&&"a"==o&&(e.preventDefault(),this.openNodeAdder())})},mounted(){this.$nextTick(()=>{Oe.init()}),X.on("note-loaded",()=>{this.$nextTick(()=>{Oe.init()})})},methods:{openNodeAdder(){location.href="#note-textfield-group",this.isNodeAdding=!0,this.$nextTick(()=>{this.$refs.textfield.focus()})},closeNodeAdder(e){this.isNodeAdding=!1;const t=this.note.CTS;e&&t.push(e);const o=[t.length-1];X.emit("add-history",{loc:o,prop:"IST"})}},watch:{isFullscreen(e,t){e!=t&&(this.$refs.note.style.display="none",setTimeout(()=>{this.$refs.note.style.display="block"},1200))}}};o("8a36");const Ut=H()(Ht,[["render",ne],["__scopeId","data-v-79141601"]]);var Vt=Ut;function Rt(e,t,o,c,i,n){const l=Object(s["u"])("anchors-view"),d=Object(s["u"])("drawer");return Object(s["o"])(),Object(s["f"])("div",null,[Object(s["j"])(d,{title:"笔记摘要",disabled:i.drawerDisabled,onCloseDrawer:t[0]||(t[0]=e=>i.drawerDisabled=!0)},{default:Object(s["A"])(()=>[Object(s["j"])(l,{list:i.anchorList},null,8,["list"])]),_:1},8,["disabled"])])}const Gt={class:"titlebar shadow-4"},Kt={class:"closer circle"},qt={class:"drawer-view"};function Wt(e,t,o,c,i,n){return Object(s["o"])(),Object(s["f"])(s["a"],null,[Object(s["g"])("div",{class:Object(s["m"])(["fullscreen-mask",{disabled:o.disabled}]),onClick:t[0]||(t[0]=(...e)=>n.close&&n.close(...e))},null,2),Object(s["g"])("div",{class:Object(s["m"])(["drawer",{disabled:o.disabled}])},[Object(s["g"])("div",Gt,[Object(s["g"])("div",Kt,[Object(s["g"])("i",{class:"material-icons arrow-forward",onClick:t[1]||(t[1]=(...e)=>n.close&&n.close(...e))},"arrow_forward"),Object(s["g"])("i",{class:"material-icons arrow-upward",onClick:t[2]||(t[2]=(...e)=>n.close&&n.close(...e))},"arrow_upward")]),Object(s["g"])("h1",null,Object(s["w"])(o.title),1)]),Object(s["g"])("div",qt,[Object(s["t"])(e.$slots,"default")])],2)],64)}var Pt={props:["title","disabled"],emits:["close-drawer"],methods:{close(){this.$emit("close-drawer")}}};o("aee9");const Jt=H()(Pt,[["render",Wt]]);var zt=Jt,Qt={data(){return{drawerDisabled:!0,anchorList:[],timeout:null}},components:{Drawer:zt,AnchorsView:{props:["list"],render(){let e=this.list.map(e=>Object(s["l"])("a",{level:e.level,href:"#"+e.href},e.content));return Object(s["l"])("div",e)}}},inject:["note"],methods:{getAnchors(){const e=document.querySelectorAll(".heading");let t=[];for(let o of e)t.push({level:o.tagName,href:o.id,content:o.innerText});return t},close(){this.drawerDisabled=!0}},mounted(){X.on("open-anchors",()=>{this.drawerDisabled=!1}),X.on("anchor-mounted",()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout(()=>{this.anchorList=this.getAnchors()})})}};const Xt=H()(Qt,[["render",Rt]]);var Yt=Xt;const Zt=e=>(Object(s["q"])("data-v-c8fd90ac"),e=e(),Object(s["p"])(),e),eo=Zt(()=>Object(s["g"])("div",{class:"block"},[Object(s["g"])("div",{class:"mask"}),Object(s["g"])("i",{class:"material-icons"},"apps")],-1)),to=Zt(()=>Object(s["g"])("i",{class:"material-icons"},"subtitles",-1)),oo=[to],so={class:"material-icons"},co={class:"material-icons"},io=Zt(()=>Object(s["g"])("i",{class:"material-icons"},"touch_app",-1)),no=[io],lo={class:"material-icons"},ao={class:"material-icons"};function ro(e,t,o,c,i,n){return Object(s["o"])(),Object(s["f"])("div",{class:Object(s["m"])(["controlballs",{fullscreen:o.isFullscreen}])},[eo,Object(s["g"])("div",{class:"ball btn",onClick:t[0]||(t[0]=(...e)=>n.openAnchors&&n.openAnchors(...e))},oo),Object(s["g"])("div",{class:"ball btn",onClick:t[1]||(t[1]=t=>e.$emit("toggle-darkMode"))},[Object(s["B"])(Object(s["g"])("i",so,"brightness_2",512),[[s["y"],!o.isDarkMode]]),Object(s["B"])(Object(s["g"])("i",co,"wb_sunny",512),[[s["y"],o.isDarkMode]])]),Object(s["g"])("div",{class:Object(s["m"])(["ball btn",{black:o.isTouchMode}]),onClick:t[2]||(t[2]=t=>e.$emit("toggle-touchMode"))},no,2),Object(s["g"])("div",{class:"ball btn",onClick:t[3]||(t[3]=t=>e.$emit("toggle-fullscreen"))},[Object(s["B"])(Object(s["g"])("i",lo,"fullscreen",512),[[s["y"],!o.isFullscreen]]),Object(s["B"])(Object(s["g"])("i",ao,"fullscreen_exit",512),[[s["y"],o.isFullscreen]])])],2)}var bo={props:["isDarkMode","isTouchMode","isFullscreen"],emits:["toggle-darkMode","toggle-touchMode","toggle-fullscreen"],methods:{openAnchors(){X.emit("open-anchors")}}};o("0d55");const ho=H()(bo,[["render",ro],["__scopeId","data-v-c8fd90ac"]]);var uo=ho;function jo(e,t,o,c,i,n){const l=Object(s["u"])("textfield-group-fixed"),d=Object(s["u"])("colors"),a=Object(s["u"])("table-setter"),r=Object(s["u"])("history");return Object(s["o"])(),Object(s["f"])("div",null,[Object(s["j"])(l,{onClose:n.close,disabled:i.textfieldGroupDisabled},null,8,["onClose","disabled"]),Object(s["j"])(d,{onClose:n.close,disabled:i.colorsDisabled},null,8,["onClose","disabled"]),Object(s["j"])(a,{onClose:n.close,disabled:i.tableSetterDisabled},null,8,["onClose","disabled"]),Object(s["j"])(r,{disabled:i.historyDisabled},null,8,["disabled"])])}const Oo={class:"textfield-group fixed-component fixed"},po={class:"selector",ref:"selector"},fo=Object(s["g"])("option",{value:"h"},"标题",-1),go=Object(s["g"])("option",{value:"p"},"段落",-1),mo=Object(s["g"])("option",{value:"link"},"链接",-1),vo=Object(s["g"])("option",{value:"hr"},"割线",-1),To=Object(s["g"])("option",{value:"floor"},"层次",-1),Co=Object(s["g"])("option",{value:"ol"},"序列",-1),No=Object(s["g"])("option",{value:"ul"},"乱列",-1),ko=Object(s["g"])("option",{value:"code"},"代码",-1),yo=Object(s["g"])("option",{value:"table"},"表格",-1),wo=Object(s["g"])("option",{value:"details"},"详情",-1),xo=[fo,go,mo,vo,To,Co,No,ko,yo,wo],Mo={class:"selector",ref:"selector4List"},Lo=Object(s["g"])("option",{value:"li"},"列项",-1),So=Object(s["g"])("option",{value:"ol"},"序列",-1),_o=Object(s["g"])("option",{value:"ul"},"乱列",-1),Do=[Lo,So,_o],Ao=Object(s["g"])("i",{class:"material-icons"},"close",-1),Io=[Ao];function $o(e,t,o,c,i,n){return Object(s["o"])(),Object(s["e"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",Oo,[Object(s["B"])(Object(s["g"])("select",po,xo,512),[[s["y"],!n.isFromNestedList]]),Object(s["B"])(Object(s["g"])("select",Mo,Do,512),[[s["y"],n.isFromNestedList]]),Object(s["g"])("div",{class:"textfield",ref:"inputer",contenteditable:"true",onKeydown:t[0]||(t[0]=Object(s["C"])((...e)=>n.onEnter&&n.onEnter(...e),["enter"]))},null,544),Object(s["g"])("div",{class:"textfield-closer closer",onClick:t[1]||(t[1]=(...e)=>n.closeTextfield&&n.closeTextfield(...e))},Io)],512),[[s["y"],!o.disabled]])]),_:1})}var Bo={data(){return{commandFrom:""}},props:["disabled"],inject:["selectedNode"],computed:{isFromNestedList(){return"list"==this.commandFrom||["li","nestedList"].includes(this.selectedNode.type)}},mounted(){X.on("textfield-open",e=>{this.commandFrom=e})},methods:{onEnter(e){e.altKey&&(e.preventDefault(),this.closeTextfield())},closeTextfield(){this.$emit("close","textfieldGroup");const e=this.isFromNestedList?this.$refs.selector4List.value:this.$refs.selector.value,t=this.$refs.inputer.innerText,o=$t(e,t);X.emit("textfield-return-"+this.commandFrom,o),this.$refs.inputer.blur(),this.$refs.inputer.innerText=""}}};const Eo=H()(Bo,[["render",$o]]);var Fo=Eo;const Ho=e=>(Object(s["q"])("data-v-0a22116a"),e=e(),Object(s["p"])(),e),Uo={class:"colors fixed-component"},Vo=["onClick"],Ro={class:"input-group"},Go=Ho(()=>Object(s["g"])("i",{class:"material-icons"},"close",-1)),Ko=[Go];function qo(e,t,o,c,i,n){return Object(s["o"])(),Object(s["e"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",Uo,[(Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(i.colors,e=>(Object(s["o"])(),Object(s["f"])("div",{key:e.id,class:"color btn btn-shallow",style:Object(s["n"])({"background-color":e}),onClick:t=>n.setColor(e)},null,12,Vo))),128)),Object(s["g"])("div",Ro,[Object(s["g"])("div",{class:"hint",onClick:t[0]||(t[0]=t=>e.$refs.colorInputter.click())},"#"),Object(s["B"])(Object(s["g"])("input",{type:"color",ref:"colorInputter","onUpdate:modelValue":t[1]||(t[1]=e=>i.colorValue=e)},null,512),[[s["y"],!1],[s["x"],i.colorValue]]),Object(s["B"])(Object(s["g"])("input",{class:"inputter",placeholder:"******",type:"text",maxlength:"8","onUpdate:modelValue":t[2]||(t[2]=e=>i.colorValue=e)},null,512),[[s["x"],i.colorValue]])]),Object(s["g"])("div",{class:"closer",onClick:t[3]||(t[3]=t=>e.$emit("close","colors"))},Ko)],512),[[s["y"],!o.disabled]])]),_:1})}var Wo={data(){return{colors:["#D50000","#FFD600","#333"],colorValue:"",timeout:null}},props:["disabled"],inject:["selectedNode"],mixins:[P],methods:{getColor(){const e=this.selectedNode.obj,t=e.CL;this.colorValue=t},setColor(e){const t=this.selectedNode.loc,o=this.selectedNode.obj,s=o.CL;o.CL=e,X.emit("add-history",{loc:t,prop:"CL",before:s,after:e})}},watch:{colorValue(e){clearTimeout(this.timeout),this.colorValue=e.replace("#",""),this.timeout=setTimeout(()=>{this.setColor("#"+this.colorValue)},300)},disabled(e){e||this.getColor()}}};o("3e29");const Po=H()(Wo,[["render",qo],["__scopeId","data-v-0a22116a"]]);var Jo=Po;const zo=e=>(Object(s["q"])("data-v-75915245"),e=e(),Object(s["p"])(),e),Qo={class:"table-setter fixed-component"},Xo={class:"input-group"},Yo=zo(()=>Object(s["g"])("i",{class:"hint material-icons"},"view_headline",-1)),Zo={class:"input-group"},es=zo(()=>Object(s["g"])("i",{class:"hint material-icons"},"view_column",-1)),ts=zo(()=>Object(s["g"])("i",{class:"material-icons"},"check",-1)),os=[ts],ss=zo(()=>Object(s["g"])("i",{class:"material-icons"},"close",-1)),cs=[ss];function is(e,t,o,c,i,n){return Object(s["o"])(),Object(s["e"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",Qo,[Object(s["g"])("div",Xo,[Yo,Object(s["B"])(Object(s["g"])("input",{class:"inputter",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[0]||(t[0]=e=>i.row=e)},null,512),[[s["x"],i.row]])]),Object(s["g"])("div",Zo,[es,Object(s["B"])(Object(s["g"])("input",{class:"inputter",type:"text",placeholder:" > 0 ",maxlength:"3","onUpdate:modelValue":t[1]||(t[1]=e=>i.col=e)},null,512),[[s["x"],i.col]])]),Object(s["g"])("div",{class:"closer",onClick:t[2]||(t[2]=(...e)=>n.tableSet&&n.tableSet(...e))},os),Object(s["g"])("div",{class:"closer",onClick:t[3]||(t[3]=t=>e.$emit("close","tableSetter"))},cs)],512),[[s["y"],!o.disabled]])]),_:1})}var ns={data(){return{row:1,col:1,targetNode:null,targetNodeLoc:[],timeout:null}},props:["disabled"],mixins:[P],mounted(){const e={ROW:"row",COL:"col"};X.on("table-location",e=>{this.tableGet(e)}),X.on("table-edit",({historyObj:t,resultValue:o})=>{this.tableGet(t.loc);const s=e[t.prop];this[s]=t[o],this.tableSet(!1)})},methods:{eventListen(e){const t=e.key;"Enter"==t&&this.tableSet(!0)},tableGet(e){e&&(this.targetNodeLoc=e,this.getNodeObj({location:e,callback:(e,t)=>{this.targetNode=e[t]}})),this.row=this.targetNode.CTS.length,this.col=this.targetNode.CTS[0].length},tableSet(e){const t=this.targetNode.CTS.length,o=this.targetNode.CTS[0].length,s=Math.abs(this.row-t),c=Math.abs(this.col-o);if(this.col!=o)if(e&&X.emit("add-history",{loc:this.targetNodeLoc,prop:"COL",before:o,after:this.col}),this.col>o)for(let i of this.targetNode.CTS)for(let e=0;e<c;e++)i.push("");else for(let i of this.targetNode.CTS)for(let e=0;e<c;e++)i.pop();if(this.row!=t)if(e&&X.emit("add-history",{loc:this.targetNodeLoc.loc,prop:"ROW",before:t,after:this.row}),this.row>t){let e=[];for(let t=0;t<this.col;t++)e.push("");for(let t=0;t<s;t++)this.targetNode.CTS.push([...e])}else for(let i=0;i<s;i++)this.targetNode.CTS.pop()}},watch:{disabled(e){e?(this.targetNode=null,this.targetNodeLoc=[],removeEventListener("keydown",this.eventListen)):addEventListener("keydown",this.eventListen)},row(e){e<1?this.timeout=setTimeout(()=>{this.row=1},1e3):clearTimeout(this.timeout)},col(e){e<1?this.timeout=setTimeout(()=>{this.col=1},1e3):clearTimeout(this.timeout)}}};o("15cf");const ls=H()(ns,[["render",is],["__scopeId","data-v-75915245"]]);var ds=ls;const as=e=>(Object(s["q"])("data-v-5fab3036"),e=e(),Object(s["p"])(),e),rs={class:"history fixed-component"},bs=as(()=>Object(s["g"])("i",{class:"material-icons"},"undo",-1)),hs=[bs],us=as(()=>Object(s["g"])("i",{class:"material-icons"},"redo",-1)),js=[us],Os=as(()=>Object(s["g"])("i",{class:"material-icons"},"menu",-1)),ps=[Os];function fs(e,t,o,c,i,n){const l=Object(s["u"])("history-view"),d=Object(s["u"])("drawer");return Object(s["o"])(),Object(s["f"])(s["a"],null,[Object(s["j"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",rs,[Object(s["g"])("div",{class:Object(s["m"])(["btn btn-shallow",{disabled:i.historyIndex==n.note.HT.length-1}]),onClick:t[0]||(t[0]=e=>n.doit("undo"))},hs,2),Object(s["g"])("div",{class:Object(s["m"])(["btn btn-shallow",{disabled:i.historyIndex<0}]),onClick:t[1]||(t[1]=e=>n.doit("redo"))},js,2),Object(s["g"])("div",{class:Object(s["m"])(["btn btn-shallow",{disabled:!n.note.HT.length}]),onClick:t[2]||(t[2]=e=>i.drawerDisabled=!1)},ps,2)],512),[[s["y"],!o.disabled]])]),_:1}),Object(s["j"])(d,{title:"编辑历史",disabled:i.drawerDisabled,onCloseDrawer:t[3]||(t[3]=e=>i.drawerDisabled=!0)},{default:Object(s["A"])(()=>[Object(s["j"])(l,{list:n.note.HT,index:i.historyIndex},null,8,["list","index"])]),_:1},8,["disabled"])],64)}o("3c65");const gs=e=>(Object(s["q"])("data-v-45d2a3a0"),e=e(),Object(s["p"])(),e),ms=gs(()=>Object(s["g"])("span",{class:"history-prop"},"位置：",-1)),vs={class:"loc"},Ts=gs(()=>Object(s["g"])("span",{class:"history-prop"},"属性：",-1)),Cs={class:"prop"},Ns=gs(()=>Object(s["g"])("span",{class:"history-prop"},"改前：",-1)),ks=["title"],ys=gs(()=>Object(s["g"])("span",{class:"history-prop"},"改后：",-1)),ws=["title"],xs=["data-index"];function Ms(e,t,o,c,i,n){return Object(s["o"])(!0),Object(s["f"])(s["a"],null,Object(s["s"])(o.list,(e,o)=>(Object(s["o"])(),Object(s["f"])("div",{class:"history-block",key:e.id,ref_for:!0,ref:"historyBlock"},[Object(s["g"])("div",null,[ms,Object(s["g"])("span",vs,Object(s["w"])(e.loc),1)]),Object(s["g"])("div",null,[Ts,Object(s["g"])("span",Cs,Object(s["w"])(i.propsDict[e.prop]),1)]),Object(s["B"])(Object(s["g"])("div",null,[Ns,Object(s["g"])("span",{class:"text",title:e.before},Object(s["w"])(e.before),9,ks)],512),[[s["y"],e.before]]),Object(s["B"])(Object(s["g"])("div",null,[ys,Object(s["g"])("span",{class:"text",title:e.after},Object(s["w"])(e.after),9,ws)],512),[[s["y"],e.after]]),Object(s["g"])("div",{class:"btn btn-shallow",onClick:t[0]||(t[0]=(...e)=>n.doSome&&n.doSome(...e))},[Object(s["g"])("i",{class:"material-icons","data-index":o},"check",8,xs)])]))),128)}var Ls={props:["list","index"],data(){return{propsDict:{CT:"内容",CL:"颜色",SUM:"题目",ROW:"行数",COL:"列数",IST:"插入",DEL:"删除"}}},methods:{doSome(e){const t=e.target,o=t.dataset["index"],s=this.$parent.$parent;s.doSome(o)}},watch:{index(e,t){const o=this.$el.parentNode,s=o.children[e],c=o.children[t];e>-1&&s.classList.add("selected"),t>-1&&c.classList.remove("selected")}}};o("9fa6");const Ss=H()(Ls,[["render",Ms],["__scopeId","data-v-45d2a3a0"]]);var _s=Ss,Ds={data(){return{drawerDisabled:!0,historyIndex:-1}},components:{Drawer:zt,HistoryView:_s},props:["disabled"],inject:["note","selectedNode"],mixins:[P,J,z],methods:{doit(e){const t="undo"==e?++this.historyIndex:this.historyIndex--;let o=this.note.HT[t];const s="undo"==e?"before":"after";switch(o.prop){case"CT":case"CL":case"SUM":this.getNodeObj({location:o.loc,callback:(e,t)=>{const c=e[t];c[o.prop]=o[s]}});break;case"ROW":case"COL":X.emit("table-edit",{historyObj:o,resultValue:s});break;case"IST":{const e=o.loc,t=this.deleteNode(e);o.prop="DEL",o.loc[o.loc.length-1]-=1,o.nodeObj=t;break}case"DEL":{const e=o.nodeObj,t=o.loc;this.insertNode(e,t),o.prop="IST",o.loc[o.loc.length-1]+=1;break}}},doSome(e){const t=e-this.historyIndex,o=Math.abs(t);let s;if(t>0)s="undo";else{if(!(t<0))return;s="redo"}for(let c=0;c<o;c++)this.doit(s)}},mounted(){addEventListener("keydown",e=>{const t=e.altKey,o=e.key;t&&"z"==o&&this.doit("undo")}),addEventListener("keydown",e=>{const t=e.altKey,o=e.key;t&&"y"==o&&this.doit("redo")}),X.on("add-history",e=>{const t=this.note.HT;if(20==t.length&&t.pop(),this.historyIndex<0)t.unshift(e);else{const o=this.historyIndex+1;t.splice(0,o),t.unshift(e),this.historyIndex=-1}}),X.on("clear-history",()=>{this.historyIndex=-1})}};o("c5a9");const As=H()(Ds,[["render",fs],["__scopeId","data-v-5fab3036"]]);var Is=As,$s={data(){return{textfieldGroupDisabled:!0,colorsDisabled:!0,tableSetterDisabled:!0,historyDisabled:!1}},components:{TextfieldGroupFixed:Fo,Colors:Jo,TableSetter:ds,History:Is},methods:{open(e){this.closeAll(),this[e+"Disabled"]=!1},close(e){this[e+"Disabled"]=!0,this.historyDisabled=!1},closeAll(){this.colorsDisabled=!0,this.textfieldGroupDisabled=!0,this.tableSetterDisabled=!0,this.historyDisabled=!0}},mounted(){X.on("fixedComponents-open",this.open),X.on("textfield-open",()=>{this.open("textfieldGroup")}),X.on("fixedComponents-close",()=>{this.closeAll(),this.historyDisabled=!1})}};o("4a16");const Bs=H()($s,[["render",jo],["__scopeId","data-v-ab5781fc"]]);var Es=Bs;const Fs={class:"msgbar-outer"};function Hs(e,t,o,c,i,n){return Object(s["o"])(),Object(s["e"])(s["b"],{name:"slide"},{default:Object(s["A"])(()=>[Object(s["B"])(Object(s["g"])("div",Fs,[Object(s["g"])("div",{class:Object(s["m"])(["msgbar",{active:i.active}]),onClick:t[0]||(t[0]=(...e)=>n.close&&n.close(...e))},Object(s["w"])(i.msg),3)],512),[[s["y"],i.active]])]),_:1})}var Us={data(){return{active:!1,msg:""}},methods:{close(){this.active=!1}},mounted(){X.on("show-msg",e=>{this.msg=e,this.active=!0})},watch:{active(e){e&&setTimeout(()=>{this.close()},3e3)}}};o("e8e8");const Vs=H()(Us,[["render",Hs]]);var Rs=Vs,Gs={NM:"Example",HT:[],CTS:[{NT:"h",CT:"这是一个大标题",CL:"#333"},{NT:"hr"},{NT:"p",CT:"这是一个段落",CL:"#333"},{NT:"p",CT:"内联样式实例（均使用英文符号）：##粗体## ``代码`` __下划线__ //斜体// --删除-- ::淡化::",CL:"#333"},{NT:"link",CT:"一个链接",HF:"https://www.bing.com",CL:"#333"},{NT:"floor",CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333"},{NT:"p",CT:"这是一个段落",CL:"#333"},{NT:"floor",CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333"},{NT:"p",CT:"这是一个段落",CL:"#333"}]}]},{NT:"list",OL:!0,CTS:[{NT:"li",CT:"这是一个列表项",CL:"#333"},{NT:"li",CT:"这是一个列表项",CL:"#333"},{NT:"list",OL:!1,CTS:[{NT:"li",CT:"嵌套列表内的列表项",CL:"#333"},{NT:"li",CT:"嵌套列表内的列表项",CL:"#333"}]}]},{NT:"table",CTS:[["表格项","表格项","表格项","表格项"],["表格项","表格项","表格项","表格项"]]},{NT:"details",SUM:"这是一个详情块",CTS:[{CT:"这是一个段落",CL:"#333"},{CT:"这是一个段落",CL:"#333"}]},{NT:"code",LG:"javascript",CT:"console.log('Hello World')\nalert('Hello World')"}]},Ks={name:"App",components:{Anchors:Yt,Msgbar:Rs,Note:Vt,ToolBar:oe,ControlBalls:uo,FixedComponents:Es},data(){return{windowDisabled:!1,note:Gs,selectedNode:{loc:null,obj:null,vnode:null,type:null},isDarkMode:!1,isTouchMode:!1,isFullscreen:!1}},provide(){return{note:this.note,selectedNode:this.selectedNode,isTouchMode:Object(s["c"])(()=>this.isTouchMode)}},mounted(){this.$nextTick(()=>{const e=()=>{const e=document.querySelector("#meta-viewport");let t;window&&(t=window.outerHeight);const o=`width=device-width,height=${t},initial-scale=1.0`;e.setAttribute("content",o)};e(),addEventListener("orientationchange",()=>{e()})})}};o("5113");const qs=H()(Ks,[["render",c]]);var Ws=qs;o("2c43"),o("5143"),o("8f09"),o("38b9"),o("afd3"),o("86be"),o("61fd"),o("8d2a"),o("cde1"),o("584d");const Ps=Object(s["d"])(Ws);Ps.use(ut["a"]),Ps.config.unwrapInjectedRef=!0,Ps.mount("#app")},"584d":function(e,t,o){},"61fd":function(e,t,o){},6266:function(e,t,o){},6377:function(e,t,o){},"6d2d":function(e,t,o){},"6d6f":function(e,t,o){},"73cc":function(e,t,o){},7579:function(e,t,o){"use strict";o("6d6f")},"83d0":function(e,t,o){"use strict";o("73cc")},"86be":function(e,t,o){},8897:function(e,t,o){"use strict";o("ad76")},"8a36":function(e,t,o){"use strict";o("4e36")},"8c71":function(e,t,o){},"8d2a":function(e,t,o){},"8f09":function(e,t,o){},"9fa6":function(e,t,o){"use strict";o("39de")},a306:function(e,t,o){},a55b:function(e,t,o){},ab97:function(e,t,o){"use strict";o("42ed")},ad76:function(e,t,o){},aee9:function(e,t,o){"use strict";o("6266")},afd3:function(e,t,o){},bde3:function(e,t,o){"use strict";o("e4e5")},c436:function(e,t,o){"use strict";o("d6c2")},c5a9:function(e,t,o){"use strict";o("475b")},cde1:function(e,t,o){},cee2:function(e,t,o){},d6c2:function(e,t,o){},da3e:function(e,t,o){},e4e5:function(e,t,o){},e8e8:function(e,t,o){"use strict";o("a55b")}});
//# sourceMappingURL=app.a5c37c11.js.map